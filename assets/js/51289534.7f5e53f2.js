"use strict";(self.webpackChunkq_01_docs=self.webpackChunkq_01_docs||[]).push([[408],{995:(e,a,t)=>{t.r(a),t.d(a,{assets:()=>h,contentTitle:()=>n,default:()=>m,frontMatter:()=>o,metadata:()=>d,toc:()=>p});var s=t(7624),i=t(2172);const c=t.p+"assets/images/db-access-041859a231c038ae7750e9b06b2a2c88.png",r=t.p+"assets/images/api-flow-309d0b121e5b2421b52bbf5d6fd21aa1.png",o={id:"map-core-api-database-access",title:"Database Access",sidebar_label:"Database Access"},n="Database Access",d={id:"products/map.q01.io/core-api/database-access/map-core-api-database-access",title:"Database Access",description:"Database Access",source:"@site/docs/products/map.q01.io/core-api/2-database-access/index.md",sourceDirName:"products/map.q01.io/core-api/2-database-access",slug:"/products/map.q01.io/core-api/database-access/",permalink:"/docs/products/map.q01.io/core-api/database-access/",draft:!1,unlisted:!1,tags:[],version:"current",frontMatter:{id:"map-core-api-database-access",title:"Database Access",sidebar_label:"Database Access"},sidebar:"mapSidebar",previous:{title:"Components overview",permalink:"/docs/products/map.q01.io/core-api/components-overview/"},next:{title:"Authentication",permalink:"/docs/products/map.q01.io/core-api/authentication/"}},h={},p=[{value:"Transmission of Source Information",id:"transmission-of-source-information",level:2}];function l(e){const a={code:"code",h1:"h1",h2:"h2",p:"p",pre:"pre",...(0,i.M)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(a.h1,{id:"database-access",children:"Database Access"}),"\n",(0,s.jsx)(a.p,{children:"Access to the database linked to a microservice is exclusively delegated to the core APIs (query and/or write). Therefore, a microservice for reading or writing data in the database will need to invoke the endpoints exposed by the core service, to which the correct information must be provided so that the latter can (via the query/write API) access the correct database."}),"\n",(0,s.jsx)("img",{src:c}),"\n",(0,s.jsx)(a.h2,{id:"transmission-of-source-information",children:"Transmission of Source Information"}),"\n",(0,s.jsx)(a.p,{children:"To instruct the core service correctly and ensure that data reading/writing occurs properly in the desired database, it is necessary to add a key to the headers in API calls."}),"\n",(0,s.jsx)(a.p,{children:"This operation is handled directly by the libraries present in each microservice, which redirect CRUD calls to the core service.\nHowever, it is necessary to manually modify the headers if such libraries are not used (for example, when implementing specific endpoints in a microservice and it is necessary to obtain data from the reference database)."}),"\n",(0,s.jsx)(a.p,{children:"The key to be used and added to the headers is microservice: [microserviceId]."}),"\n",(0,s.jsx)(a.pre,{children:(0,s.jsx)(a.code,{className:"language-sh",children:"Accept:application/json\nContent-Type:application/json\nAuthorization: Bearer Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiJ9.\neyJpc3MiOiJwb3dlcjJyZXRhaWwuY29tIiwiYXVkIjoiaHR0cDpcL1wva2V0Y2hhcHAucG93ZXIycmV0YWlsLmNvbSIsImlhdCI6MTU4NTczNDUz\nNCwibmJmIjoxNTg1NzM0NTM0LCJleHAiOjE1ODU3MzU0MzQsInNlc3Npb25JZCI6IjIxMiJ9.\nklDHrQLTjZdUNzhd0RNsw6TwrXmahreQyEMANk38gXpc_oBhVebQ87tvXmw1DNNZcga3R2FHRpzS6yM3q61hkL93cq1TW0hfAN6f7-\nFXHXpPKRMkoPJAXd9hh31pQRNjb1-hoO3etbpWVEHij7mcPYP4WhNC-MuRlGY-Y_Al-ME\nmicroservice: mssettings\n"})}),"\n",(0,s.jsx)(a.p,{children:'Through the "microservice" key present in the header, the core write and query components will know how to retrieve information related to the database to be queried.'}),"\n",(0,s.jsx)(a.p,{children:"Note: The system will verify that the code sent (currently in plain text, but a unique identification code will be created shortly) is valid and that the call is authorized."}),"\n",(0,s.jsx)(a.p,{children:"Below is a diagram showing the sequential flow of how to obtain data from the database of a microservice."}),"\n",(0,s.jsx)("img",{src:r})]})}function m(e={}){const{wrapper:a}={...(0,i.M)(),...e.components};return a?(0,s.jsx)(a,{...e,children:(0,s.jsx)(l,{...e})}):l(e)}},2172:(e,a,t)=>{t.d(a,{I:()=>o,M:()=>r});var s=t(1504);const i={},c=s.createContext(i);function r(e){const a=s.useContext(c);return s.useMemo((function(){return"function"==typeof e?e(a):{...a,...e}}),[a,e])}function o(e){let a;return a=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:r(e.components),s.createElement(c.Provider,{value:a},e.children)}}}]);