"use strict";(self.webpackChunkq_01_docs=self.webpackChunkq_01_docs||[]).push([[336],{9584:(e,r,n)=>{n.r(r),n.d(r,{assets:()=>l,contentTitle:()=>t,default:()=>h,frontMatter:()=>o,metadata:()=>d,toc:()=>a});var s=n(7624),i=n(2172);const o={title:"Error Handling",sidebar_label:"Error Handling",sidebar_position:11,description:"Error codes, nested errors, and validation failures"},t="Error Handling",d={id:"products/map.q01.io/core-api-platform-v4/write-patterns/error-handling",title:"Error Handling",description:"Error codes, nested errors, and validation failures",source:"@site/docs/products/map.q01.io/core-api-platform-v4/04-write-patterns/error-handling.md",sourceDirName:"products/map.q01.io/core-api-platform-v4/04-write-patterns",slug:"/products/map.q01.io/core-api-platform-v4/write-patterns/error-handling",permalink:"/docs/products/map.q01.io/core-api-platform-v4/write-patterns/error-handling",draft:!1,unlisted:!1,tags:[],version:"current",sidebarPosition:11,frontMatter:{title:"Error Handling",sidebar_label:"Error Handling",sidebar_position:11,description:"Error codes, nested errors, and validation failures"},sidebar:"mapSidebar",previous:{title:"Counter Management",permalink:"/docs/products/map.q01.io/core-api-platform-v4/write-patterns/counter-management"},next:{title:"Batch Operations",permalink:"/docs/products/map.q01.io/core-api-platform-v4/write-patterns/batch-operations"}},l={},a=[{value:"Overview",id:"overview",level:2},{value:"Error Response Structure",id:"error-response-structure",level:2},{value:"Standard Error Format",id:"standard-error-format",level:3},{value:"Authentication Errors (401)",id:"authentication-errors-401",level:2},{value:"TOKEN_INVALID",id:"token_invalid",level:3},{value:"TOKEN_EXPIRED",id:"token_expired",level:3},{value:"TOKEN_MISSING",id:"token_missing",level:3},{value:"Authorization Errors (403)",id:"authorization-errors-403",level:2},{value:"GRANT_DENIED",id:"grant_denied",level:3},{value:"Validation Errors (400)",id:"validation-errors-400",level:2},{value:"REQUIRED_FIELD_MISSING",id:"required_field_missing",level:3},{value:"FIELD_NOT_CREATEABLE",id:"field_not_createable",level:3},{value:"FIELD_NOT_MODIFIABLE",id:"field_not_modifiable",level:3},{value:"INVALID_FIELD_VALUE",id:"invalid_field_value",level:3},{value:"Constraint Errors (400)",id:"constraint-errors-400",level:2},{value:"FOREIGN_KEY_VIOLATION",id:"foreign_key_violation",level:3},{value:"UNIQUE_CONSTRAINT_VIOLATION",id:"unique_constraint_violation",level:3},{value:"CHECK_CONSTRAINT_VIOLATION",id:"check_constraint_violation",level:3},{value:"Not Found Errors (404)",id:"not-found-errors-404",level:2},{value:"RECORD_NOT_FOUND",id:"record_not_found",level:3},{value:"DIMENSION_NOT_FOUND",id:"dimension_not_found",level:3},{value:"Conflict Errors (409)",id:"conflict-errors-409",level:2},{value:"CONCURRENT_MODIFICATION",id:"concurrent_modification",level:3},{value:"Server Errors (500)",id:"server-errors-500",level:2},{value:"INTERNAL_SERVER_ERROR",id:"internal_server_error",level:3},{value:"DATABASE_ERROR",id:"database_error",level:3},{value:"Nested Errors",id:"nested-errors",level:2},{value:"Multiple Validation Errors",id:"multiple-validation-errors",level:3},{value:"JavaScript Error Handling",id:"javascript-error-handling",level:2},{value:"Error Handler Class",id:"error-handler-class",level:3},{value:"React Error Boundary",id:"react-error-boundary",level:3},{value:"Best Practices",id:"best-practices",level:2},{value:"\u2705 DO:",id:"-do",level:3},{value:"\u274c DON&#39;T:",id:"-dont",level:3},{value:"Summary",id:"summary",level:2},{value:"Related Concepts",id:"related-concepts",level:2}];function c(e){const r={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.M)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(r.h1,{id:"error-handling",children:"Error Handling"}),"\n",(0,s.jsx)(r.h2,{id:"overview",children:"Overview"}),"\n",(0,s.jsxs)(r.p,{children:["CoreWrite provides structured error responses for all failure scenarios. Error responses include ",(0,s.jsx)(r.strong,{children:"error code"}),", ",(0,s.jsx)(r.strong,{children:"message"}),", ",(0,s.jsx)(r.strong,{children:"field"})," (if applicable), and additional context for debugging."]}),"\n",(0,s.jsx)(r.p,{children:(0,s.jsx)(r.strong,{children:"Error Categories:"})}),"\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.strong,{children:"Authentication Errors"})," (401) - Token issues"]}),"\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.strong,{children:"Authorization Errors"})," (403) - Permission denied"]}),"\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.strong,{children:"Validation Errors"})," (400) - Field validation failures"]}),"\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.strong,{children:"Constraint Errors"})," (400) - Database constraint violations"]}),"\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.strong,{children:"Not Found Errors"})," (404) - Record doesn't exist"]}),"\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.strong,{children:"Conflict Errors"})," (409) - Concurrent modification"]}),"\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.strong,{children:"Server Errors"})," (500) - Unexpected failures"]}),"\n"]}),"\n",(0,s.jsx)(r.h2,{id:"error-response-structure",children:"Error Response Structure"}),"\n",(0,s.jsx)(r.h3,{id:"standard-error-format",children:"Standard Error Format"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-json",children:'{\n  "error": "ValidationError",\n  "message": "Required field missing: XPRD01",\n  "code": "REQUIRED_FIELD_MISSING",\n  "status": 400,\n  "field": "XPRD01",\n  "fieldDescription": "Product name",\n  "dimension": "PRD",\n  "timestamp": "2025-12-19T16:00:00Z",\n  "requestId": "req_550e8400"\n}\n'})}),"\n",(0,s.jsx)(r.p,{children:(0,s.jsx)(r.strong,{children:"Fields:"})}),"\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.code,{children:"error"}),": Error type (ValidationError, AuthenticationError, etc.)"]}),"\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.code,{children:"message"}),": Human-readable description"]}),"\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.code,{children:"code"}),": Machine-readable error code"]}),"\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.code,{children:"status"}),": HTTP status code"]}),"\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.code,{children:"field"}),": Field causing error (if applicable)"]}),"\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.code,{children:"fieldDescription"}),": User-friendly field name"]}),"\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.code,{children:"dimension"}),": Dimension involved"]}),"\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.code,{children:"timestamp"}),": When error occurred"]}),"\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.code,{children:"requestId"}),": Unique request identifier for tracing"]}),"\n"]}),"\n",(0,s.jsx)(r.h2,{id:"authentication-errors-401",children:"Authentication Errors (401)"}),"\n",(0,s.jsx)(r.h3,{id:"token_invalid",children:"TOKEN_INVALID"}),"\n",(0,s.jsxs)(r.p,{children:[(0,s.jsx)(r.strong,{children:"Cause:"})," JWT token signature invalid or malformed"]}),"\n",(0,s.jsx)(r.p,{children:(0,s.jsx)(r.strong,{children:"Response:"})}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-json",children:'{\n  "error": "AuthenticationError",\n  "message": "Invalid or expired token",\n  "code": "TOKEN_INVALID",\n  "status": 401\n}\n'})}),"\n",(0,s.jsxs)(r.p,{children:[(0,s.jsx)(r.strong,{children:"Client Action:"})," Redirect to login, refresh token"]}),"\n",(0,s.jsx)(r.h3,{id:"token_expired",children:"TOKEN_EXPIRED"}),"\n",(0,s.jsxs)(r.p,{children:[(0,s.jsx)(r.strong,{children:"Cause:"})," JWT token past expiration time"]}),"\n",(0,s.jsx)(r.p,{children:(0,s.jsx)(r.strong,{children:"Response:"})}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-json",children:'{\n  "error": "AuthenticationError",\n  "message": "Token has expired",\n  "code": "TOKEN_EXPIRED",\n  "status": 401,\n  "expiredAt": "2025-12-19T15:00:00Z"\n}\n'})}),"\n",(0,s.jsxs)(r.p,{children:[(0,s.jsx)(r.strong,{children:"Client Action:"})," Refresh token or re-authenticate"]}),"\n",(0,s.jsx)(r.h3,{id:"token_missing",children:"TOKEN_MISSING"}),"\n",(0,s.jsxs)(r.p,{children:[(0,s.jsx)(r.strong,{children:"Cause:"})," No Authorization header provided"]}),"\n",(0,s.jsx)(r.p,{children:(0,s.jsx)(r.strong,{children:"Response:"})}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-json",children:'{\n  "error": "AuthenticationError",\n  "message": "Authorization header missing",\n  "code": "TOKEN_MISSING",\n  "status": 401\n}\n'})}),"\n",(0,s.jsxs)(r.p,{children:[(0,s.jsx)(r.strong,{children:"Client Action:"})," Include ",(0,s.jsx)(r.code,{children:"Authorization: Bearer {token}"})," header"]}),"\n",(0,s.jsx)(r.h2,{id:"authorization-errors-403",children:"Authorization Errors (403)"}),"\n",(0,s.jsx)(r.h3,{id:"grant_denied",children:"GRANT_DENIED"}),"\n",(0,s.jsxs)(r.p,{children:[(0,s.jsx)(r.strong,{children:"Cause:"})," User lacks required permission for operation"]}),"\n",(0,s.jsx)(r.p,{children:(0,s.jsx)(r.strong,{children:"Response:"})}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-json",children:'{\n  "error": "AuthorizationError",\n  "message": "Insufficient permissions for this operation",\n  "code": "GRANT_DENIED",\n  "status": 403,\n  "required_grant": "products.write",\n  "user_grants": ["products.read"],\n  "user": "user@example.com"\n}\n'})}),"\n",(0,s.jsxs)(r.p,{children:[(0,s.jsx)(r.strong,{children:"Client Action:"})," Request additional permissions from admin, hide UI elements"]}),"\n",(0,s.jsx)(r.h2,{id:"validation-errors-400",children:"Validation Errors (400)"}),"\n",(0,s.jsx)(r.h3,{id:"required_field_missing",children:"REQUIRED_FIELD_MISSING"}),"\n",(0,s.jsxs)(r.p,{children:[(0,s.jsx)(r.strong,{children:"Cause:"})," Required field not provided"]}),"\n",(0,s.jsx)(r.p,{children:(0,s.jsx)(r.strong,{children:"Response:"})}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-json",children:'{\n  "error": "ValidationError",\n  "message": "Required field missing: XPRD01",\n  "code": "REQUIRED_FIELD_MISSING",\n  "status": 400,\n  "field": "XPRD01",\n  "fieldDescription": "Product name",\n  "dimension": "PRD"\n}\n'})}),"\n",(0,s.jsxs)(r.p,{children:[(0,s.jsx)(r.strong,{children:"Client Action:"})," Highlight field, show error message"]}),"\n",(0,s.jsx)(r.h3,{id:"field_not_createable",children:"FIELD_NOT_CREATEABLE"}),"\n",(0,s.jsxs)(r.p,{children:[(0,s.jsx)(r.strong,{children:"Cause:"})," Field lacks 'N' flag in COD_ON_OFF (not allowed on POST)"]}),"\n",(0,s.jsx)(r.p,{children:(0,s.jsx)(r.strong,{children:"Response:"})}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-json",children:'{\n  "error": "ValidationError",\n  "message": "Field not allowed in create operation: XPRD03",\n  "code": "FIELD_NOT_CREATEABLE",\n  "status": 400,\n  "field": "XPRD03",\n  "cod_on_off": "LDR",\n  "required_flag": "N",\n  "dimension": "PRD"\n}\n'})}),"\n",(0,s.jsxs)(r.p,{children:[(0,s.jsx)(r.strong,{children:"Client Action:"})," Remove field from request, it's auto-generated"]}),"\n",(0,s.jsx)(r.h3,{id:"field_not_modifiable",children:"FIELD_NOT_MODIFIABLE"}),"\n",(0,s.jsxs)(r.p,{children:[(0,s.jsx)(r.strong,{children:"Cause:"})," Field lacks 'M' flag in COD_ON_OFF (not allowed on PUT/PATCH)"]}),"\n",(0,s.jsx)(r.p,{children:(0,s.jsx)(r.strong,{children:"Response:"})}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-json",children:'{\n  "error": "ValidationError",\n  "message": "Field not modifiable: XPRD03",\n  "code": "FIELD_NOT_MODIFIABLE",\n  "status": 400,\n  "field": "XPRD03",\n  "cod_on_off": "LDR",\n  "required_flag": "M",\n  "dimension": "PRD"\n}\n'})}),"\n",(0,s.jsxs)(r.p,{children:[(0,s.jsx)(r.strong,{children:"Client Action:"})," Remove field from request, it's read-only"]}),"\n",(0,s.jsx)(r.h3,{id:"invalid_field_value",children:"INVALID_FIELD_VALUE"}),"\n",(0,s.jsxs)(r.p,{children:[(0,s.jsx)(r.strong,{children:"Cause:"})," Field value violates business rule"]}),"\n",(0,s.jsx)(r.p,{children:(0,s.jsx)(r.strong,{children:"Response:"})}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-json",children:'{\n  "error": "ValidationError",\n  "message": "Price must be greater than zero",\n  "code": "INVALID_FIELD_VALUE",\n  "status": 400,\n  "field": "XPRD02",\n  "value": -10.00,\n  "constraint": "value > 0"\n}\n'})}),"\n",(0,s.jsxs)(r.p,{children:[(0,s.jsx)(r.strong,{children:"Client Action:"})," Show validation error, correct value"]}),"\n",(0,s.jsx)(r.h2,{id:"constraint-errors-400",children:"Constraint Errors (400)"}),"\n",(0,s.jsx)(r.h3,{id:"foreign_key_violation",children:"FOREIGN_KEY_VIOLATION"}),"\n",(0,s.jsxs)(r.p,{children:[(0,s.jsx)(r.strong,{children:"Cause:"})," Referenced record doesn't exist"]}),"\n",(0,s.jsx)(r.p,{children:(0,s.jsx)(r.strong,{children:"Response:"})}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-json",children:'{\n  "error": "ConstraintViolationError",\n  "message": "Category not found: cat_invalid",\n  "code": "FOREIGN_KEY_VIOLATION",\n  "status": 400,\n  "field": "XPRD05",\n  "value": "cat_invalid",\n  "referencedTable": "TB_ANAG_CAT00",\n  "referencedField": "CAT_ID"\n}\n'})}),"\n",(0,s.jsxs)(r.p,{children:[(0,s.jsx)(r.strong,{children:"Client Action:"})," Select valid category from dropdown"]}),"\n",(0,s.jsx)(r.h3,{id:"unique_constraint_violation",children:"UNIQUE_CONSTRAINT_VIOLATION"}),"\n",(0,s.jsxs)(r.p,{children:[(0,s.jsx)(r.strong,{children:"Cause:"})," Duplicate value for unique field"]}),"\n",(0,s.jsx)(r.p,{children:(0,s.jsx)(r.strong,{children:"Response:"})}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-json",children:'{\n  "error": "ConstraintViolationError",\n  "message": "Product code already exists: PRD-2025-001",\n  "code": "UNIQUE_CONSTRAINT_VIOLATION",\n  "status": 400,\n  "field": "XPRD03",\n  "value": "PRD-2025-001",\n  "constraint": "UNIQUE(XPRD03)"\n}\n'})}),"\n",(0,s.jsxs)(r.p,{children:[(0,s.jsx)(r.strong,{children:"Client Action:"})," Generate new code or modify existing record"]}),"\n",(0,s.jsx)(r.h3,{id:"check_constraint_violation",children:"CHECK_CONSTRAINT_VIOLATION"}),"\n",(0,s.jsxs)(r.p,{children:[(0,s.jsx)(r.strong,{children:"Cause:"})," Value fails database CHECK constraint"]}),"\n",(0,s.jsx)(r.p,{children:(0,s.jsx)(r.strong,{children:"Response:"})}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-json",children:'{\n  "error": "ConstraintViolationError",\n  "message": "Check constraint violation: XPRD02 must be >= 0",\n  "code": "CHECK_CONSTRAINT_VIOLATION",\n  "status": 400,\n  "field": "XPRD02",\n  "value": -10.00,\n  "constraint": "CHECK (XPRD02 >= 0)"\n}\n'})}),"\n",(0,s.jsxs)(r.p,{children:[(0,s.jsx)(r.strong,{children:"Client Action:"})," Correct value to meet constraint"]}),"\n",(0,s.jsx)(r.h2,{id:"not-found-errors-404",children:"Not Found Errors (404)"}),"\n",(0,s.jsx)(r.h3,{id:"record_not_found",children:"RECORD_NOT_FOUND"}),"\n",(0,s.jsxs)(r.p,{children:[(0,s.jsx)(r.strong,{children:"Cause:"})," Record with given ID doesn't exist"]}),"\n",(0,s.jsx)(r.p,{children:(0,s.jsx)(r.strong,{children:"Response:"})}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-json",children:'{\n  "error": "NotFoundError",\n  "message": "Product not found: 123",\n  "code": "RECORD_NOT_FOUND",\n  "status": 404,\n  "dimension": "PRD",\n  "recordId": "123"\n}\n'})}),"\n",(0,s.jsxs)(r.p,{children:[(0,s.jsx)(r.strong,{children:"Client Action:"}),' Show "record not found" message, redirect to list']}),"\n",(0,s.jsx)(r.h3,{id:"dimension_not_found",children:"DIMENSION_NOT_FOUND"}),"\n",(0,s.jsxs)(r.p,{children:[(0,s.jsx)(r.strong,{children:"Cause:"})," Dimension not registered in TB_DIM"]}),"\n",(0,s.jsx)(r.p,{children:(0,s.jsx)(r.strong,{children:"Response:"})}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-json",children:'{\n  "error": "NotFoundError",\n  "message": "Dimension not found: INVALID",\n  "code": "DIMENSION_NOT_FOUND",\n  "status": 404,\n  "dimension": "INVALID"\n}\n'})}),"\n",(0,s.jsxs)(r.p,{children:[(0,s.jsx)(r.strong,{children:"Client Action:"})," Check URL, use correct dimension name"]}),"\n",(0,s.jsx)(r.h2,{id:"conflict-errors-409",children:"Conflict Errors (409)"}),"\n",(0,s.jsx)(r.h3,{id:"concurrent_modification",children:"CONCURRENT_MODIFICATION"}),"\n",(0,s.jsxs)(r.p,{children:[(0,s.jsx)(r.strong,{children:"Cause:"})," Record modified by another user (optimistic locking)"]}),"\n",(0,s.jsx)(r.p,{children:(0,s.jsx)(r.strong,{children:"Response:"})}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-json",children:'{\n  "error": "ConflictError",\n  "message": "Record was modified by another user",\n  "code": "CONCURRENT_MODIFICATION",\n  "status": 409,\n  "dimension": "PRD",\n  "recordId": "123",\n  "expectedVersion": "20251219150000",\n  "currentVersion": "20251219160000",\n  "modifiedBy": "admin@example.com"\n}\n'})}),"\n",(0,s.jsxs)(r.p,{children:[(0,s.jsx)(r.strong,{children:"Client Action:"})," Refresh record, show conflict resolution UI"]}),"\n",(0,s.jsx)(r.h2,{id:"server-errors-500",children:"Server Errors (500)"}),"\n",(0,s.jsx)(r.h3,{id:"internal_server_error",children:"INTERNAL_SERVER_ERROR"}),"\n",(0,s.jsxs)(r.p,{children:[(0,s.jsx)(r.strong,{children:"Cause:"})," Unexpected server error"]}),"\n",(0,s.jsx)(r.p,{children:(0,s.jsx)(r.strong,{children:"Response:"})}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-json",children:'{\n  "error": "InternalServerError",\n  "message": "An unexpected error occurred",\n  "code": "INTERNAL_SERVER_ERROR",\n  "status": 500,\n  "requestId": "req_550e8400"\n}\n'})}),"\n",(0,s.jsxs)(r.p,{children:[(0,s.jsx)(r.strong,{children:"Client Action:"})," Retry with exponential backoff, contact support"]}),"\n",(0,s.jsx)(r.h3,{id:"database_error",children:"DATABASE_ERROR"}),"\n",(0,s.jsxs)(r.p,{children:[(0,s.jsx)(r.strong,{children:"Cause:"})," Database connection or query failure"]}),"\n",(0,s.jsx)(r.p,{children:(0,s.jsx)(r.strong,{children:"Response:"})}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-json",children:'{\n  "error": "DatabaseError",\n  "message": "Database operation failed",\n  "code": "DATABASE_ERROR",\n  "status": 500,\n  "requestId": "req_550e8400"\n}\n'})}),"\n",(0,s.jsxs)(r.p,{children:[(0,s.jsx)(r.strong,{children:"Client Action:"})," Retry, check system status page"]}),"\n",(0,s.jsx)(r.h2,{id:"nested-errors",children:"Nested Errors"}),"\n",(0,s.jsx)(r.h3,{id:"multiple-validation-errors",children:"Multiple Validation Errors"}),"\n",(0,s.jsx)(r.p,{children:(0,s.jsx)(r.strong,{children:"Response with multiple field errors:"})}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-json",children:'{\n  "error": "ValidationError",\n  "message": "Multiple validation errors",\n  "code": "VALIDATION_ERRORS",\n  "status": 400,\n  "errors": [\n    {\n      "field": "XPRD01",\n      "message": "Product name is required",\n      "code": "REQUIRED_FIELD_MISSING"\n    },\n    {\n      "field": "XPRD02",\n      "message": "Price must be greater than zero",\n      "code": "INVALID_FIELD_VALUE",\n      "value": -10.00\n    },\n    {\n      "field": "XPRD05",\n      "message": "Category not found: cat_invalid",\n      "code": "FOREIGN_KEY_VIOLATION",\n      "value": "cat_invalid"\n    }\n  ]\n}\n'})}),"\n",(0,s.jsx)(r.h2,{id:"javascript-error-handling",children:"JavaScript Error Handling"}),"\n",(0,s.jsx)(r.h3,{id:"error-handler-class",children:"Error Handler Class"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-javascript",children:"class CoreAPIError extends Error {\n  constructor(response) {\n    super(response.message);\n    this.code = response.code;\n    this.status = response.status;\n    this.field = response.field;\n    this.errors = response.errors;  // Nested errors\n    this.requestId = response.requestId;\n  }\n\n  isAuthenticationError() {\n    return this.status === 401;\n  }\n\n  isAuthorizationError() {\n    return this.status === 403;\n  }\n\n  isValidationError() {\n    return this.status === 400 && this.code.includes('FIELD');\n  }\n\n  isNotFoundError() {\n    return this.status === 404;\n  }\n\n  isServerError() {\n    return this.status >= 500;\n  }\n}\n\n// Usage\nasync function createProduct(data) {\n  try {\n    const response = await fetch(`${apiBase}/api/v4/core/PRD`, {\n      method: 'POST',\n      headers: {\n        'Authorization': `Bearer ${token}`,\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({ data })\n    });\n\n    if (!response.ok) {\n      const errorData = await response.json();\n      throw new CoreAPIError(errorData);\n    }\n\n    return response.json();\n  } catch (error) {\n    handleError(error);\n  }\n}\n\nfunction handleError(error) {\n  if (!(error instanceof CoreAPIError)) {\n    console.error('Network error:', error);\n    alert('Network error. Please check your connection.');\n    return;\n  }\n\n  if (error.isAuthenticationError()) {\n    // Redirect to login\n    window.location.href = '/login';\n    return;\n  }\n\n  if (error.isAuthorizationError()) {\n    alert('Access denied. You don\\'t have permission for this operation.');\n    return;\n  }\n\n  if (error.isValidationError()) {\n    showValidationErrors(error);\n    return;\n  }\n\n  if (error.isNotFoundError()) {\n    alert('Record not found.');\n    window.location.href = '/products';\n    return;\n  }\n\n  if (error.isServerError()) {\n    alert('Server error. Please try again later.');\n    return;\n  }\n\n  alert(`Error: ${error.message}`);\n}\n\nfunction showValidationErrors(error) {\n  if (error.errors) {\n    // Multiple errors\n    error.errors.forEach(err => {\n      highlightField(err.field, err.message);\n    });\n  } else {\n    // Single error\n    highlightField(error.field, error.message);\n  }\n}\n\nfunction highlightField(fieldName, message) {\n  const input = document.querySelector(`[name=\"${fieldName}\"]`);\n  if (input) {\n    input.classList.add('error');\n    showFieldError(input, message);\n    input.focus();\n  }\n}\n"})}),"\n",(0,s.jsx)(r.h3,{id:"react-error-boundary",children:"React Error Boundary"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-javascript",children:"class ErrorBoundary extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = { hasError: false, error: null };\n  }\n\n  static getDerivedStateFromError(error) {\n    return { hasError: true, error };\n  }\n\n  componentDidCatch(error, errorInfo) {\n    console.error('Error caught by boundary:', error, errorInfo);\n\n    // Log to error tracking service\n    logErrorToService(error, errorInfo);\n  }\n\n  render() {\n    if (this.state.hasError) {\n      return (\n        <div className=\"error-boundary\">\n          <h2>Something went wrong</h2>\n          <p>{this.state.error?.message}</p>\n          <button onClick={() => window.location.reload()}>\n            Reload Page\n          </button>\n        </div>\n      );\n    }\n\n    return this.props.children;\n  }\n}\n"})}),"\n",(0,s.jsx)(r.h2,{id:"best-practices",children:"Best Practices"}),"\n",(0,s.jsx)(r.h3,{id:"-do",children:"\u2705 DO:"}),"\n",(0,s.jsx)(r.p,{children:(0,s.jsx)(r.strong,{children:"Handle specific error codes:"})}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-javascript",children:"// \u2705 Good - specific handling\nif (error.code === 'REQUIRED_FIELD_MISSING') {\n  highlightField(error.field);\n} else if (error.code === 'FOREIGN_KEY_VIOLATION') {\n  showRelatedRecordSelector(error.field);\n}\n"})}),"\n",(0,s.jsx)(r.p,{children:(0,s.jsx)(r.strong,{children:"Show user-friendly messages:"})}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-javascript",children:"// \u2705 Good - user-friendly\nalert(`Please fill in ${error.fieldDescription}`);\n"})}),"\n",(0,s.jsx)(r.p,{children:(0,s.jsx)(r.strong,{children:"Log errors for debugging:"})}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-javascript",children:"// \u2705 Good - logging\nconsole.error('API Error:', {\n  code: error.code,\n  message: error.message,\n  requestId: error.requestId\n});\n"})}),"\n",(0,s.jsx)(r.p,{children:(0,s.jsx)(r.strong,{children:"Retry on server errors:"})}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-javascript",children:"// \u2705 Good - retry with backoff\nif (error.isServerError()) {\n  await retryWithBackoff(() => createProduct(data));\n}\n"})}),"\n",(0,s.jsx)(r.h3,{id:"-dont",children:"\u274c DON'T:"}),"\n",(0,s.jsx)(r.p,{children:(0,s.jsx)(r.strong,{children:"Don't show technical codes to users:"})}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-javascript",children:'// \u274c Bad - confusing\nalert(error.code);  // "REQUIRED_FIELD_MISSING"\n\n// \u2705 Good - user-friendly\nalert(`${error.fieldDescription} is required`);\n'})}),"\n",(0,s.jsx)(r.p,{children:(0,s.jsx)(r.strong,{children:"Don't ignore errors:"})}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-javascript",children:"// \u274c Bad - silent failure\ntry {\n  await createProduct(data);\n} catch (error) {\n  // Ignore\n}\n"})}),"\n",(0,s.jsx)(r.p,{children:(0,s.jsx)(r.strong,{children:"Don't retry authentication errors:"})}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-javascript",children:"// \u274c Bad - infinite retries\nif (error.status === 401) {\n  await retry(() => createProduct(data));\n}\n\n// \u2705 Good - redirect to login\nif (error.status === 401) {\n  window.location.href = '/login';\n}\n"})}),"\n",(0,s.jsx)(r.h2,{id:"summary",children:"Summary"}),"\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsx)(r.li,{children:"\u2705 Structured error responses with code, message, field"}),"\n",(0,s.jsx)(r.li,{children:"\u2705 HTTP status codes: 401 (auth), 403 (authz), 400 (validation), 404 (not found), 409 (conflict), 500 (server)"}),"\n",(0,s.jsx)(r.li,{children:"\u2705 Machine-readable error codes for programmatic handling"}),"\n",(0,s.jsx)(r.li,{children:"\u2705 Nested errors for multiple validation failures"}),"\n",(0,s.jsx)(r.li,{children:"\u2705 Request ID for tracing and debugging"}),"\n",(0,s.jsx)(r.li,{children:"\u2705 Field-specific errors with descriptions"}),"\n"]}),"\n",(0,s.jsx)(r.p,{children:(0,s.jsx)(r.strong,{children:"Key Takeaways:"})}),"\n",(0,s.jsxs)(r.ol,{children:["\n",(0,s.jsx)(r.li,{children:"Check error code for specific handling"}),"\n",(0,s.jsx)(r.li,{children:"Show user-friendly messages (not technical codes)"}),"\n",(0,s.jsx)(r.li,{children:"Highlight fields causing validation errors"}),"\n",(0,s.jsx)(r.li,{children:"Redirect to login on 401 (authentication)"}),"\n",(0,s.jsx)(r.li,{children:"Show access denied on 403 (authorization)"}),"\n",(0,s.jsx)(r.li,{children:"Retry with backoff on 500 (server errors)"}),"\n",(0,s.jsx)(r.li,{children:"Log request ID for debugging"}),"\n"]}),"\n",(0,s.jsx)(r.p,{children:(0,s.jsx)(r.strong,{children:"Error Code Quick Reference:"})}),"\n",(0,s.jsxs)(r.table,{children:[(0,s.jsx)(r.thead,{children:(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.th,{children:"Code"}),(0,s.jsx)(r.th,{children:"Status"}),(0,s.jsx)(r.th,{children:"Action"})]})}),(0,s.jsxs)(r.tbody,{children:[(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:"TOKEN_INVALID/EXPIRED"}),(0,s.jsx)(r.td,{children:"401"}),(0,s.jsx)(r.td,{children:"Redirect to login"})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:"GRANT_DENIED"}),(0,s.jsx)(r.td,{children:"403"}),(0,s.jsx)(r.td,{children:"Show access denied"})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:"REQUIRED_FIELD_MISSING"}),(0,s.jsx)(r.td,{children:"400"}),(0,s.jsx)(r.td,{children:"Highlight field"})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:"FIELD_NOT_CREATEABLE/MODIFIABLE"}),(0,s.jsx)(r.td,{children:"400"}),(0,s.jsx)(r.td,{children:"Remove from request"})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:"FOREIGN_KEY_VIOLATION"}),(0,s.jsx)(r.td,{children:"400"}),(0,s.jsx)(r.td,{children:"Select valid reference"})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:"UNIQUE_CONSTRAINT_VIOLATION"}),(0,s.jsx)(r.td,{children:"400"}),(0,s.jsx)(r.td,{children:"Generate new value"})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:"RECORD_NOT_FOUND"}),(0,s.jsx)(r.td,{children:"404"}),(0,s.jsx)(r.td,{children:"Redirect to list"})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:"CONCURRENT_MODIFICATION"}),(0,s.jsx)(r.td,{children:"409"}),(0,s.jsx)(r.td,{children:"Refresh and retry"})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:"INTERNAL_SERVER_ERROR"}),(0,s.jsx)(r.td,{children:"500"}),(0,s.jsx)(r.td,{children:"Retry with backoff"})]})]})]}),"\n",(0,s.jsxs)(r.p,{children:[(0,s.jsx)(r.strong,{children:"Next:"})," ",(0,s.jsx)(r.a,{href:"/docs/products/map.q01.io/core-api-platform-v4/write-patterns/batch-operations",children:"Batch Operations \u2192"})]}),"\n",(0,s.jsx)(r.h2,{id:"related-concepts",children:"Related Concepts"}),"\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.a,{href:"/docs/products/map.q01.io/core-api-platform-v4/write-patterns/validation",children:"Validation"})," - Multi-level validation"]}),"\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.a,{href:"/docs/products/map.q01.io/core-api-platform-v4/write-patterns/create-operations",children:"Create Operations"})," - POST errors"]}),"\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.a,{href:"/docs/products/map.q01.io/core-api-platform-v4/write-patterns/update-operations",children:"Update Operations"})," - PUT/PATCH errors"]}),"\n"]})]})}function h(e={}){const{wrapper:r}={...(0,i.M)(),...e.components};return r?(0,s.jsx)(r,{...e,children:(0,s.jsx)(c,{...e})}):c(e)}},2172:(e,r,n)=>{n.d(r,{I:()=>d,M:()=>t});var s=n(1504);const i={},o=s.createContext(i);function t(e){const r=s.useContext(o);return s.useMemo((function(){return"function"==typeof e?e(r):{...r,...e}}),[r,e])}function d(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:t(e.components),s.createElement(o.Provider,{value:r},e.children)}}}]);