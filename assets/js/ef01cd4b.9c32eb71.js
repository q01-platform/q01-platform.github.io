"use strict";(self.webpackChunkq_01_docs=self.webpackChunkq_01_docs||[]).push([[6592],{6748:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>c,contentTitle:()=>t,default:()=>o,frontMatter:()=>d,metadata:()=>l,toc:()=>a});var s=r(7624),i=r(2172);const d={title:"Metadata Tables",sidebar_label:"Metadata Tables",sidebar_position:2,description:"Complete schema reference for Q01 MAP framework metadata tables - TB_DIM, TB_VAR, TB_COST, TB_MENU, TB_OBJECT"},t="Metadata Tables",l={id:"products/map.q01.io/core-api-platform-v4/reference/metadata-tables",title:"Metadata Tables",description:"Complete schema reference for Q01 MAP framework metadata tables - TB_DIM, TB_VAR, TB_COST, TB_MENU, TB_OBJECT",source:"@site/docs/products/map.q01.io/core-api-platform-v4/08-reference/metadata-tables.md",sourceDirName:"products/map.q01.io/core-api-platform-v4/08-reference",slug:"/products/map.q01.io/core-api-platform-v4/reference/metadata-tables",permalink:"/docs/products/map.q01.io/core-api-platform-v4/reference/metadata-tables",draft:!1,unlisted:!1,tags:[],version:"current",sidebarPosition:2,frontMatter:{title:"Metadata Tables",sidebar_label:"Metadata Tables",sidebar_position:2,description:"Complete schema reference for Q01 MAP framework metadata tables - TB_DIM, TB_VAR, TB_COST, TB_MENU, TB_OBJECT"},sidebar:"mapSidebar",previous:{title:"Reference",permalink:"/docs/products/map.q01.io/core-api-platform-v4/reference/"},next:{title:"COD_ON_OFF Flags",permalink:"/docs/products/map.q01.io/core-api-platform-v4/reference/cod-on-off-flags"}},c={},a=[{value:"Overview",id:"overview",level:2},{value:"TB_DIM - Dimension Registry",id:"tb_dim---dimension-registry",level:2},{value:"Purpose",id:"purpose",level:3},{value:"Schema",id:"schema",level:3},{value:"Example Data",id:"example-data",level:3},{value:"Querying TB_DIM",id:"querying-tb_dim",level:3},{value:"TB_VAR - Field Definitions",id:"tb_var---field-definitions",level:2},{value:"Purpose",id:"purpose-1",level:3},{value:"Schema",id:"schema-1",level:3},{value:"Example Data",id:"example-data-1",level:3},{value:"Querying TB_VAR",id:"querying-tb_var",level:3},{value:"TB_COST - Field Configuration",id:"tb_cost---field-configuration",level:2},{value:"Purpose",id:"purpose-2",level:3},{value:"Schema",id:"schema-2",level:3},{value:"COD_ON_OFF Flags",id:"cod_on_off-flags",level:3},{value:"Example Data",id:"example-data-2",level:3},{value:"Pre-Insert Functions (VALUE_TEMP)",id:"pre-insert-functions-value_temp",level:3},{value:"Querying TB_COST",id:"querying-tb_cost",level:3},{value:"TB_MENU - Permission Hierarchy",id:"tb_menu---permission-hierarchy",level:2},{value:"Purpose",id:"purpose-3",level:3},{value:"Schema",id:"schema-3",level:3},{value:"Nested Set Model",id:"nested-set-model",level:3},{value:"Example Data",id:"example-data-3",level:3},{value:"Querying TB_MENU",id:"querying-tb_menu",level:3},{value:"TB_OBJECT - Dimension Relationships",id:"tb_object---dimension-relationships",level:2},{value:"Purpose",id:"purpose-4",level:3},{value:"Schema",id:"schema-4",level:3},{value:"Example Data",id:"example-data-4",level:3},{value:"Querying TB_OBJECT",id:"querying-tb_object",level:3},{value:"Summary",id:"summary",level:2},{value:"Related Concepts",id:"related-concepts",level:2}];function h(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.M)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.h1,{id:"metadata-tables",children:"Metadata Tables"}),"\n",(0,s.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,s.jsxs)(n.p,{children:["Q01 Core APIs are ",(0,s.jsx)(n.strong,{children:"metadata-driven"})," through the ",(0,s.jsx)(n.strong,{children:"MAP (Metadata Application Platform) framework"}),". Five core metadata tables define dimensions, fields, visibility, permissions, and relationships at runtime\u2014no code changes required for schema evolution."]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"MAP Framework Tables:"})}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"TB_DIM"})," - Dimension registry (entity types)"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"TB_VAR"})," - Field definitions (variables)"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"TB_COST"})," - Field configuration (visibility, validation, functions)"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"TB_MENU"})," - Permission hierarchy (grants)"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"TB_OBJECT"})," - Dimension relationships (foreign keys)"]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Benefits:"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"\u2705 No code changes for schema modifications"}),"\n",(0,s.jsx)(n.li,{children:"\u2705 Runtime field visibility control"}),"\n",(0,s.jsx)(n.li,{children:"\u2705 Centralized permission management"}),"\n",(0,s.jsx)(n.li,{children:"\u2705 Automatic cascade configuration"}),"\n",(0,s.jsx)(n.li,{children:"\u2705 Multi-tenant metadata isolation"}),"\n"]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"tb_dim---dimension-registry",children:"TB_DIM - Dimension Registry"}),"\n",(0,s.jsx)(n.h3,{id:"purpose",children:"Purpose"}),"\n",(0,s.jsxs)(n.p,{children:["Registers all ",(0,s.jsx)(n.strong,{children:"business entity types"})," (dimensions) in the system. Each dimension corresponds to a data table ",(0,s.jsx)(n.code,{children:"TB_ANAG_{COD_DIM}00"}),"."]}),"\n",(0,s.jsx)(n.h3,{id:"schema",children:"Schema"}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Field"}),(0,s.jsx)(n.th,{children:"Type"}),(0,s.jsx)(n.th,{children:"Description"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"COD_DIM"})}),(0,s.jsx)(n.td,{children:"VARCHAR(50) PK"}),(0,s.jsx)(n.td,{children:"Dimension code (e.g., 'PRD', 'ORD', 'CUST')"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"DESC_DIM"})}),(0,s.jsx)(n.td,{children:"VARCHAR(255)"}),(0,s.jsx)(n.td,{children:"Human-readable dimension name"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"PREFIX"})}),(0,s.jsx)(n.td,{children:"VARCHAR(10)"}),(0,s.jsx)(n.td,{children:"Field prefix (e.g., 'PRD_', 'ORD_')"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"TABLE_NAME"})}),(0,s.jsx)(n.td,{children:"VARCHAR(100)"}),(0,s.jsxs)(n.td,{children:["Physical table name (usually ",(0,s.jsx)(n.code,{children:"TB_ANAG_{COD_DIM}00"}),")"]})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"ID_FIELD"})}),(0,s.jsx)(n.td,{children:"VARCHAR(50)"}),(0,s.jsx)(n.td,{children:"Primary key field name (e.g., 'PRD_ID')"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"DEFAULT_PESO"})}),(0,s.jsx)(n.td,{children:"INT"}),(0,s.jsx)(n.td,{children:"Default peso level for new records"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"DEFAULT_COD_ON_OFF"})}),(0,s.jsx)(n.td,{children:"VARCHAR(10)"}),(0,s.jsx)(n.td,{children:"Default field visibility (LDRNM)"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"CASCADE_INSERT"})}),(0,s.jsx)(n.td,{children:"TEXT"}),(0,s.jsx)(n.td,{children:"Comma-separated list of dimensions to cascade on insert"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"CASCADE_UPDATE"})}),(0,s.jsx)(n.td,{children:"TEXT"}),(0,s.jsx)(n.td,{children:"Comma-separated list of dimensions to cascade on update"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"CASCADE_DELETE"})}),(0,s.jsx)(n.td,{children:"TEXT"}),(0,s.jsx)(n.td,{children:"Comma-separated list of dimensions to cascade on delete"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"SEQUENCE_NAME"})}),(0,s.jsx)(n.td,{children:"VARCHAR(100)"}),(0,s.jsx)(n.td,{children:"Database sequence for auto-increment IDs"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"COUNTER_FORMAT"})}),(0,s.jsx)(n.td,{children:"VARCHAR(100)"}),(0,s.jsx)(n.td,{children:"Format for TB_COUNTER-based IDs"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"ACTIVE"})}),(0,s.jsx)(n.td,{children:"BOOLEAN"}),(0,s.jsx)(n.td,{children:"Dimension enabled (true) or disabled (false)"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"SOURCE"})}),(0,s.jsx)(n.td,{children:"VARCHAR(50)"}),(0,s.jsx)(n.td,{children:"Tenant identifier"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"CREATED_AT"})}),(0,s.jsx)(n.td,{children:"VARCHAR(14)"}),(0,s.jsx)(n.td,{children:"Creation timestamp"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"UPDATED_AT"})}),(0,s.jsx)(n.td,{children:"VARCHAR(14)"}),(0,s.jsx)(n.td,{children:"Last update timestamp"})]})]})]}),"\n",(0,s.jsx)(n.h3,{id:"example-data",children:"Example Data"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sql",children:"INSERT INTO TB_DIM (\n  COD_DIM, DESC_DIM, PREFIX, TABLE_NAME, ID_FIELD,\n  DEFAULT_PESO, DEFAULT_COD_ON_OFF,\n  CASCADE_DELETE, ACTIVE, SOURCE\n) VALUES\n(\n  'PRD',                          -- Dimension code\n  'Products',                     -- Description\n  'PRD_',                         -- Field prefix\n  'TB_ANAG_PRD00',               -- Table name\n  'PRD_ID',                       -- Primary key\n  3,                              -- Default peso\n  'LDRNM',                        -- Default visibility (all flags)\n  'PRDIMG,PRDCAT',               -- Cascade delete to images and categories\n  TRUE,                           -- Active\n  'ecommerce'                     -- Tenant\n);\n"})}),"\n",(0,s.jsx)(n.h3,{id:"querying-tb_dim",children:"Querying TB_DIM"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-javascript",children:"// Get all registered dimensions for tenant\nconst dimensions = await coreAPI.get('/api/v4/core/DIM', {\n  params: {\n    filter: { SOURCE: 'ecommerce', ACTIVE: true }\n  }\n});\n\n// Get specific dimension configuration\nconst productDim = await coreAPI.get('/api/v4/core/DIM/PRD');\nconsole.log(productDim.data.CASCADE_DELETE); // \"PRDIMG,PRDCAT\"\n"})}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"tb_var---field-definitions",children:"TB_VAR - Field Definitions"}),"\n",(0,s.jsx)(n.h3,{id:"purpose-1",children:"Purpose"}),"\n",(0,s.jsxs)(n.p,{children:["Defines ",(0,s.jsx)(n.strong,{children:"individual fields (variables)"})," for each dimension. Each entry in TB_VAR represents a column in ",(0,s.jsx)(n.code,{children:"TB_ANAG_{COD_DIM}00"})," or a computed/virtual field."]}),"\n",(0,s.jsx)(n.h3,{id:"schema-1",children:"Schema"}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Field"}),(0,s.jsx)(n.th,{children:"Type"}),(0,s.jsx)(n.th,{children:"Description"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"COD_DIM"})}),(0,s.jsx)(n.td,{children:"VARCHAR(50) FK"}),(0,s.jsx)(n.td,{children:"Dimension code (references TB_DIM)"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"NUM_VAR"})}),(0,s.jsx)(n.td,{children:"INT"}),(0,s.jsx)(n.td,{children:"Field number (ordering)"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"COD_VAR"})}),(0,s.jsx)(n.td,{children:"VARCHAR(50) PK"}),(0,s.jsx)(n.td,{children:"Field code (e.g., 'XPRD01', 'XPRD02')"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"DESC_VAR"})}),(0,s.jsx)(n.td,{children:"VARCHAR(255)"}),(0,s.jsx)(n.td,{children:"Human-readable field name"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"DATA_TYPE"})}),(0,s.jsx)(n.td,{children:"VARCHAR(50)"}),(0,s.jsx)(n.td,{children:"Data type (VARCHAR, INT, DECIMAL, DATE, BOOLEAN, TEXT)"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"LENGTH"})}),(0,s.jsx)(n.td,{children:"INT"}),(0,s.jsx)(n.td,{children:"Maximum field length (for VARCHAR)"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"PRECISION"})}),(0,s.jsx)(n.td,{children:"INT"}),(0,s.jsx)(n.td,{children:"Decimal precision (for DECIMAL)"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"SCALE"})}),(0,s.jsx)(n.td,{children:"INT"}),(0,s.jsx)(n.td,{children:"Decimal scale (for DECIMAL)"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"DEFAULT_VALUE"})}),(0,s.jsx)(n.td,{children:"TEXT"}),(0,s.jsx)(n.td,{children:"Default value if not provided"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"NULLABLE"})}),(0,s.jsx)(n.td,{children:"BOOLEAN"}),(0,s.jsx)(n.td,{children:"Allow NULL values (true/false)"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"UNIQUE"})}),(0,s.jsx)(n.td,{children:"BOOLEAN"}),(0,s.jsx)(n.td,{children:"Enforce uniqueness (true/false)"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"INDEXED"})}),(0,s.jsx)(n.td,{children:"BOOLEAN"}),(0,s.jsx)(n.td,{children:"Create database index (true/false)"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"VIRTUAL"})}),(0,s.jsx)(n.td,{children:"BOOLEAN"}),(0,s.jsx)(n.td,{children:"Computed field not stored in database"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"FORMULA"})}),(0,s.jsx)(n.td,{children:"TEXT"}),(0,s.jsx)(n.td,{children:"SQL expression for virtual fields"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"VALIDATION_REGEX"})}),(0,s.jsx)(n.td,{children:"VARCHAR(500)"}),(0,s.jsx)(n.td,{children:"Regular expression for validation"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"SOURCE"})}),(0,s.jsx)(n.td,{children:"VARCHAR(50)"}),(0,s.jsx)(n.td,{children:"Tenant identifier"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"CREATED_AT"})}),(0,s.jsx)(n.td,{children:"VARCHAR(14)"}),(0,s.jsx)(n.td,{children:"Creation timestamp"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"UPDATED_AT"})}),(0,s.jsx)(n.td,{children:"VARCHAR(14)"}),(0,s.jsx)(n.td,{children:"Last update timestamp"})]})]})]}),"\n",(0,s.jsx)(n.h3,{id:"example-data-1",children:"Example Data"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sql",children:"-- Product name field\nINSERT INTO TB_VAR (\n  COD_DIM, NUM_VAR, COD_VAR, DESC_VAR,\n  DATA_TYPE, LENGTH, NULLABLE, INDEXED, SOURCE\n) VALUES\n(\n  'PRD',           -- Dimension\n  1,               -- Field order\n  'XPRD01',        -- Field code\n  'Product Name',  -- Description\n  'VARCHAR',       -- Data type\n  255,             -- Max length\n  FALSE,           -- Not nullable (required)\n  TRUE,            -- Indexed for search\n  'ecommerce'      -- Tenant\n);\n\n-- Product price field\nINSERT INTO TB_VAR (\n  COD_DIM, NUM_VAR, COD_VAR, DESC_VAR,\n  DATA_TYPE, PRECISION, SCALE, NULLABLE, SOURCE\n) VALUES\n(\n  'PRD',           -- Dimension\n  2,               -- Field order\n  'XPRD02',        -- Field code\n  'Price',         -- Description\n  'DECIMAL',       -- Data type\n  10,              -- Precision (10 total digits)\n  2,               -- Scale (2 decimal places)\n  FALSE,           -- Not nullable\n  'ecommerce'      -- Tenant\n);\n\n-- Product SKU (unique identifier)\nINSERT INTO TB_VAR (\n  COD_DIM, NUM_VAR, COD_VAR, DESC_VAR,\n  DATA_TYPE, LENGTH, NULLABLE, UNIQUE, INDEXED,\n  VALIDATION_REGEX, SOURCE\n) VALUES\n(\n  'PRD',\n  3,\n  'XPRD03',\n  'SKU',\n  'VARCHAR',\n  50,\n  FALSE,\n  TRUE,            -- Must be unique\n  TRUE,            -- Indexed for fast lookup\n  '^[A-Z]{3}-[0-9]{4}-[0-9]{3}$',  -- Format: ABC-2025-001\n  'ecommerce'\n);\n"})}),"\n",(0,s.jsx)(n.h3,{id:"querying-tb_var",children:"Querying TB_VAR"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-javascript",children:"// Get all fields for PRD dimension\nconst fields = await coreAPI.get('/api/v4/core/VAR', {\n  params: {\n    filter: { COD_DIM: 'PRD' },\n    sort: 'NUM_VAR'  // Order by field number\n  }\n});\n\n// Get specific field definition\nconst priceField = await coreAPI.get('/api/v4/core/VAR', {\n  params: {\n    filter: { COD_DIM: 'PRD', COD_VAR: 'XPRD02' }\n  }\n});\nconsole.log(priceField.data[0].DATA_TYPE);  // \"DECIMAL\"\nconsole.log(priceField.data[0].PRECISION);  // 10\nconsole.log(priceField.data[0].SCALE);      // 2\n"})}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"tb_cost---field-configuration",children:"TB_COST - Field Configuration"}),"\n",(0,s.jsx)(n.h3,{id:"purpose-2",children:"Purpose"}),"\n",(0,s.jsxs)(n.p,{children:["Configures ",(0,s.jsx)(n.strong,{children:"field behavior"})," including visibility (COD_ON_OFF), required validation, pre-insert functions, and cascade operations. This is where runtime field control happens."]}),"\n",(0,s.jsx)(n.h3,{id:"schema-2",children:"Schema"}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Field"}),(0,s.jsx)(n.th,{children:"Type"}),(0,s.jsx)(n.th,{children:"Description"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"COD_DIM"})}),(0,s.jsx)(n.td,{children:"VARCHAR(50) FK"}),(0,s.jsx)(n.td,{children:"Dimension code"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"NUM_COST"})}),(0,s.jsx)(n.td,{children:"INT PK"}),(0,s.jsx)(n.td,{children:"Configuration number (unique per field)"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"COD_VAR"})}),(0,s.jsx)(n.td,{children:"VARCHAR(50) FK"}),(0,s.jsx)(n.td,{children:"Field code (references TB_VAR)"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"COD_ON_OFF"})}),(0,s.jsx)(n.td,{children:"VARCHAR(10)"}),(0,s.jsx)(n.td,{children:"Visibility flags (L/D/N/M/R)"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"REQUIRED"})}),(0,s.jsx)(n.td,{children:"BOOLEAN"}),(0,s.jsx)(n.td,{children:"Field required (true/false)"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"VALUE_TEMP"})}),(0,s.jsx)(n.td,{children:"TEXT"}),(0,s.jsxs)(n.td,{children:["Pre-insert function (e.g., '",(0,s.jsx)(n.code,{children:"{uuid}"}),"', '",(0,s.jsx)(n.code,{children:"{counter}"}),"')"]})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"INSERT_CASCADE"})}),(0,s.jsx)(n.td,{children:"TEXT"}),(0,s.jsx)(n.td,{children:"Related dimension to cascade on insert"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"UPDATE_CASCADE"})}),(0,s.jsx)(n.td,{children:"TEXT"}),(0,s.jsx)(n.td,{children:"Related dimension to cascade on update"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"DELETE_CASCADE"})}),(0,s.jsx)(n.td,{children:"TEXT"}),(0,s.jsx)(n.td,{children:"Related dimension to cascade on delete"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"RENDER_HINT"})}),(0,s.jsx)(n.td,{children:"VARCHAR(100)"}),(0,s.jsx)(n.td,{children:"UI rendering hint (text, textarea, select, date, etc.)"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"GROUP_NAME"})}),(0,s.jsx)(n.td,{children:"VARCHAR(100)"}),(0,s.jsx)(n.td,{children:"Logical grouping for UI (e.g., 'Basic Info', 'Pricing')"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"ORDER_IN_GROUP"})}),(0,s.jsx)(n.td,{children:"INT"}),(0,s.jsx)(n.td,{children:"Display order within group"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"HELP_TEXT"})}),(0,s.jsx)(n.td,{children:"TEXT"}),(0,s.jsx)(n.td,{children:"Tooltip or help message for UI"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"PLACEHOLDER"})}),(0,s.jsx)(n.td,{children:"VARCHAR(255)"}),(0,s.jsx)(n.td,{children:"Placeholder text for input fields"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"MIN_VALUE"})}),(0,s.jsx)(n.td,{children:"VARCHAR(50)"}),(0,s.jsx)(n.td,{children:"Minimum value (for numbers/dates)"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"MAX_VALUE"})}),(0,s.jsx)(n.td,{children:"VARCHAR(50)"}),(0,s.jsx)(n.td,{children:"Maximum value (for numbers/dates)"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"SOURCE"})}),(0,s.jsx)(n.td,{children:"VARCHAR(50)"}),(0,s.jsx)(n.td,{children:"Tenant identifier"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"CREATED_AT"})}),(0,s.jsx)(n.td,{children:"VARCHAR(14)"}),(0,s.jsx)(n.td,{children:"Creation timestamp"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"UPDATED_AT"})}),(0,s.jsx)(n.td,{children:"VARCHAR(14)"}),(0,s.jsx)(n.td,{children:"Last update timestamp"})]})]})]}),"\n",(0,s.jsx)(n.h3,{id:"cod_on_off-flags",children:"COD_ON_OFF Flags"}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Flag"}),(0,s.jsx)(n.th,{children:"Meaning"}),(0,s.jsx)(n.th,{children:"Context"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"L"})}),(0,s.jsx)(n.td,{children:"List"}),(0,s.jsxs)(n.td,{children:["Visible in list views (GET ",(0,s.jsx)(n.code,{children:"/api/v4/core/{dim}"}),")"]})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"D"})}),(0,s.jsx)(n.td,{children:"Detail"}),(0,s.jsxs)(n.td,{children:["Visible in detail views (GET ",(0,s.jsx)(n.code,{children:"/api/v4/core/{dim}/{id}"}),")"]})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"N"})}),(0,s.jsx)(n.td,{children:"New"}),(0,s.jsx)(n.td,{children:"Can be set on creation (POST)"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"M"})}),(0,s.jsx)(n.td,{children:"Modify"}),(0,s.jsx)(n.td,{children:"Can be updated (PUT/PATCH)"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"R"})}),(0,s.jsx)(n.td,{children:"Search"}),(0,s.jsx)(n.td,{children:"Can be used in filters (?filter[field]=value)"})]})]})]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Examples:"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:'"LDRNM"'})," - Full visibility, can create and modify"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:'"LDR"'})," - Visible and searchable, but read-only (can't create/modify)"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:'"N"'})," - Can only be set on creation (immutable after)"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:'"M"'})," - Can only be modified, not set on creation"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:'""'})," - Hidden field (internal use only)"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"example-data-2",children:"Example Data"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sql",children:"-- Product name: full access\nINSERT INTO TB_COST (\n  COD_DIM, NUM_COST, COD_VAR, COD_ON_OFF,\n  REQUIRED, RENDER_HINT, GROUP_NAME, ORDER_IN_GROUP,\n  HELP_TEXT, SOURCE\n) VALUES\n(\n  'PRD',\n  1,\n  'XPRD01',\n  'LDRNM',           -- Visible everywhere, can create/modify\n  TRUE,              -- Required field\n  'text',            -- Text input\n  'Basic Info',      -- UI group\n  1,                 -- First field in group\n  'Enter product name (max 255 characters)',\n  'ecommerce'\n);\n\n-- Product SKU: auto-generated, immutable after creation\nINSERT INTO TB_COST (\n  COD_DIM, NUM_COST, COD_VAR, COD_ON_OFF,\n  REQUIRED, VALUE_TEMP, RENDER_HINT, SOURCE\n) VALUES\n(\n  'PRD',\n  3,\n  'XPRD03',\n  'LDR',             -- Visible and searchable, but read-only\n  FALSE,             -- Auto-generated, not required from user\n  '{counter:PRD-{YYYY}-{NNN}}',  -- Auto-generate: PRD-2025-001\n  'text',\n  'ecommerce'\n);\n\n-- Product price: required, can modify\nINSERT INTO TB_COST (\n  COD_DIM, NUM_COST, COD_VAR, COD_ON_OFF,\n  REQUIRED, RENDER_HINT, MIN_VALUE, MAX_VALUE,\n  GROUP_NAME, SOURCE\n) VALUES\n(\n  'PRD',\n  2,\n  'XPRD02',\n  'LDRNM',           -- Full access\n  TRUE,              -- Required\n  'number',          -- Numeric input\n  '0.01',            -- Min price\n  '999999.99',       -- Max price\n  'Pricing',         -- UI group\n  'ecommerce'\n);\n\n-- Product category: foreign key with cascade\nINSERT INTO TB_COST (\n  COD_DIM, NUM_COST, COD_VAR, COD_ON_OFF,\n  REQUIRED, RENDER_HINT, DELETE_CASCADE, SOURCE\n) VALUES\n(\n  'PRD',\n  5,\n  'XPRD05',\n  'LDRNM',\n  TRUE,\n  'select',          -- Dropdown select\n  'PRDCAT',          -- When product deleted, cascade to category link\n  'ecommerce'\n);\n"})}),"\n",(0,s.jsx)(n.h3,{id:"pre-insert-functions-value_temp",children:"Pre-Insert Functions (VALUE_TEMP)"}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Function"}),(0,s.jsx)(n.th,{children:"Example"}),(0,s.jsx)(n.th,{children:"Result"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"{uuid}"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"{uuid}"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"550e8400-e29b-41d4-a716-446655440000"})})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"{md5}"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"{md5}"})}),(0,s.jsx)(n.td,{children:"MD5 hash of concatenated field values"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"{counter}"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"{counter:PRD-{YYYY}-{NNN}}"})}),(0,s.jsxs)(n.td,{children:[(0,s.jsx)(n.code,{children:"PRD-2025-001"})," (uses TB_COUNTER)"]})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"{sequence}"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"{sequence:seq_product_id}"})}),(0,s.jsx)(n.td,{children:"Next value from database sequence"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"{slugify}"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"{slugify:XPRD01}"})}),(0,s.jsx)(n.td,{children:"URL-friendly slug from field"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"{timestamp}"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"{timestamp}"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"20251219153045"})})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"{concat}"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"{concat:XPRD01,-,XPRD03}"})}),(0,s.jsx)(n.td,{children:"Concatenate fields"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"{default}"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"{default:active}"})}),(0,s.jsx)(n.td,{children:"Default literal value"})]})]})]}),"\n",(0,s.jsx)(n.h3,{id:"querying-tb_cost",children:"Querying TB_COST"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-javascript",children:"// Get all field configurations for PRD dimension\nconst configs = await coreAPI.get('/api/v4/core/COST', {\n  params: {\n    filter: { COD_DIM: 'PRD' },\n    sort: 'NUM_COST'\n  }\n});\n\n// Get visible fields for list view (COD_ON_OFF contains 'L')\nconst listFields = configs.data.filter(c =>\n  c.COD_ON_OFF.includes('L')\n);\n\n// Get required fields\nconst requiredFields = configs.data.filter(c =>\n  c.REQUIRED === true\n);\n\n// Get fields that can be set on creation (COD_ON_OFF contains 'N')\nconst createFields = configs.data.filter(c =>\n  c.COD_ON_OFF.includes('N')\n);\n"})}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"tb_menu---permission-hierarchy",children:"TB_MENU - Permission Hierarchy"}),"\n",(0,s.jsx)(n.h3,{id:"purpose-3",children:"Purpose"}),"\n",(0,s.jsxs)(n.p,{children:["Defines ",(0,s.jsx)(n.strong,{children:"hierarchical permissions"})," using the ",(0,s.jsx)(n.strong,{children:"nested set model"}),". Grants are organized in a tree structure with parent-child inheritance."]}),"\n",(0,s.jsx)(n.h3,{id:"schema-3",children:"Schema"}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Field"}),(0,s.jsx)(n.th,{children:"Type"}),(0,s.jsx)(n.th,{children:"Description"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"MENU_ID"})}),(0,s.jsx)(n.td,{children:"VARCHAR(50) PK"}),(0,s.jsx)(n.td,{children:"Menu/grant identifier"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"PARENT_ID"})}),(0,s.jsx)(n.td,{children:"VARCHAR(50) FK"}),(0,s.jsx)(n.td,{children:"Parent menu ID (NULL for root)"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"NLEFT"})}),(0,s.jsx)(n.td,{children:"INT"}),(0,s.jsx)(n.td,{children:"Left boundary (nested set)"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"NRIGHT"})}),(0,s.jsx)(n.td,{children:"INT"}),(0,s.jsx)(n.td,{children:"Right boundary (nested set)"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"LEVEL"})}),(0,s.jsx)(n.td,{children:"INT"}),(0,s.jsx)(n.td,{children:"Tree depth (0 = root)"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"LABEL"})}),(0,s.jsx)(n.td,{children:"VARCHAR(255)"}),(0,s.jsx)(n.td,{children:"Human-readable label"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"DESCRIPTION"})}),(0,s.jsx)(n.td,{children:"TEXT"}),(0,s.jsx)(n.td,{children:"Grant description"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"GRANT_TYPE"})}),(0,s.jsx)(n.td,{children:"VARCHAR(50)"}),(0,s.jsx)(n.td,{children:"Type (read, write, delete, admin)"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"RESOURCE"})}),(0,s.jsx)(n.td,{children:"VARCHAR(100)"}),(0,s.jsx)(n.td,{children:"Protected resource (dimension code or '*')"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"ACTIVE"})}),(0,s.jsx)(n.td,{children:"BOOLEAN"}),(0,s.jsx)(n.td,{children:"Grant enabled (true/false)"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"SOURCE"})}),(0,s.jsx)(n.td,{children:"VARCHAR(50)"}),(0,s.jsx)(n.td,{children:"Tenant identifier"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"CREATED_AT"})}),(0,s.jsx)(n.td,{children:"VARCHAR(14)"}),(0,s.jsx)(n.td,{children:"Creation timestamp"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"UPDATED_AT"})}),(0,s.jsx)(n.td,{children:"VARCHAR(14)"}),(0,s.jsx)(n.td,{children:"Last update timestamp"})]})]})]}),"\n",(0,s.jsx)(n.h3,{id:"nested-set-model",children:"Nested Set Model"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Structure:"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"products (NLEFT=1, NRIGHT=10)\n\u251c\u2500\u2500 products.read (NLEFT=2, NRIGHT=3)\n\u251c\u2500\u2500 products.write (NLEFT=4, NRIGHT=5)\n\u2502   \u251c\u2500\u2500 products.create (NLEFT=6, NRIGHT=7)\n\u2502   \u2514\u2500\u2500 products.update (NLEFT=8, NRIGHT=9)\n\u2514\u2500\u2500 products.delete (NLEFT=10, NRIGHT=11)\n"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Parent-Child Query:"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sql",children:"-- Find all children of 'products'\nSELECT child.*\nFROM TB_MENU parent\nINNER JOIN TB_MENU child\n  ON child.NLEFT BETWEEN parent.NLEFT AND parent.NRIGHT\nWHERE parent.MENU_ID = 'products';\n"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Grant Inheritance:"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["User with ",(0,s.jsx)(n.code,{children:"products"})," grant has all child grants (",(0,s.jsx)(n.code,{children:"products.read"}),", ",(0,s.jsx)(n.code,{children:"products.write"}),", ",(0,s.jsx)(n.code,{children:"products.delete"}),")"]}),"\n",(0,s.jsxs)(n.li,{children:["User with ",(0,s.jsx)(n.code,{children:"products.write"})," grant has ",(0,s.jsx)(n.code,{children:"products.create"})," and ",(0,s.jsx)(n.code,{children:"products.update"})]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"example-data-3",children:"Example Data"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sql",children:"-- Root level - products module\nINSERT INTO TB_MENU (\n  MENU_ID, PARENT_ID, NLEFT, NRIGHT, LEVEL,\n  LABEL, GRANT_TYPE, RESOURCE, ACTIVE, SOURCE\n) VALUES\n(\n  'products',\n  NULL,\n  1,\n  10,\n  0,\n  'Product Management',\n  'module',\n  'PRD',\n  TRUE,\n  'ecommerce'\n);\n\n-- Read permission\nINSERT INTO TB_MENU (\n  MENU_ID, PARENT_ID, NLEFT, NRIGHT, LEVEL,\n  LABEL, GRANT_TYPE, RESOURCE, ACTIVE, SOURCE\n) VALUES\n(\n  'products.read',\n  'products',\n  2,\n  3,\n  1,\n  'View Products',\n  'read',\n  'PRD',\n  TRUE,\n  'ecommerce'\n);\n\n-- Write permission (with children)\nINSERT INTO TB_MENU (\n  MENU_ID, PARENT_ID, NLEFT, NRIGHT, LEVEL,\n  LABEL, GRANT_TYPE, RESOURCE, ACTIVE, SOURCE\n) VALUES\n(\n  'products.write',\n  'products',\n  4,\n  7,\n  1,\n  'Edit Products',\n  'write',\n  'PRD',\n  TRUE,\n  'ecommerce'\n);\n\n-- Create sub-permission\nINSERT INTO TB_MENU (\n  MENU_ID, PARENT_ID, NLEFT, NRIGHT, LEVEL,\n  LABEL, GRANT_TYPE, RESOURCE, ACTIVE, SOURCE\n) VALUES\n(\n  'products.create',\n  'products.write',\n  5,\n  6,\n  2,\n  'Create Products',\n  'write',\n  'PRD',\n  TRUE,\n  'ecommerce'\n);\n\n-- Delete permission\nINSERT INTO TB_MENU (\n  MENU_ID, PARENT_ID, NLEFT, NRIGHT, LEVEL,\n  LABEL, GRANT_TYPE, RESOURCE, ACTIVE, SOURCE\n) VALUES\n(\n  'products.delete',\n  'products',\n  8,\n  9,\n  1,\n  'Delete Products',\n  'delete',\n  'PRD',\n  TRUE,\n  'ecommerce'\n);\n"})}),"\n",(0,s.jsx)(n.h3,{id:"querying-tb_menu",children:"Querying TB_MENU"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-javascript",children:"// Check if user has grant (includes parent grants via nested set)\nasync function hasGrant(userGrants, requiredGrant) {\n  const response = await coreAPI.get('/api/v4/core/MENU', {\n    params: {\n      filter: {\n        MENU_ID: { $in: userGrants.join(',') }\n      }\n    }\n  });\n\n  const userMenus = response.data;\n  const requiredMenu = await coreAPI.get('/api/v4/core/MENU', {\n    params: { filter: { MENU_ID: requiredGrant } }\n  });\n\n  const requiredNLeft = requiredMenu.data[0].NLEFT;\n  const requiredNRight = requiredMenu.data[0].NRIGHT;\n\n  // Check if any user grant encompasses the required grant\n  return userMenus.some(menu =>\n    requiredNLeft >= menu.NLEFT && requiredNRight <= menu.NRIGHT\n  );\n}\n\n// Usage\nconst hasPermission = await hasGrant(\n  ['products.write'],       // User grants\n  'products.create'         // Required grant\n);\nconsole.log(hasPermission); // true (write includes create)\n"})}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"tb_object---dimension-relationships",children:"TB_OBJECT - Dimension Relationships"}),"\n",(0,s.jsx)(n.h3,{id:"purpose-4",children:"Purpose"}),"\n",(0,s.jsxs)(n.p,{children:["Defines ",(0,s.jsx)(n.strong,{children:"relationships between dimensions"})," (foreign keys, joins). Used for ",(0,s.jsx)(n.code,{children:"$expand"})," parameter and cascade operations."]}),"\n",(0,s.jsx)(n.h3,{id:"schema-4",children:"Schema"}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Field"}),(0,s.jsx)(n.th,{children:"Type"}),(0,s.jsx)(n.th,{children:"Description"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"COD_DIM"})}),(0,s.jsx)(n.td,{children:"VARCHAR(50) FK"}),(0,s.jsx)(n.td,{children:"Source dimension"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"NUM_OBJECT"})}),(0,s.jsx)(n.td,{children:"INT PK"}),(0,s.jsx)(n.td,{children:"Object number"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"COD_OBJECT"})}),(0,s.jsx)(n.td,{children:"VARCHAR(50)"}),(0,s.jsx)(n.td,{children:"Relationship name (e.g., 'category', 'customer')"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"TARGET_DIM"})}),(0,s.jsx)(n.td,{children:"VARCHAR(50) FK"}),(0,s.jsx)(n.td,{children:"Target dimension code"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"SOURCE_FIELD"})}),(0,s.jsx)(n.td,{children:"VARCHAR(50)"}),(0,s.jsx)(n.td,{children:"Foreign key field in source table"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"TARGET_FIELD"})}),(0,s.jsx)(n.td,{children:"VARCHAR(50)"}),(0,s.jsx)(n.td,{children:"Referenced field in target table (usually ID)"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"RELATIONSHIP_TYPE"})}),(0,s.jsx)(n.td,{children:"VARCHAR(20)"}),(0,s.jsx)(n.td,{children:"one-to-one, one-to-many, many-to-one, many-to-many"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"CASCADE_DELETE"})}),(0,s.jsx)(n.td,{children:"BOOLEAN"}),(0,s.jsx)(n.td,{children:"Delete related records when parent deleted"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"CASCADE_UPDATE"})}),(0,s.jsx)(n.td,{children:"BOOLEAN"}),(0,s.jsx)(n.td,{children:"Update related records when parent updated"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"NULLABLE"})}),(0,s.jsx)(n.td,{children:"BOOLEAN"}),(0,s.jsx)(n.td,{children:"Allow NULL foreign key"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"DESCRIPTION"})}),(0,s.jsx)(n.td,{children:"TEXT"}),(0,s.jsx)(n.td,{children:"Relationship description"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"SOURCE"})}),(0,s.jsx)(n.td,{children:"VARCHAR(50)"}),(0,s.jsx)(n.td,{children:"Tenant identifier"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"CREATED_AT"})}),(0,s.jsx)(n.td,{children:"VARCHAR(14)"}),(0,s.jsx)(n.td,{children:"Creation timestamp"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"UPDATED_AT"})}),(0,s.jsx)(n.td,{children:"VARCHAR(14)"}),(0,s.jsx)(n.td,{children:"Last update timestamp"})]})]})]}),"\n",(0,s.jsx)(n.h3,{id:"example-data-4",children:"Example Data"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sql",children:"-- Product \u2192 Category (many-to-one)\nINSERT INTO TB_OBJECT (\n  COD_DIM, NUM_OBJECT, COD_OBJECT, TARGET_DIM,\n  SOURCE_FIELD, TARGET_FIELD, RELATIONSHIP_TYPE,\n  NULLABLE, CASCADE_DELETE, SOURCE\n) VALUES\n(\n  'PRD',           -- Source dimension\n  1,               -- Object number\n  'category',      -- Relationship name\n  'CAT',           -- Target dimension\n  'XPRD05',        -- FK field in PRD table\n  'CAT_ID',        -- PK field in CAT table\n  'many-to-one',   -- Many products \u2192 one category\n  FALSE,           -- Category required\n  FALSE,           -- Don't delete product if category deleted\n  'ecommerce'\n);\n\n-- Order \u2192 Customer (many-to-one)\nINSERT INTO TB_OBJECT (\n  COD_DIM, NUM_OBJECT, COD_OBJECT, TARGET_DIM,\n  SOURCE_FIELD, TARGET_FIELD, RELATIONSHIP_TYPE,\n  NULLABLE, SOURCE\n) VALUES\n(\n  'ORD',\n  1,\n  'customer',\n  'CUST',\n  'XORD_CUSTOMER_ID',\n  'CUST_ID',\n  'many-to-one',\n  FALSE,\n  'ecommerce'\n);\n\n-- Order \u2192 Order Items (one-to-many)\nINSERT INTO TB_OBJECT (\n  COD_DIM, NUM_OBJECT, COD_OBJECT, TARGET_DIM,\n  SOURCE_FIELD, TARGET_FIELD, RELATIONSHIP_TYPE,\n  CASCADE_DELETE, SOURCE\n) VALUES\n(\n  'ORD',\n  2,\n  'items',\n  'ORDITEM',\n  'ORD_ID',\n  'XORDITEM_ORDER_ID',\n  'one-to-many',\n  TRUE,            -- Delete items when order deleted\n  'ecommerce'\n);\n"})}),"\n",(0,s.jsx)(n.h3,{id:"querying-tb_object",children:"Querying TB_OBJECT"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-javascript",children:"// Get all relationships for PRD dimension\nconst relationships = await coreAPI.get('/api/v4/core/OBJECT', {\n  params: {\n    filter: { COD_DIM: 'PRD' }\n  }\n});\n\n// Use $expand to include related data\nconst productsWithCategory = await coreAPI.get('/api/v4/core/PRD', {\n  params: {\n    $expand: 'category',  // Uses COD_OBJECT from TB_OBJECT\n    $num_rows: 10\n  }\n});\n\nconsole.log(productsWithCategory.data[0].category);\n// { CAT_ID: 'cat_123', XCAT01: 'Electronics', ... }\n"})}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"summary",children:"Summary"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\u2705 ",(0,s.jsx)(n.strong,{children:"TB_DIM"})," registers all dimensions (entity types) with cascade rules"]}),"\n",(0,s.jsxs)(n.li,{children:["\u2705 ",(0,s.jsx)(n.strong,{children:"TB_VAR"})," defines individual fields with data types and validation"]}),"\n",(0,s.jsxs)(n.li,{children:["\u2705 ",(0,s.jsx)(n.strong,{children:"TB_COST"})," configures field visibility (COD_ON_OFF), required validation, and pre-insert functions"]}),"\n",(0,s.jsxs)(n.li,{children:["\u2705 ",(0,s.jsx)(n.strong,{children:"TB_MENU"})," manages hierarchical permissions using nested set model"]}),"\n",(0,s.jsxs)(n.li,{children:["\u2705 ",(0,s.jsx)(n.strong,{children:"TB_OBJECT"})," defines dimension relationships for joins and cascades"]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Key Takeaways:"})}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsx)(n.li,{children:"MAP framework enables metadata-driven schema management"}),"\n",(0,s.jsx)(n.li,{children:"COD_ON_OFF in TB_COST controls field visibility per operation (L/D/N/M/R)"}),"\n",(0,s.jsx)(n.li,{children:"TB_MENU nested set allows hierarchical permission inheritance"}),"\n",(0,s.jsx)(n.li,{children:"TB_OBJECT enables $expand for relational queries"}),"\n",(0,s.jsx)(n.li,{children:"All metadata tables respect multi-tenant SOURCE isolation"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Common Queries:"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Get dimension config: ",(0,s.jsx)(n.code,{children:"GET /api/v4/core/DIM/{cod_dim}"})]}),"\n",(0,s.jsxs)(n.li,{children:["Get field definitions: ",(0,s.jsx)(n.code,{children:"GET /api/v4/core/VAR?filter[COD_DIM]={dim}"})]}),"\n",(0,s.jsxs)(n.li,{children:["Get field configs: ",(0,s.jsx)(n.code,{children:"GET /api/v4/core/COST?filter[COD_DIM]={dim}"})]}),"\n",(0,s.jsxs)(n.li,{children:["Get grants: ",(0,s.jsx)(n.code,{children:"GET /api/v4/core/MENU"})]}),"\n",(0,s.jsxs)(n.li,{children:["Get relationships: ",(0,s.jsx)(n.code,{children:"GET /api/v4/core/OBJECT?filter[COD_DIM]={dim}"})]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"related-concepts",children:"Related Concepts"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.a,{href:"/docs/products/map.q01.io/core-api-platform-v4/core-concepts/dimensions",children:"Dimensions"})," - Dimension concept explained"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.a,{href:"/docs/products/map.q01.io/core-api-platform-v4/core-concepts/field-visibility",children:"Field Visibility"})," - COD_ON_OFF usage"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.a,{href:"/docs/products/map.q01.io/core-api-platform-v4/core-concepts/nested-set-model",children:"Nested Set Model"})," - TB_MENU structure"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.a,{href:"/docs/products/map.q01.io/core-api-platform-v4/reference/cod-on-off-flags",children:"COD_ON_OFF Flags"})," - Flag reference"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.a,{href:"/docs/products/map.q01.io/core-api-platform-v4/reference/api-endpoints",children:"API Endpoints"})," - How to query metadata tables"]}),"\n"]})]})}function o(e={}){const{wrapper:n}={...(0,i.M)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(h,{...e})}):h(e)}},2172:(e,n,r)=>{r.d(n,{I:()=>l,M:()=>t});var s=r(1504);const i={},d=s.createContext(i);function t(e){const n=s.useContext(d);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:t(e.components),s.createElement(d.Provider,{value:n},e.children)}}}]);