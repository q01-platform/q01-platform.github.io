"use strict";(self.webpackChunkq_01_docs=self.webpackChunkq_01_docs||[]).push([[3144],{6436:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>o,contentTitle:()=>r,default:()=>h,frontMatter:()=>a,metadata:()=>c,toc:()=>l});var i=t(7624),s=t(2172);const a={title:"Migration Guide",sidebar_label:"Migration Guide",sidebar_position:7,description:"Migrating from legacy systems to Q01 Core APIs"},r="Migration Guide",c={id:"products/map.q01.io/core-api-platform-v4/best-practices/migration-guide",title:"Migration Guide",description:"Migrating from legacy systems to Q01 Core APIs",source:"@site/docs/products/map.q01.io/core-api-platform-v4/07-best-practices/migration-guide.md",sourceDirName:"products/map.q01.io/core-api-platform-v4/07-best-practices",slug:"/products/map.q01.io/core-api-platform-v4/best-practices/migration-guide",permalink:"/docs/products/map.q01.io/core-api-platform-v4/best-practices/migration-guide",draft:!1,unlisted:!1,tags:[],version:"current",sidebarPosition:7,frontMatter:{title:"Migration Guide",sidebar_label:"Migration Guide",sidebar_position:7,description:"Migrating from legacy systems to Q01 Core APIs"},sidebar:"mapSidebar",previous:{title:"Testing Strategies",permalink:"/docs/products/map.q01.io/core-api-platform-v4/best-practices/testing-strategies"},next:{title:"Troubleshooting",permalink:"/docs/products/map.q01.io/core-api-platform-v4/best-practices/troubleshooting"}},o={},l=[{value:"Overview",id:"overview",level:2},{value:"Phase 1: Assessment &amp; Planning",id:"phase-1-assessment--planning",level:2},{value:"Inventory Legacy System",id:"inventory-legacy-system",level:3},{value:"Map to Core API Dimensions",id:"map-to-core-api-dimensions",level:3},{value:"Create Migration Plan",id:"create-migration-plan",level:3},{value:"Phase 2: Preparation &amp; Setup",id:"phase-2-preparation--setup",level:2},{value:"Setup Core API Access",id:"setup-core-api-access",level:3},{value:"Configure Metadata",id:"configure-metadata",level:3},{value:"Setup Migration Tools",id:"setup-migration-tools",level:3},{value:"Phase 3: Data Migration",id:"phase-3-data-migration",level:2},{value:"Strategy 1: One-Time Bulk Migration",id:"strategy-1-one-time-bulk-migration",level:3},{value:"Strategy 2: Dual-Write Pattern",id:"strategy-2-dual-write-pattern",level:3},{value:"Strategy 3: Incremental Migration",id:"strategy-3-incremental-migration",level:3},{value:"Phase 4: Data Validation",id:"phase-4-data-validation",level:2},{value:"Reconciliation Script",id:"reconciliation-script",level:3},{value:"Phase 5: Application Migration",id:"phase-5-application-migration",level:2},{value:"Backend Migration",id:"backend-migration",level:3},{value:"Frontend Migration",id:"frontend-migration",level:3},{value:"Phase 6: Cutover &amp; Rollback",id:"phase-6-cutover--rollback",level:2},{value:"Blue-Green Deployment",id:"blue-green-deployment",level:3},{value:"Monitoring During Cutover",id:"monitoring-during-cutover",level:3},{value:"Migration Checklist",id:"migration-checklist",level:2},{value:"Pre-Migration",id:"pre-migration",level:3},{value:"During Migration",id:"during-migration",level:3},{value:"Post-Migration",id:"post-migration",level:3},{value:"Summary",id:"summary",level:2},{value:"Related Concepts",id:"related-concepts",level:2}];function d(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",input:"input",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,s.M)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.h1,{id:"migration-guide",children:"Migration Guide"}),"\n",(0,i.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Step-by-step guide"})," for migrating from legacy systems to Q01 Core APIs. This guide covers assessment, planning, execution strategies, validation, and rollback procedures."]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Migration Phases:"})}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:"Assessment & Planning"}),"\n",(0,i.jsx)(n.li,{children:"Preparation & Setup"}),"\n",(0,i.jsx)(n.li,{children:"Data Migration"}),"\n",(0,i.jsx)(n.li,{children:"Application Migration"}),"\n",(0,i.jsx)(n.li,{children:"Validation & Testing"}),"\n",(0,i.jsx)(n.li,{children:"Cutover & Rollback"}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"phase-1-assessment--planning",children:"Phase 1: Assessment & Planning"}),"\n",(0,i.jsx)(n.h3,{id:"inventory-legacy-system",children:"Inventory Legacy System"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Identify:"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Data structures and relationships"}),"\n",(0,i.jsx)(n.li,{children:"Business logic and rules"}),"\n",(0,i.jsx)(n.li,{children:"Integration points"}),"\n",(0,i.jsx)(n.li,{children:"User workflows"}),"\n",(0,i.jsx)(n.li,{children:"Performance requirements"}),"\n",(0,i.jsx)(n.li,{children:"Security requirements"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Document:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-markdown",children:"# Legacy System Inventory\n\n## Data Structures\n- Products table: 50,000 records\n- Categories table: 100 records\n- Orders table: 500,000 records\n- Customers table: 25,000 records\n\n## Relationships\n- Product \u2192 Category (many-to-one)\n- Order \u2192 Customer (many-to-one)\n- Order \u2192 OrderLine \u2192 Product (one-to-many)\n\n## Business Logic\n- Price calculations (discounts, taxes)\n- Inventory management\n- Order workflow (pending \u2192 confirmed \u2192 shipped)\n\n## Integration Points\n- Payment gateway (Stripe)\n- Shipping provider (UPS API)\n- Email service (SendGrid)\n- Analytics (Google Analytics)\n\n## Performance\n- Current: 100 req/sec peak\n- Target: 200 req/sec peak\n- Response time: < 200ms p95\n\n## Security\n- User authentication (custom)\n- Role-based permissions\n- SSL/TLS encryption\n"})}),"\n",(0,i.jsx)(n.h3,{id:"map-to-core-api-dimensions",children:"Map to Core API Dimensions"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Mapping table:"})}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Legacy Table"}),(0,i.jsx)(n.th,{children:"Core Dimension"}),(0,i.jsx)(n.th,{children:"Notes"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"products"}),(0,i.jsx)(n.td,{children:"PRD"}),(0,i.jsx)(n.td,{children:"Map product fields to XPRD* variables"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"categories"}),(0,i.jsx)(n.td,{children:"CAT"}),(0,i.jsx)(n.td,{children:"Map category fields to XCAT* variables"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"orders"}),(0,i.jsx)(n.td,{children:"ORD"}),(0,i.jsx)(n.td,{children:"Map order fields to XORD* variables"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"order_lines"}),(0,i.jsx)(n.td,{children:"ORDLN"}),(0,i.jsx)(n.td,{children:"Map order line fields to XORDLN* variables"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"customers"}),(0,i.jsx)(n.td,{children:"CUST"}),(0,i.jsx)(n.td,{children:"Map customer fields to XCUST* variables"})]})]})]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Field mapping:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-javascript",children:"// Legacy \u2192 Core API field mapping\nconst fieldMapping = {\n  products: {\n    id: 'PRD_ID',\n    name: 'XPRD01',\n    price: 'XPRD02',\n    sku: 'XPRD03',\n    slug: 'XPRD04',\n    category_id: 'XPRD05',\n    active: 'XPRD06'  // 1/0 \u2192 Y/N\n  },\n  categories: {\n    id: 'CAT_ID',\n    name: 'XCAT01',\n    description: 'XCAT02'\n  },\n  orders: {\n    id: 'ORD_ID',\n    customer_id: 'XORD_CUSTOMER_ID',\n    order_date: 'XORD_DATE',\n    status: 'XORD_STATUS',\n    total: 'XORD_TOTAL'\n  }\n};\n"})}),"\n",(0,i.jsx)(n.h3,{id:"create-migration-plan",children:"Create Migration Plan"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Timeline:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"Week 1-2:  Assessment & Planning\nWeek 3-4:  Setup & Preparation\nWeek 5-6:  Data Migration (Phase 1 - Reference Data)\nWeek 7-8:  Data Migration (Phase 2 - Transactional Data)\nWeek 9-10: Application Migration (Backend)\nWeek 11-12: Application Migration (Frontend)\nWeek 13:   Testing & Validation\nWeek 14:   Cutover & Monitoring\n"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Risk Assessment:"})}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Risk"}),(0,i.jsx)(n.th,{children:"Impact"}),(0,i.jsx)(n.th,{children:"Probability"}),(0,i.jsx)(n.th,{children:"Mitigation"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Data loss"}),(0,i.jsx)(n.td,{children:"High"}),(0,i.jsx)(n.td,{children:"Low"}),(0,i.jsx)(n.td,{children:"Dual-write, validation"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Downtime"}),(0,i.jsx)(n.td,{children:"High"}),(0,i.jsx)(n.td,{children:"Medium"}),(0,i.jsx)(n.td,{children:"Blue-green deployment"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Performance degradation"}),(0,i.jsx)(n.td,{children:"Medium"}),(0,i.jsx)(n.td,{children:"Medium"}),(0,i.jsx)(n.td,{children:"Load testing, monitoring"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Data inconsistency"}),(0,i.jsx)(n.td,{children:"High"}),(0,i.jsx)(n.td,{children:"Medium"}),(0,i.jsx)(n.td,{children:"Reconciliation jobs"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Rollback needed"}),(0,i.jsx)(n.td,{children:"High"}),(0,i.jsx)(n.td,{children:"Low"}),(0,i.jsx)(n.td,{children:"Keep legacy system running"})]})]})]}),"\n",(0,i.jsx)(n.h2,{id:"phase-2-preparation--setup",children:"Phase 2: Preparation & Setup"}),"\n",(0,i.jsx)(n.h3,{id:"setup-core-api-access",children:"Setup Core API Access"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:'# 1. Get API credentials\nexport CORE_API_URL="https://api.q01.io"\nexport CORE_API_TOKEN="your-token-here"\n\n# 2. Configure context\nexport SOURCE="tenant_123"\nexport PESO="3"\nexport AMBIENTE="P"\nexport CENTRO_DETT="HQ"\n\n# 3. Test connectivity\ncurl -H "Authorization: Bearer $CORE_API_TOKEN" \\\n     -H "X-Source: $SOURCE" \\\n     -H "X-Peso: $PESO" \\\n     $CORE_API_URL/api/v4/core/products?limit=1\n'})}),"\n",(0,i.jsx)(n.h3,{id:"configure-metadata",children:"Configure Metadata"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Create dimensions in TB_DIM:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-sql",children:"-- Already exists in Q01, verify:\nSELECT DIM_ID, DIM_CODE, DIM_NAME\nFROM TB_DIM\nWHERE DIM_CODE IN ('PRD', 'CAT', 'ORD', 'ORDLN', 'CUST');\n"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Configure variables in TB_VAR:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-sql",children:"-- Verify field configurations\nSELECT VAR_ID, DIM_ID, VAR, VAR_TYPE, COD_ON_OFF, REQUIRED\nFROM TB_VAR\nWHERE DIM_ID IN (SELECT DIM_ID FROM TB_DIM WHERE DIM_CODE = 'PRD')\nORDER BY VAR;\n"})}),"\n",(0,i.jsx)(n.h3,{id:"setup-migration-tools",children:"Setup Migration Tools"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-javascript",children:"// migration-tool.js\nconst {Pool} = require('pg');\nconst axios = require('axios');\n\nclass MigrationTool {\n  constructor(legacyDB, coreAPI) {\n    this.legacyDB = legacyDB;\n    this.coreAPI = coreAPI;\n    this.stats = {\n      total: 0,\n      migrated: 0,\n      failed: 0,\n      errors: []\n    };\n  }\n\n  async migrate(tableName, dimension, transformer, batchSize = 100) {\n    console.log(`Migrating ${tableName} \u2192 ${dimension}...`);\n\n    // Get total count\n    const {rows: [{count}]} = await this.legacyDB.query(\n      `SELECT COUNT(*) as count FROM ${tableName}`\n    );\n    this.stats.total = parseInt(count);\n\n    // Process in batches\n    let offset = 0;\n    while (offset < this.stats.total) {\n      const batch = await this.fetchBatch(tableName, offset, batchSize);\n      const transformed = batch.map(transformer);\n\n      try {\n        await this.coreAPI.post(`/api/v4/core/${dimension}/batch`, {\n          records: transformed\n        });\n\n        this.stats.migrated += batch.length;\n        console.log(`Progress: ${this.stats.migrated}/${this.stats.total}`);\n      } catch (error) {\n        this.stats.failed += batch.length;\n        this.stats.errors.push({\n          offset,\n          count: batch.length,\n          error: error.message\n        });\n      }\n\n      offset += batchSize;\n    }\n\n    return this.stats;\n  }\n\n  async fetchBatch(tableName, offset, limit) {\n    const {rows} = await this.legacyDB.query(\n      `SELECT * FROM ${tableName} ORDER BY id LIMIT $1 OFFSET $2`,\n      [limit, offset]\n    );\n    return rows;\n  }\n}\n\nmodule.exports = MigrationTool;\n"})}),"\n",(0,i.jsx)(n.h2,{id:"phase-3-data-migration",children:"Phase 3: Data Migration"}),"\n",(0,i.jsx)(n.h3,{id:"strategy-1-one-time-bulk-migration",children:"Strategy 1: One-Time Bulk Migration"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Best for:"})," Reference data, historical data"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-javascript",children:"// migrate-products.js\nconst MigrationTool = require('./migration-tool');\n\nasync function migrateProducts() {\n  const tool = new MigrationTool(legacyDB, coreAPI);\n\n  const stats = await tool.migrate('products', 'products', (legacy) => ({\n    XPRD01: legacy.name,\n    XPRD02: legacy.price,\n    XPRD03: legacy.sku,\n    XPRD04: slugify(legacy.name),\n    XPRD05: legacy.category_id,\n    XPRD06: legacy.active ? 'Y' : 'N',\n    TREC: 'N'\n  }), 100);\n\n  console.log('Migration complete:', stats);\n}\n\nmigrateProducts().catch(console.error);\n"})}),"\n",(0,i.jsx)(n.h3,{id:"strategy-2-dual-write-pattern",children:"Strategy 2: Dual-Write Pattern"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Best for:"})," Active transactional data"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-javascript",children:"// dual-write-service.js\nclass DualWriteService {\n  constructor(legacyDB, coreAPI) {\n    this.legacyDB = legacyDB;\n    this.coreAPI = coreAPI;\n  }\n\n  async createProduct(data) {\n    let legacyId, coreId;\n\n    try {\n      // 1. Write to legacy system\n      const legacyResult = await this.legacyDB.query(\n        `INSERT INTO products (name, price, sku, category_id, active)\n         VALUES ($1, $2, $3, $4, $5) RETURNING id`,\n        [data.name, data.price, data.sku, data.category_id, data.active]\n      );\n      legacyId = legacyResult.rows[0].id;\n\n      // 2. Write to Core API\n      const coreResult = await this.coreAPI.post('/api/v4/core/products', {\n        XPRD01: data.name,\n        XPRD02: data.price,\n        XPRD03: data.sku,\n        XPRD05: data.category_id,\n        XPRD06: data.active ? 'Y' : 'N',\n        XPRD_LEGACY_ID: legacyId  // Store legacy ID for reconciliation\n      });\n      coreId = coreResult.PRD_ID;\n\n      // 3. Update legacy with Core ID\n      await this.legacyDB.query(\n        `UPDATE products SET core_id = $1 WHERE id = $2`,\n        [coreId, legacyId]\n      );\n\n      return {legacyId, coreId};\n    } catch (error) {\n      // Rollback on failure\n      if (legacyId && !coreId) {\n        await this.legacyDB.query(`DELETE FROM products WHERE id = $1`, [legacyId]);\n      }\n      throw error;\n    }\n  }\n\n  async updateProduct(id, data) {\n    // Update both systems\n    await Promise.all([\n      this.legacyDB.query(\n        `UPDATE products SET name = $1, price = $2 WHERE id = $3`,\n        [data.name, data.price, id]\n      ),\n      this.coreAPI.patch(`/api/v4/core/products/${id}`, {\n        XPRD01: data.name,\n        XPRD02: data.price\n      })\n    ]);\n  }\n\n  async deleteProduct(id) {\n    // Delete from both systems\n    await Promise.all([\n      this.legacyDB.query(`DELETE FROM products WHERE id = $1`, [id]),\n      this.coreAPI.delete(`/api/v4/core/products/${id}`)\n    ]);\n  }\n}\n"})}),"\n",(0,i.jsx)(n.h3,{id:"strategy-3-incremental-migration",children:"Strategy 3: Incremental Migration"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Best for:"})," Large datasets, gradual transition"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-javascript",children:"// incremental-migration.js\nclass IncrementalMigration {\n  async migrateByDateRange(startDate, endDate) {\n    console.log(`Migrating records from ${startDate} to ${endDate}...`);\n\n    const records = await legacyDB.query(\n      `SELECT * FROM products\n       WHERE created_at BETWEEN $1 AND $2\n       ORDER BY created_at`,\n      [startDate, endDate]\n    );\n\n    for (const record of records.rows) {\n      try {\n        await coreAPI.post('/api/v4/core/products', transform(record));\n      } catch (error) {\n        console.error(`Failed to migrate product ${record.id}:`, error);\n      }\n    }\n  }\n\n  async migrateInWeeks() {\n    const weeks = [\n      ['2023-01-01', '2023-01-07'],\n      ['2023-01-08', '2023-01-14'],\n      ['2023-01-15', '2023-01-21'],\n      // ... continue for all weeks\n    ];\n\n    for (const [start, end] of weeks) {\n      await this.migrateByDateRange(start, end);\n      await sleep(5000);  // Pause between batches\n    }\n  }\n}\n"})}),"\n",(0,i.jsx)(n.h2,{id:"phase-4-data-validation",children:"Phase 4: Data Validation"}),"\n",(0,i.jsx)(n.h3,{id:"reconciliation-script",children:"Reconciliation Script"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-javascript",children:"// reconciliation.js\nclass DataReconciliation {\n  async reconcile(tableName, dimension) {\n    console.log(`Reconciling ${tableName} \u2192 ${dimension}...`);\n\n    const discrepancies = [];\n\n    // Fetch all legacy records\n    const {rows: legacyRecords} = await legacyDB.query(\n      `SELECT * FROM ${tableName} WHERE core_id IS NOT NULL`\n    );\n\n    for (const legacy of legacyRecords) {\n      // Fetch corresponding Core API record\n      const core = await coreAPI.get(`/api/v4/core/${dimension}/${legacy.core_id}`);\n\n      // Compare fields\n      if (legacy.name !== core.XPRD01) {\n        discrepancies.push({\n          id: legacy.id,\n          field: 'name',\n          legacy: legacy.name,\n          core: core.XPRD01\n        });\n      }\n\n      if (legacy.price !== core.XPRD02) {\n        discrepancies.push({\n          id: legacy.id,\n          field: 'price',\n          legacy: legacy.price,\n          core: core.XPRD02\n        });\n      }\n    }\n\n    if (discrepancies.length > 0) {\n      console.error(`Found ${discrepancies.length} discrepancies`);\n      console.table(discrepancies);\n    } else {\n      console.log('\u2705 All records match!');\n    }\n\n    return discrepancies;\n  }\n}\n"})}),"\n",(0,i.jsx)(n.h2,{id:"phase-5-application-migration",children:"Phase 5: Application Migration"}),"\n",(0,i.jsx)(n.h3,{id:"backend-migration",children:"Backend Migration"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-javascript",children:"// Before: Direct database access\nconst getProducts = async () => {\n  const result = await db.query('SELECT * FROM products WHERE active = true');\n  return result.rows;\n};\n\n// After: Core API\nconst getProducts = async () => {\n  const response = await coreAPI.get('/api/v4/core/products', {\n    params: {filters: 'XPRD06:eq:Y,TREC:eq:N'}\n  });\n  return response.data;\n};\n"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-javascript",children:"// Before: Direct INSERT\nconst createProduct = async (data) => {\n  const result = await db.query(\n    'INSERT INTO products (name, price) VALUES ($1, $2) RETURNING *',\n    [data.name, data.price]\n  );\n  return result.rows[0];\n};\n\n// After: Core API\nconst createProduct = async (data) => {\n  const response = await coreAPI.post('/api/v4/core/products', {\n    XPRD01: data.name,\n    XPRD02: data.price\n  });\n  return response.data;\n};\n"})}),"\n",(0,i.jsx)(n.h3,{id:"frontend-migration",children:"Frontend Migration"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-javascript",children:"// Before: Direct API calls\nconst fetchProducts = async () => {\n  const response = await fetch('/api/products');\n  return response.json();\n};\n\n// After: Core API via backend\nconst fetchProducts = async () => {\n  const response = await fetch('/api/v4/core/products');\n  return response.json();\n};\n"})}),"\n",(0,i.jsx)(n.h2,{id:"phase-6-cutover--rollback",children:"Phase 6: Cutover & Rollback"}),"\n",(0,i.jsx)(n.h3,{id:"blue-green-deployment",children:"Blue-Green Deployment"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-javascript",children:"// deployment-strategy.js\nclass BlueGreenDeployment {\n  async cutover() {\n    // 1. Deploy new version (green) alongside old (blue)\n    console.log('Deploying green environment...');\n    await deployGreen();\n\n    // 2. Run smoke tests on green\n    console.log('Running smoke tests...');\n    const testsPass = await runSmokeTests('green');\n\n    if (!testsPass) {\n      console.error('Smoke tests failed, staying on blue');\n      return false;\n    }\n\n    // 3. Switch traffic gradually (canary)\n    console.log('Switching 10% traffic to green...');\n    await switchTraffic({green: 10, blue: 90});\n    await sleep(300000);  // Monitor for 5 minutes\n\n    console.log('Switching 50% traffic to green...');\n    await switchTraffic({green: 50, blue: 50});\n    await sleep(300000);\n\n    console.log('Switching 100% traffic to green...');\n    await switchTraffic({green: 100, blue: 0});\n\n    // 4. Keep blue running for rollback\n    console.log('Green is now active, blue on standby');\n\n    return true;\n  }\n\n  async rollback() {\n    console.log('Rolling back to blue...');\n    await switchTraffic({green: 0, blue: 100});\n    console.log('Rollback complete');\n  }\n}\n"})}),"\n",(0,i.jsx)(n.h3,{id:"monitoring-during-cutover",children:"Monitoring During Cutover"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-javascript",children:"// monitor-cutover.js\nclass CutoverMonitor {\n  async monitor(durationMinutes = 60) {\n    const alerts = [];\n    const startTime = Date.now();\n\n    while (Date.now() - startTime < durationMinutes * 60000) {\n      // Check error rate\n      const errorRate = await this.getErrorRate();\n      if (errorRate > 5) {\n        alerts.push({\n          time: new Date(),\n          type: 'error_rate',\n          value: errorRate,\n          threshold: 5\n        });\n      }\n\n      // Check response time\n      const p95ResponseTime = await this.getP95ResponseTime();\n      if (p95ResponseTime > 500) {\n        alerts.push({\n          time: new Date(),\n          type: 'response_time',\n          value: p95ResponseTime,\n          threshold: 500\n        });\n      }\n\n      // Check data consistency\n      const inconsistencies = await this.checkDataConsistency();\n      if (inconsistencies > 0) {\n        alerts.push({\n          time: new Date(),\n          type: 'data_inconsistency',\n          count: inconsistencies\n        });\n      }\n\n      await sleep(60000);  // Check every minute\n    }\n\n    if (alerts.length > 0) {\n      console.error('\u26a0\ufe0f Alerts during cutover:');\n      console.table(alerts);\n      return false;\n    }\n\n    console.log('\u2705 Cutover successful, no alerts');\n    return true;\n  }\n}\n"})}),"\n",(0,i.jsx)(n.h2,{id:"migration-checklist",children:"Migration Checklist"}),"\n",(0,i.jsx)(n.h3,{id:"pre-migration",children:"Pre-Migration"}),"\n",(0,i.jsxs)(n.ul,{className:"contains-task-list",children:["\n",(0,i.jsxs)(n.li,{className:"task-list-item",children:[(0,i.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Legacy system inventory complete"]}),"\n",(0,i.jsxs)(n.li,{className:"task-list-item",children:[(0,i.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Field mapping documented"]}),"\n",(0,i.jsxs)(n.li,{className:"task-list-item",children:[(0,i.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Migration plan approved"]}),"\n",(0,i.jsxs)(n.li,{className:"task-list-item",children:[(0,i.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Core API access configured"]}),"\n",(0,i.jsxs)(n.li,{className:"task-list-item",children:[(0,i.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Metadata verified"]}),"\n",(0,i.jsxs)(n.li,{className:"task-list-item",children:[(0,i.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Migration tools tested"]}),"\n",(0,i.jsxs)(n.li,{className:"task-list-item",children:[(0,i.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Rollback plan documented"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"during-migration",children:"During Migration"}),"\n",(0,i.jsxs)(n.ul,{className:"contains-task-list",children:["\n",(0,i.jsxs)(n.li,{className:"task-list-item",children:[(0,i.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Data migrated successfully"]}),"\n",(0,i.jsxs)(n.li,{className:"task-list-item",children:[(0,i.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Validation passed"]}),"\n",(0,i.jsxs)(n.li,{className:"task-list-item",children:[(0,i.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Application updated"]}),"\n",(0,i.jsxs)(n.li,{className:"task-list-item",children:[(0,i.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Tests passing"]}),"\n",(0,i.jsxs)(n.li,{className:"task-list-item",children:[(0,i.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Performance acceptable"]}),"\n",(0,i.jsxs)(n.li,{className:"task-list-item",children:[(0,i.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Monitoring in place"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"post-migration",children:"Post-Migration"}),"\n",(0,i.jsxs)(n.ul,{className:"contains-task-list",children:["\n",(0,i.jsxs)(n.li,{className:"task-list-item",children:[(0,i.jsx)(n.input,{type:"checkbox",disabled:!0})," ","All traffic on Core API"]}),"\n",(0,i.jsxs)(n.li,{className:"task-list-item",children:[(0,i.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Legacy system decommissioned (or on standby)"]}),"\n",(0,i.jsxs)(n.li,{className:"task-list-item",children:[(0,i.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Documentation updated"]}),"\n",(0,i.jsxs)(n.li,{className:"task-list-item",children:[(0,i.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Team trained"]}),"\n",(0,i.jsxs)(n.li,{className:"task-list-item",children:[(0,i.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Support processes updated"]}),"\n",(0,i.jsxs)(n.li,{className:"task-list-item",children:[(0,i.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Lessons learned documented"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"summary",children:"Summary"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Key Success Factors:"})}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:"\u2705 Thorough planning and assessment"}),"\n",(0,i.jsx)(n.li,{children:"\u2705 Incremental migration (not big bang)"}),"\n",(0,i.jsx)(n.li,{children:"\u2705 Dual-write for active data"}),"\n",(0,i.jsx)(n.li,{children:"\u2705 Comprehensive validation"}),"\n",(0,i.jsx)(n.li,{children:"\u2705 Gradual cutover with monitoring"}),"\n",(0,i.jsx)(n.li,{children:"\u2705 Keep rollback option available"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Common Pitfalls:"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"\u274c Insufficient testing"}),"\n",(0,i.jsx)(n.li,{children:"\u274c No rollback plan"}),"\n",(0,i.jsx)(n.li,{children:"\u274c Poor data validation"}),"\n",(0,i.jsx)(n.li,{children:"\u274c Big bang cutover"}),"\n",(0,i.jsx)(n.li,{children:"\u274c Inadequate monitoring"}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"related-concepts",children:"Related Concepts"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"/docs/products/map.q01.io/core-api-platform-v4/best-practices/use-cases",children:"Use Cases"})," - Implementation patterns"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"/docs/products/map.q01.io/core-api-platform-v4/best-practices/testing-strategies",children:"Testing Strategies"})," - Testing approaches"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"/docs/products/map.q01.io/core-api-platform-v4/best-practices",children:"Best Practices"})," - Overview"]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,s.M)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}},2172:(e,n,t)=>{t.d(n,{I:()=>c,M:()=>r});var i=t(1504);const s={},a=i.createContext(s);function r(e){const n=i.useContext(a);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:r(e.components),i.createElement(a.Provider,{value:n},e.children)}}}]);