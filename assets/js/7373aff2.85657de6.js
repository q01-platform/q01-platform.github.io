"use strict";(self.webpackChunkq_01_docs=self.webpackChunkq_01_docs||[]).push([[7496],{8192:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>l,contentTitle:()=>a,default:()=>h,frontMatter:()=>t,metadata:()=>c,toc:()=>o});var s=i(7624),r=i(2172);const t={title:"Advanced Topics",sidebar_label:"Advanced Topics",sidebar_position:7,description:"Advanced features and internal architecture of Q01 Core APIs"},a="Advanced Topics",c={id:"products/map.q01.io/core-api-platform-v4/advanced-topics/index",title:"Advanced Topics",description:"Advanced features and internal architecture of Q01 Core APIs",source:"@site/docs/products/map.q01.io/core-api-platform-v4/06-advanced-topics/index.md",sourceDirName:"products/map.q01.io/core-api-platform-v4/06-advanced-topics",slug:"/products/map.q01.io/core-api-platform-v4/advanced-topics/",permalink:"/docs/products/map.q01.io/core-api-platform-v4/advanced-topics/",draft:!1,unlisted:!1,tags:[],version:"current",sidebarPosition:7,frontMatter:{title:"Advanced Topics",sidebar_label:"Advanced Topics",sidebar_position:7,description:"Advanced features and internal architecture of Q01 Core APIs"},sidebar:"mapSidebar",previous:{title:"Security Checklist",permalink:"/docs/products/map.q01.io/core-api-platform-v4/security/security-checklist"},next:{title:"Multi-Database",permalink:"/docs/products/map.q01.io/core-api-platform-v4/advanced-topics/multi-database"}},l={},o=[{value:"Overview",id:"overview",level:2},{value:"Who Should Read This?",id:"who-should-read-this",level:2},{value:"Multi-Database Support",id:"multi-database-support",level:2},{value:"Media Handling",id:"media-handling",level:2},{value:"Event-Driven Architecture",id:"event-driven-architecture",level:2},{value:"Caching Strategies",id:"caching-strategies",level:2},{value:"Performance Optimization",id:"performance-optimization",level:2},{value:"Webhook Integration",id:"webhook-integration",level:2},{value:"Custom Functions",id:"custom-functions",level:2},{value:"Internal Architecture",id:"internal-architecture",level:2},{value:"Batch Processing",id:"batch-processing",level:2},{value:"Best Practices",id:"best-practices",level:2},{value:"\u2705 DO:",id:"-do",level:3},{value:"\u274c DON&#39;T:",id:"-dont",level:3},{value:"Summary",id:"summary",level:2},{value:"Related Concepts",id:"related-concepts",level:2}];function d(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.M)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.h1,{id:"advanced-topics",children:"Advanced Topics"}),"\n",(0,s.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,s.jsx)(n.p,{children:"This section covers advanced features, internal architecture, and specialized use cases of Q01 Core APIs. These topics go beyond basic CRUD operations to explore performance optimization, event-driven architecture, multi-database support, and integration patterns."}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Topics Covered:"})}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Multi-Database Support"})," - MySQL, Oracle, PostgreSQL"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Media Handling"})," - Binary files, images, documents"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Outbox Subscribers"})," - RabbitMQ event consumers"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Caching Strategies"})," - Client and server-side caching"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Performance Optimization"})," - Query optimization, indexing"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Webhook Integration"})," - External system notifications"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Custom Functions"})," - Pre-insert, post-update hooks"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Internal Architecture"})," - CoreService routing to CoreQuery/CoreWrite"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Batch Processing"})," - Large-scale data operations"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"who-should-read-this",children:"Who Should Read This?"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Platform Engineers:"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Understanding internal architecture"}),"\n",(0,s.jsx)(n.li,{children:"Performance optimization"}),"\n",(0,s.jsx)(n.li,{children:"Multi-database configuration"}),"\n",(0,s.jsx)(n.li,{children:"Event-driven architecture"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Backend Developers:"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Implementing event subscribers"}),"\n",(0,s.jsx)(n.li,{children:"Custom validation functions"}),"\n",(0,s.jsx)(n.li,{children:"Webhook integrations"}),"\n",(0,s.jsx)(n.li,{children:"Caching strategies"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"System Architects:"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Designing scalable integrations"}),"\n",(0,s.jsx)(n.li,{children:"Event sourcing patterns"}),"\n",(0,s.jsx)(n.li,{children:"Performance considerations"}),"\n",(0,s.jsx)(n.li,{children:"Database architecture"}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"multi-database-support",children:"Multi-Database Support"}),"\n",(0,s.jsxs)(n.p,{children:["Q01 Core APIs support multiple database engines through ",(0,s.jsx)(n.strong,{children:"PDO abstraction layer"}),"."]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Supported Databases:"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"MySQL 5.7+"}),"\n",(0,s.jsx)(n.li,{children:"Oracle 11g+"}),"\n",(0,s.jsx)(n.li,{children:"PostgreSQL 9.6+"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Key Features:"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"\u2705 Single codebase for all databases"}),"\n",(0,s.jsx)(n.li,{children:"\u2705 Database-specific optimizations"}),"\n",(0,s.jsx)(n.li,{children:"\u2705 Automatic query adaptation"}),"\n",(0,s.jsx)(n.li,{children:"\u2705 Connection pooling"}),"\n",(0,s.jsx)(n.li,{children:"\u2705 Multi-database transactions"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Configuration:"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-php",children:"// Database configuration\n'databases' => [\n    'meta' => [\n        'driver' => 'mysql',\n        'host' => 'mysql-meta.example.com',\n        'database' => 'q01_meta',\n        'username' => 'q01_user',\n        'password' => 'secure_password'\n    ],\n    'data' => [\n        'driver' => 'oracle',\n        'host' => 'oracle-data.example.com',\n        'database' => 'q01_data',\n        'username' => 'q01_user',\n        'password' => 'secure_password'\n    ],\n    'auth' => [\n        'driver' => 'postgresql',\n        'host' => 'postgres-auth.example.com',\n        'database' => 'q01_auth',\n        'username' => 'q01_user',\n        'password' => 'secure_password'\n    ]\n]\n"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Database Separation:"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Meta DB"}),": ",(0,s.jsx)(n.code,{children:"TB_DIM"}),", ",(0,s.jsx)(n.code,{children:"TB_COST"}),", ",(0,s.jsx)(n.code,{children:"TB_VAR"}),", ",(0,s.jsx)(n.code,{children:"TB_MENU"})," (metadata tables)"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Data DB"}),": ",(0,s.jsx)(n.code,{children:"TB_ANAG_{DIM}00"})," (dimension data tables)"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Auth DB"}),": User credentials, JWT secrets"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"media-handling",children:"Media Handling"}),"\n",(0,s.jsx)(n.p,{children:"Special endpoints handle binary files (images, PDFs, documents)."}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Media Endpoints:"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"# Upload image\nPOST /api/v4/media/upload\nContent-Type: multipart/form-data\n\n# Get image (binary response)\nGET /api/v4/media/{dimension}/{id}/{field}\n\n# Get thumbnail\nGET /api/v4/media/{dimension}/{id}/{field}?size=thumbnail\n"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Features:"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"\u2705 Image resize and thumbnails"}),"\n",(0,s.jsx)(n.li,{children:"\u2705 MIME type validation"}),"\n",(0,s.jsx)(n.li,{children:"\u2705 Virus scanning"}),"\n",(0,s.jsx)(n.li,{children:"\u2705 CDN integration"}),"\n",(0,s.jsx)(n.li,{children:"\u2705 Lazy loading support"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Storage Options:"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Local filesystem"}),"\n",(0,s.jsx)(n.li,{children:"AWS S3"}),"\n",(0,s.jsx)(n.li,{children:"Azure Blob Storage"}),"\n",(0,s.jsx)(n.li,{children:"Google Cloud Storage"}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"event-driven-architecture",children:"Event-Driven Architecture"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Outbox Pattern"})," with RabbitMQ enables event-driven microservices."]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Event Flow:"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"Write Operation (POST/PUT/PATCH/DELETE)\n    \u2193\n1. Update data table\n2. Insert OUTBOX event\n3. COMMIT transaction\n    \u2193\nBackground Publisher\n    \u2193\nRabbitMQ Fanout Exchange (corewrite.fanout)\n    \u2193\nSubscribers:\n\u251c\u2500\u2500 search-indexer (Elasticsearch)\n\u251c\u2500\u2500 cache-invalidator (Redis)\n\u251c\u2500\u2500 analytics-writer (Data warehouse)\n\u251c\u2500\u2500 notification-sender (Email/SMS)\n\u2514\u2500\u2500 webhook-dispatcher (External systems)\n"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Subscriber Example:"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-javascript",children:"const amqp = require('amqplib');\n\nasync function startSubscriber() {\n  const connection = await amqp.connect('amqp://rabbitmq:5672');\n  const channel = await connection.createChannel();\n\n  await channel.assertExchange('corewrite.fanout', 'fanout', { durable: true });\n  const queue = await channel.assertQueue('my-subscriber', { durable: true });\n  await channel.bindQueue(queue.queue, 'corewrite.fanout', '');\n\n  channel.consume(queue.queue, async (msg) => {\n    const event = JSON.parse(msg.content.toString());\n\n    await handleEvent(event);\n    channel.ack(msg);\n  });\n}\n"})}),"\n",(0,s.jsx)(n.h2,{id:"caching-strategies",children:"Caching Strategies"}),"\n",(0,s.jsx)(n.p,{children:"Multiple caching layers optimize performance."}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Caching Layers:"})}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Client-Side Cache"})," - Browser cache, sessionStorage"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"CDN Cache"})," - Static assets, media files"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Application Cache"})," - Redis, Memcached"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Database Cache"})," - Query result cache"]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Cache Invalidation:"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"Write Operation\n    \u2193\nOUTBOX Event\n    \u2193\nRabbitMQ\n    \u2193\ncache-invalidator subscriber\n    \u2193\nRedis DEL keys matching pattern\n"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Example:"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-javascript",children:"class CachedAPIClient {\n  constructor(cache, ttl = 60) {\n    this.cache = cache;\n    this.ttl = ttl;\n  }\n\n  async getProduct(id) {\n    const cacheKey = `product:${id}`;\n\n    // Check cache\n    const cached = await this.cache.get(cacheKey);\n    if (cached) return JSON.parse(cached);\n\n    // Fetch from API\n    const product = await this.fetchProduct(id);\n\n    // Store in cache\n    await this.cache.set(cacheKey, JSON.stringify(product), this.ttl);\n\n    return product;\n  }\n}\n"})}),"\n",(0,s.jsx)(n.h2,{id:"performance-optimization",children:"Performance Optimization"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Query Optimization:"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Database indexes on filter fields"}),"\n",(0,s.jsx)(n.li,{children:"Pagination with offset/limit"}),"\n",(0,s.jsx)(n.li,{children:"Field selection ($fields parameter)"}),"\n",(0,s.jsx)(n.li,{children:"Eager loading related records"}),"\n",(0,s.jsx)(n.li,{children:"Query result caching"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Indexing Strategy:"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sql",children:"-- Tenant isolation (most important)\nCREATE INDEX idx_prd_tenant ON TB_ANAG_PRD00(PRD_SOURCE, PRD_CENTRO_DETT, PRD_AMBIENTE);\n\n-- Common filters\nCREATE INDEX idx_prd_category ON TB_ANAG_PRD00(XPRD05);\nCREATE INDEX idx_prd_active ON TB_ANAG_PRD00(XPRD06);\n\n-- Timestamps for sorting\nCREATE INDEX idx_prd_created ON TB_ANAG_PRD00(CREATED_AT);\nCREATE INDEX idx_prd_updated ON TB_ANAG_PRD00(UPDATED_AT);\n\n-- TREC for soft delete filtering\nCREATE INDEX idx_prd_trec ON TB_ANAG_PRD00(TREC);\n\n-- Composite index for common query\nCREATE INDEX idx_prd_common ON TB_ANAG_PRD00(PRD_SOURCE, TREC, XPRD06, CREATED_AT);\n"})}),"\n",(0,s.jsx)(n.h2,{id:"webhook-integration",children:"Webhook Integration"}),"\n",(0,s.jsx)(n.p,{children:"Notify external systems on data changes."}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Webhook Flow:"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"Write Operation\n    \u2193\nOUTBOX Event\n    \u2193\nRabbitMQ\n    \u2193\nwebhook-dispatcher subscriber\n    \u2193\nHTTP POST to external webhook URL\n"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Webhook Configuration:"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sql",children:"CREATE TABLE WEBHOOKS (\n    WEBHOOK_ID VARCHAR(36) PRIMARY KEY,\n    SOURCE VARCHAR(50),               -- Tenant\n    EVENT_TYPE VARCHAR(100),          -- ProductCreated, OrderUpdated, etc.\n    URL VARCHAR(500),                 -- External webhook URL\n    SECRET VARCHAR(255),              -- HMAC signature secret\n    ACTIVE BOOLEAN DEFAULT TRUE,\n    CREATED_AT TIMESTAMP\n);\n\nINSERT INTO WEBHOOKS (WEBHOOK_ID, SOURCE, EVENT_TYPE, URL, SECRET)\nVALUES (\n    'uuid-...',\n    'ecommerce',\n    'ProductCreated',\n    'https://external-system.com/webhooks/products',\n    'webhook_secret_key'\n);\n"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Webhook Payload:"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",children:'{\n  "event_id": "uuid-...",\n  "event_type": "ProductCreated",\n  "timestamp": "2025-12-19T16:00:00Z",\n  "source": "ecommerce",\n  "data": {\n    "PRD_ID": "123",\n    "XPRD01": "Widget Pro",\n    "XPRD02": 99.99\n  },\n  "signature": "hmac-sha256-signature"\n}\n'})}),"\n",(0,s.jsx)(n.h2,{id:"custom-functions",children:"Custom Functions"}),"\n",(0,s.jsx)(n.p,{children:"Extend Core APIs with custom logic."}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Pre-Insert Functions:"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"{uuid}"})," - Generate UUID"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"{md5}"})," - Hash field value"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"{counter}"})," - Sequential counter"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"{timestamp}"})," - Current timestamp"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"{slugify}"})," - URL-friendly slug"]}),"\n",(0,s.jsx)(n.li,{children:"Custom functions via plugins"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Post-Update Hooks:"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Validation functions"}),"\n",(0,s.jsx)(n.li,{children:"Derived field calculation"}),"\n",(0,s.jsx)(n.li,{children:"External API calls"}),"\n",(0,s.jsx)(n.li,{children:"Notification triggers"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Example:"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-php",children:"// Custom pre-insert function\npublic function registerCustomFunction(string $name, callable $function): void {\n    $this->customFunctions[$name] = $function;\n}\n\n// Usage in TB_COST.VALUE_TEMP\n// {custom:generateSKU}\n\n// Function implementation\n$this->registerCustomFunction('generateSKU', function($dimension, $data) {\n    $category = $data['XPRD05'];\n    $sequence = $this->getNextSequence($category);\n    return \"{$category}-{$sequence}\";\n});\n"})}),"\n",(0,s.jsx)(n.h2,{id:"internal-architecture",children:"Internal Architecture"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"CoreService (Go/Buffalo)"})," routes requests to backend services."]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Routing Logic:"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"Client Request \u2192 CoreService (Port 8080)\n    \u2193\nRoute Analysis (HTTP Method + Named Route)\n    \u2193\nGET \u2192 CoreQuery (PHP/Symfony) - Read operations\nPOST/PUT/PATCH/DELETE \u2192 CoreWrite (PHP/Symfony) - Write operations\n    \u2193\nResponse proxied back to client\n"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Service Separation Benefits:"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"\u2705 CQRS pattern (Command Query Responsibility Segregation)"}),"\n",(0,s.jsx)(n.li,{children:"\u2705 Independent scaling (read vs write)"}),"\n",(0,s.jsx)(n.li,{children:"\u2705 Read replicas for queries"}),"\n",(0,s.jsx)(n.li,{children:"\u2705 Write optimization with transactions"}),"\n",(0,s.jsx)(n.li,{children:"\u2705 Horizontal scaling"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Environment Variables:"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"# CoreQuery backend\nR_API_HOST=corequery.internal\nR_API_PORT=8000\nR_API_VERSION=v4\n\n# CoreWrite backend\nW_API_HOST=corewrite.internal\nW_API_PORT=8001\nW_API_VERSION=v4\n"})}),"\n",(0,s.jsx)(n.h2,{id:"batch-processing",children:"Batch Processing"}),"\n",(0,s.jsx)(n.p,{children:"Large-scale operations with millions of records."}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Strategies:"})}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Parallel Requests"})," - Multiple concurrent API calls (throttled)"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Bulk Import"})," - CSV/Excel import with validation"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Background Jobs"})," - Asynchronous processing with queue"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Streaming"})," - Process large datasets in chunks"]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Background Job Example:"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-javascript",children:"class BulkImportJob {\n  async importProducts(csvFile, batchSize = 100) {\n    const products = await this.parseCSV(csvFile);\n    const batches = this.chunk(products, batchSize);\n\n    for (const batch of batches) {\n      await this.processBatch(batch);\n      await this.updateProgress(batches.indexOf(batch), batches.length);\n    }\n  }\n\n  async processBatch(batch) {\n    const requests = batch.map(product =>\n      this.createProduct(product).catch(error => ({\n        product,\n        error: error.message\n      }))\n    );\n\n    const results = await Promise.all(requests);\n\n    const failures = results.filter(r => r.error);\n    if (failures.length > 0) {\n      await this.logFailures(failures);\n    }\n  }\n}\n"})}),"\n",(0,s.jsx)(n.h2,{id:"best-practices",children:"Best Practices"}),"\n",(0,s.jsx)(n.h3,{id:"-do",children:"\u2705 DO:"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Use event subscribers for async tasks:"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-javascript",children:"// \u2705 Good - decouple via events\n// Core APIs handle write + outbox event\n// Subscriber processes async (search index, email, etc.)\n"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Cache frequently accessed data:"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-javascript",children:"// \u2705 Good - reduce API calls\nconst cached = cache.get(key);\nif (cached) return cached;\n"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Optimize database queries:"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sql",children:"-- \u2705 Good - indexed fields in WHERE\nSELECT * FROM TB_ANAG_PRD00\nWHERE PRD_SOURCE = 'tenant'  -- Indexed\n  AND XPRD05 = 'category'    -- Indexed\n  AND TREC != 'C'             -- Indexed\nLIMIT 100;\n"})}),"\n",(0,s.jsx)(n.h3,{id:"-dont",children:"\u274c DON'T:"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Don't poll for changes:"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-javascript",children:"// \u274c Bad - polling\nsetInterval(async () => {\n  const changes = await getChanges();\n}, 1000);\n\n// \u2705 Good - event subscriber\nsubscribeToChanges((event) => {\n  handleChange(event);\n});\n"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Don't fetch large datasets without pagination:"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"# \u274c Bad - no limit\nGET /api/v4/core/PRD\n\n# \u2705 Good - paginated\nGET /api/v4/core/PRD?$num_rows=100&$offset=0\n"})}),"\n",(0,s.jsx)(n.h2,{id:"summary",children:"Summary"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"\u2705 Multi-database support (MySQL, Oracle, PostgreSQL)"}),"\n",(0,s.jsx)(n.li,{children:"\u2705 Media handling for binary files"}),"\n",(0,s.jsx)(n.li,{children:"\u2705 Event-driven architecture with RabbitMQ"}),"\n",(0,s.jsx)(n.li,{children:"\u2705 Multi-layer caching strategies"}),"\n",(0,s.jsx)(n.li,{children:"\u2705 Query optimization and indexing"}),"\n",(0,s.jsx)(n.li,{children:"\u2705 Webhook integration for external systems"}),"\n",(0,s.jsx)(n.li,{children:"\u2705 Custom functions for business logic"}),"\n",(0,s.jsx)(n.li,{children:"\u2705 Internal CQRS architecture"}),"\n",(0,s.jsx)(n.li,{children:"\u2705 Batch processing for large-scale operations"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Key Takeaways:"})}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsx)(n.li,{children:"Use event subscribers for async processing"}),"\n",(0,s.jsx)(n.li,{children:"Implement caching at multiple layers"}),"\n",(0,s.jsx)(n.li,{children:"Optimize queries with proper indexes"}),"\n",(0,s.jsx)(n.li,{children:"Leverage CQRS pattern for scaling"}),"\n",(0,s.jsx)(n.li,{children:"Use webhooks for external integrations"}),"\n",(0,s.jsx)(n.li,{children:"Process large datasets in batches"}),"\n",(0,s.jsx)(n.li,{children:"Monitor performance and optimize"}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"related-concepts",children:"Related Concepts"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.a,{href:"/docs/products/map.q01.io/core-api-platform-v4/advanced-topics/multi-database",children:"Multi-Database"})," - Database engine support"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.a,{href:"/docs/products/map.q01.io/core-api-platform-v4/advanced-topics/media-handling",children:"Media Handling"})," - Binary files and images"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.a,{href:"/docs/products/map.q01.io/core-api-platform-v4/advanced-topics/outbox-subscribers",children:"Outbox Subscribers"})," - RabbitMQ consumers"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.a,{href:"/docs/products/map.q01.io/core-api-platform-v4/advanced-topics/caching-strategies",children:"Caching Strategies"})," - Performance optimization"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.a,{href:"/docs/products/map.q01.io/core-api-platform-v4/advanced-topics/performance-optimization",children:"Performance Optimization"})," - Query tuning"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.a,{href:"/docs/products/map.q01.io/core-api-platform-v4/advanced-topics/webhook-integration",children:"Webhook Integration"})," - External notifications"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.a,{href:"/docs/products/map.q01.io/core-api-platform-v4/advanced-topics/custom-functions",children:"Custom Functions"})," - Pre-insert hooks"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.a,{href:"/docs/products/map.q01.io/core-api-platform-v4/advanced-topics/internal-architecture",children:"Internal Architecture"})," - CoreService routing"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.a,{href:"/docs/products/map.q01.io/core-api-platform-v4/advanced-topics/batch-processing",children:"Batch Processing"})," - Large-scale operations"]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,r.M)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}},2172:(e,n,i)=>{i.d(n,{I:()=>c,M:()=>a});var s=i(1504);const r={},t=s.createContext(r);function a(e){const n=s.useContext(t);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:a(e.components),s.createElement(t.Provider,{value:n},e.children)}}}]);