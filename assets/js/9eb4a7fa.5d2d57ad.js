"use strict";(self.webpackChunkq_01_docs=self.webpackChunkq_01_docs||[]).push([[2244],{7584:(e,n,d)=>{d.r(n),d.d(n,{assets:()=>t,contentTitle:()=>c,default:()=>j,frontMatter:()=>i,metadata:()=>l,toc:()=>h});var r=d(7624),s=d(2172);const i={title:"MAP Framework",sidebar_label:"2. MAP Framework",sidebar_position:3,description:"Understanding the Metadata Application Platform - the heart of Q01's metadata-driven architecture"},c="MAP Framework: The Metadata Engine",l={id:"products/map.q01.io/core-api-platform-v4/core-concepts/map-framework",title:"MAP Framework",description:"Understanding the Metadata Application Platform - the heart of Q01's metadata-driven architecture",source:"@site/docs/products/map.q01.io/core-api-platform-v4/01-core-concepts/map-framework.md",sourceDirName:"products/map.q01.io/core-api-platform-v4/01-core-concepts",slug:"/products/map.q01.io/core-api-platform-v4/core-concepts/map-framework",permalink:"/docs/products/map.q01.io/core-api-platform-v4/core-concepts/map-framework",draft:!1,unlisted:!1,tags:[],version:"current",sidebarPosition:3,frontMatter:{title:"MAP Framework",sidebar_label:"2. MAP Framework",sidebar_position:3,description:"Understanding the Metadata Application Platform - the heart of Q01's metadata-driven architecture"},sidebar:"mapSidebar",previous:{title:"1. Dimensions",permalink:"/docs/products/map.q01.io/core-api-platform-v4/core-concepts/dimensions"},next:{title:"3. Context Chain",permalink:"/docs/products/map.q01.io/core-api-platform-v4/core-concepts/context-chain"}},t={},h=[{value:"What is MAP?",id:"what-is-map",level:2},{value:"The Core Metadata Tables",id:"the-core-metadata-tables",level:2},{value:"1. TB_DIM - Dimension Registry",id:"1-tb_dim---dimension-registry",level:2},{value:"2. TB_COST - Field Definitions",id:"2-tb_cost---field-definitions",level:2},{value:"3. TB_TYPE_FIELDS - Field Type Definitions",id:"3-tb_type_fields---field-type-definitions",level:2},{value:"4. TB_MENU - Security Areas &amp; Navigation",id:"4-tb_menu---security-areas--navigation",level:2},{value:"5. TB_OBJECT - Views and Hierarchies",id:"5-tb_object---views-and-hierarchies",level:2},{value:"6. TB_COUNTER - Sequential Identifiers",id:"6-tb_counter---sequential-identifiers",level:2},{value:"7. TB_INDEX - Index Definitions",id:"7-tb_index---index-definitions",level:2},{value:"How MAP Tables Work Together",id:"how-map-tables-work-together",level:2},{value:"Complete Example: ART Dimension",id:"complete-example-art-dimension",level:3},{value:"API Request Flow",id:"api-request-flow",level:3},{value:"Metadata Relationships",id:"metadata-relationships",level:2},{value:"Summary",id:"summary",level:2}];function x(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,s.M)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.h1,{id:"map-framework-the-metadata-engine",children:"MAP Framework: The Metadata Engine"}),"\n",(0,r.jsx)(n.h2,{id:"what-is-map",children:"What is MAP?"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"MAP (Metadata Application Platform)"})," is the interconnected system of metadata tables that define ALL behavior in Q01 Core APIs."]}),"\n",(0,r.jsx)(n.p,{children:"Instead of hardcoding business logic in code, Q01 stores:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Entity structures"})," (dimensions, fields, types)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Validation rules"})," (required fields, data types, constraints)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Permissions"})," (who can see/edit which fields)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Relationships"})," (foreign keys, lookups, hierarchies)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Business logic"})," (counters, pre-insert functions, cascades)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Index definitions"})," (unique constraints, composite indexes)"]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["Core APIs ",(0,r.jsx)(n.strong,{children:"interpret this metadata at runtime"})," to dynamically construct queries, validate data, and enforce rules."]}),"\n",(0,r.jsx)(n.h2,{id:"the-core-metadata-tables",children:"The Core Metadata Tables"}),"\n",(0,r.jsxs)(n.p,{children:["MAP consists of ",(0,r.jsx)(n.strong,{children:"7 primary metadata tables"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502             MAP FRAMEWORK                     \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502                                               \u2502\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510                                 \u2502\n\u2502  \u2502 TB_DIM  \u2502  \u2190 Dimension Registry           \u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2518                                 \u2502\n\u2502       \u2502 defines                               \u2502\n\u2502       v                                       \u2502\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510      \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510          \u2502\n\u2502  \u2502TB_COST  \u2502 \u2500\u2500\u2500\u2192 \u2502TB_TYPE_FIELDS\u2502          \u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2518      \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518          \u2502\n\u2502       \u2502 uses            Field Types           \u2502\n\u2502       \u2502                                       \u2502\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2510                                 \u2502\n\u2502  \u2502TB_INDEX \u2502  \u2190 Index Definitions            \u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518                                 \u2502\n\u2502                                               \u2502\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510          \u2502\n\u2502  \u2502TB_MENU \u2502 \u2502TB_OBJECT\u2502 \u2502TB_COUNTER\u2502        \u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518          \u2502\n\u2502  Security    Views/     Sequences            \u2502\n\u2502             Hierarchies                       \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n"})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"1-tb_dim---dimension-registry",children:"1. TB_DIM - Dimension Registry"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Purpose:"})," Registers all entity types (dimensions) in the system."]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Schema:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sql",children:"CREATE TABLE `TB_DIM` (\n  `COD_DIM` varchar(50) DEFAULT '',\n  `OWNER` varchar(20) DEFAULT '',\n  `CDATA` varchar(14) DEFAULT '',\n  `LOWNER` varchar(20) DEFAULT '',\n  `LDATA` varchar(14) DEFAULT '',\n  `TIMESTAMP` varchar(20) DEFAULT '',\n  `TREC` varchar(1) DEFAULT '',\n  `DESC_DIM` varchar(100) DEFAULT '',\n  `TABLE_NAME_PUB` varchar(100) DEFAULT '',\n  `ROUTE_KEY` varchar(100) DEFAULT '',\n  `COD_TIPO` varchar(50) NOT NULL DEFAULT '',\n  `COD_ANAG` varchar(100) DEFAULT '',\n  `COD_ELEM_BASE` varchar(50) DEFAULT '',\n  `COD_COD_ANAG` varchar(100) DEFAULT '',\n  `MARKET` int(11) NOT NULL DEFAULT '0',\n  UNIQUE KEY `IDX_CODTIPO` (`MARKET`,`COD_TIPO`),\n  KEY `IDX_COD_TIPO` (`COD_TIPO`),\n  KEY `IDX_MARKETDIM` (`MARKET`)\n) ENGINE=InnoDB DEFAULT CHARSET=utf8;\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Key Fields:"})}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Field"}),(0,r.jsx)(n.th,{children:"Type"}),(0,r.jsx)(n.th,{children:"Purpose"}),(0,r.jsx)(n.th,{children:"Example"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"COD_DIM"})}),(0,r.jsx)(n.td,{children:"varchar(50)"}),(0,r.jsxs)(n.td,{children:[(0,r.jsx)(n.strong,{children:"Dimension code"})," (logical identifier)"]}),(0,r.jsxs)(n.td,{children:[(0,r.jsx)(n.code,{children:"ART"}),", ",(0,r.jsx)(n.code,{children:"PRD"}),", ",(0,r.jsx)(n.code,{children:"CLI"})]})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"DESC_DIM"})}),(0,r.jsx)(n.td,{children:"varchar(100)"}),(0,r.jsx)(n.td,{children:"Human-readable description"}),(0,r.jsxs)(n.td,{children:[(0,r.jsx)(n.code,{children:"Artwork"}),", ",(0,r.jsx)(n.code,{children:"Products"})]})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"TABLE_NAME_PUB"})}),(0,r.jsx)(n.td,{children:"varchar(100)"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"Physical table name"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"TB_ANAG_ART00"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"ROUTE_KEY"})}),(0,r.jsx)(n.td,{children:"varchar(100)"}),(0,r.jsx)(n.td,{children:"Routing key (optional)"}),(0,r.jsx)(n.td,{children:"``"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"COD_TIPO"})}),(0,r.jsx)(n.td,{children:"varchar(50)"}),(0,r.jsx)(n.td,{children:"Type code (usually same as COD_DIM)"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"ART"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"COD_ANAG"})}),(0,r.jsx)(n.td,{children:"varchar(100)"}),(0,r.jsx)(n.td,{children:"Table name (same as TABLE_NAME_PUB)"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"TB_ANAG_ART00"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"COD_ELEM_BASE"})}),(0,r.jsx)(n.td,{children:"varchar(50)"}),(0,r.jsx)(n.td,{children:"Base element name"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"ART00"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"COD_COD_ANAG"})}),(0,r.jsx)(n.td,{children:"varchar(100)"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"Primary key field name"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"ART_ID"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"MARKET"})}),(0,r.jsx)(n.td,{children:"int(11)"}),(0,r.jsx)(n.td,{children:"Multi-tenant identifier"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"0"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"TREC"})}),(0,r.jsx)(n.td,{children:"varchar(1)"}),(0,r.jsx)(n.td,{children:"Record state (N/M/C/P)"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"N"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsxs)(n.td,{children:[(0,r.jsx)(n.code,{children:"OWNER"}),", ",(0,r.jsx)(n.code,{children:"CDATA"})]}),(0,r.jsx)(n.td,{children:"varchar"}),(0,r.jsx)(n.td,{children:"Audit: creator, creation date"}),(0,r.jsxs)(n.td,{children:[(0,r.jsx)(n.code,{children:"SYS"}),", ",(0,r.jsx)(n.code,{children:"20241009125620"})]})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsxs)(n.td,{children:[(0,r.jsx)(n.code,{children:"LOWNER"}),", ",(0,r.jsx)(n.code,{children:"LDATA"})]}),(0,r.jsx)(n.td,{children:"varchar"}),(0,r.jsx)(n.td,{children:"Audit: last modifier, last modification"}),(0,r.jsxs)(n.td,{children:[(0,r.jsx)(n.code,{children:"SYS"}),", ",(0,r.jsx)(n.code,{children:"20241009125620"})]})]})]})]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Example:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sql",children:"SELECT COD_DIM, DESC_DIM, TABLE_NAME_PUB, COD_COD_ANAG\nFROM TB_DIM\nWHERE COD_DIM = 'ART';\n\n-- Result:\n-- COD_DIM: ART\n-- DESC_DIM: Artwork\n-- TABLE_NAME_PUB: TB_ANAG_ART00\n-- COD_COD_ANAG: ART_ID\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Naming Convention:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Dimension code: Uppercase 2-6 chars (ART, PRD, CLI, ARTIMG)"}),"\n",(0,r.jsxs)(n.li,{children:["Table name: ",(0,r.jsx)(n.code,{children:"TB_ANAG_{DIM}00"})," format"]}),"\n",(0,r.jsxs)(n.li,{children:["Primary key: ",(0,r.jsx)(n.code,{children:"{DIM}_ID"})," format"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Usage in Core APIs:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["CoreService extracts ",(0,r.jsx)(n.code,{children:"{dim}"})," from URL: ",(0,r.jsx)(n.code,{children:"/api/v4/core/ART"})]}),"\n",(0,r.jsxs)(n.li,{children:["Queries TB_DIM to get ",(0,r.jsx)(n.code,{children:"TABLE_NAME_PUB"})," and ",(0,r.jsx)(n.code,{children:"COD_COD_ANAG"})]}),"\n",(0,r.jsxs)(n.li,{children:["Constructs dynamic SQL: ",(0,r.jsx)(n.code,{children:"SELECT * FROM TB_ANAG_ART00 WHERE ART_ID = ?"})]}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"2-tb_cost---field-definitions",children:"2. TB_COST - Field Definitions"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Purpose:"})," Defines every field for every dimension - the ",(0,r.jsx)(n.strong,{children:"most critical metadata table"}),"."]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Schema:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sql",children:"CREATE TABLE `TB_COST` (\n  `OWNER` varchar(20) DEFAULT '',\n  `CDATA` varchar(14) DEFAULT '',\n  `LOWNER` varchar(20) DEFAULT '',\n  `LDATA` varchar(14) DEFAULT '',\n  `TIMESTAMP` varchar(20) DEFAULT '',\n  `TREC` varchar(1) DEFAULT '',\n  `COD_MENU` varchar(40) DEFAULT '',\n  `COD_UTENTE` varchar(10) DEFAULT '',\n  `COD_COST` varchar(60) NOT NULL DEFAULT '',\n  `COD_COST_PUB` varchar(60) DEFAULT '',\n  `DESC_COST` varchar(100) DEFAULT '',\n  `COD_DIM` varchar(50) DEFAULT '',\n  `COD_SEQUENZA` int(11) DEFAULT '0',\n  `COD_ON_OFF` varchar(60) DEFAULT '',\n  `TIPO_CAMPO` varchar(100) DEFAULT '',\n  `DEFAULT_VAL` varchar(40) DEFAULT '',\n  `CHECK_CAMPO` varchar(40) DEFAULT '',\n  `CHECK_TRANSLATE` int(1) DEFAULT '0',\n  `FUNCTION` varchar(255) DEFAULT '',\n  `ADD_FIELD` int(1) DEFAULT '1',\n  `DESCRIZIONE` mediumtext,\n  `LOG_COST` int(1) DEFAULT '0',\n  `MARKET` int(11) NOT NULL DEFAULT '0',\n  UNIQUE KEY `IDX_CODCOST` (`COD_COST`,`MARKET`),\n  KEY `COD_DIM_IDX` (`COD_DIM`),\n  KEY `MARKETCOD_IDX` (`MARKET`)\n) ENGINE=InnoDB DEFAULT CHARSET=utf8;\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Key Fields:"})}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Field"}),(0,r.jsx)(n.th,{children:"Type"}),(0,r.jsx)(n.th,{children:"Purpose"}),(0,r.jsx)(n.th,{children:"Example"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"COD_DIM"})}),(0,r.jsx)(n.td,{children:"varchar(50)"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"Dimension this field belongs to"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"ART"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"COD_COST"})}),(0,r.jsx)(n.td,{children:"varchar(60)"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"Internal field code"})}),(0,r.jsxs)(n.td,{children:[(0,r.jsx)(n.code,{children:"XART04"}),", ",(0,r.jsx)(n.code,{children:"XART05"})]})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"COD_COST_PUB"})}),(0,r.jsx)(n.td,{children:"varchar(60)"}),(0,r.jsx)(n.td,{children:"Public field name (optional)"}),(0,r.jsxs)(n.td,{children:[(0,r.jsx)(n.code,{children:"Title"}),", ",(0,r.jsx)(n.code,{children:"Medium"})]})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"DESC_COST"})}),(0,r.jsx)(n.td,{children:"varchar(100)"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"Field label"})}),(0,r.jsxs)(n.td,{children:[(0,r.jsx)(n.code,{children:"Titolo"}),", ",(0,r.jsx)(n.code,{children:"Medium"})]})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"TIPO_CAMPO"})}),(0,r.jsx)(n.td,{children:"varchar(100)"}),(0,r.jsxs)(n.td,{children:[(0,r.jsx)(n.strong,{children:"Field type"})," (see TB_TYPE_FIELDS)"]}),(0,r.jsxs)(n.td,{children:[(0,r.jsx)(n.code,{children:"text|200"}),", ",(0,r.jsx)(n.code,{children:"VARS|CL1||XCL103|XCL104"})]})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"COD_ON_OFF"})}),(0,r.jsx)(n.td,{children:"varchar(60)"}),(0,r.jsxs)(n.td,{children:[(0,r.jsx)(n.strong,{children:"Visibility flags"})," (comma-separated)"]}),(0,r.jsxs)(n.td,{children:[(0,r.jsx)(n.code,{children:"L,N,M,D,R"}),", ",(0,r.jsx)(n.code,{children:"I"})]})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"COD_UTENTE"})}),(0,r.jsx)(n.td,{children:"varchar(10)"}),(0,r.jsxs)(n.td,{children:[(0,r.jsx)(n.strong,{children:"Min peso required"})," (access level)"]}),(0,r.jsxs)(n.td,{children:[(0,r.jsx)(n.code,{children:"*"})," (all), ",(0,r.jsx)(n.code,{children:"2"}),", ",(0,r.jsx)(n.code,{children:"3"})]})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"COD_SEQUENZA"})}),(0,r.jsx)(n.td,{children:"int(11)"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"Display order"})}),(0,r.jsxs)(n.td,{children:[(0,r.jsx)(n.code,{children:"3"}),", ",(0,r.jsx)(n.code,{children:"5"}),", ",(0,r.jsx)(n.code,{children:"10"})]})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"CHECK_CAMPO"})}),(0,r.jsx)(n.td,{children:"varchar(40)"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"Constraint/validation"})}),(0,r.jsxs)(n.td,{children:[(0,r.jsx)(n.code,{children:"not null"}),", ``"]})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"DEFAULT_VAL"})}),(0,r.jsx)(n.td,{children:"varchar(40)"}),(0,r.jsx)(n.td,{children:"Default value"}),(0,r.jsxs)(n.td,{children:[(0,r.jsx)(n.code,{children:"0.00"}),", ",(0,r.jsx)(n.code,{children:"cm"})]})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"FUNCTION"})}),(0,r.jsx)(n.td,{children:"varchar(255)"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"Pre-insert function"})}),(0,r.jsx)(n.td,{children:"`` (none)"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"ADD_FIELD"})}),(0,r.jsx)(n.td,{children:"int(1)"}),(0,r.jsx)(n.td,{children:"Include in schema (0=no, 1=yes)"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"1"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"CHECK_TRANSLATE"})}),(0,r.jsx)(n.td,{children:"int(1)"}),(0,r.jsx)(n.td,{children:"Translate field (0=no, 1=yes)"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"0"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"LOG_COST"})}),(0,r.jsx)(n.td,{children:"int(1)"}),(0,r.jsx)(n.td,{children:"Log changes (0=no, 1=yes)"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"0"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"COD_MENU"})}),(0,r.jsx)(n.td,{children:"varchar(40)"}),(0,r.jsx)(n.td,{children:"Security area (optional)"}),(0,r.jsxs)(n.td,{children:["``, ",(0,r.jsx)(n.code,{children:"artwork-2"})]})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"MARKET"})}),(0,r.jsx)(n.td,{children:"int(11)"}),(0,r.jsx)(n.td,{children:"Multi-tenant identifier"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"0"})})]})]})]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Example:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sql",children:"SELECT COD_COST, DESC_COST, TIPO_CAMPO, COD_ON_OFF, CHECK_CAMPO, COD_SEQUENZA\nFROM TB_COST\nWHERE COD_DIM = 'ART'\nORDER BY COD_SEQUENZA;\n\n-- Sample results:\n-- XART01 | amb           | text|11               | I           |              | 1\n-- XART02 | amb_rif       | text|11               | I           |              | 2\n-- XART03 | Code          | counter|ART           | L,N,M,D     | not null     | 3\n-- XART04 | Title         | text|200              | L,N,M,D,R   |              | 5\n-- XART05 | Medium        | VARS|CL1||XCL103|...  | L,N,M,D,R   |              | 10\n-- XART21 | Image         | file|img|png,jpg|...  | N,M,D,L     |              | 6\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Field Naming Convention:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Internal fields (hidden): ",(0,r.jsx)(n.code,{children:"XDIM01"}),", ",(0,r.jsx)(n.code,{children:"XDIM02"})," - ambiente tracking"]}),"\n",(0,r.jsxs)(n.li,{children:["Business fields: ",(0,r.jsx)(n.code,{children:"XDIM03+"})," - actual data fields"]}),"\n",(0,r.jsxs)(n.li,{children:["Format: ",(0,r.jsx)(n.code,{children:"X{DIM}{NN}"})," where NN is sequential number"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"TIPO_CAMPO Format Examples:"})}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"TIPO_CAMPO"}),(0,r.jsx)(n.th,{children:"Meaning"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"text|200"})}),(0,r.jsx)(n.td,{children:"Text field, max 200 chars"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"text|11"})}),(0,r.jsx)(n.td,{children:"Short text (11 chars)"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"int"})}),(0,r.jsx)(n.td,{children:"Integer number"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"prezzo|11,2"})}),(0,r.jsx)(n.td,{children:"Decimal with 11 digits, 2 decimal places"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"counter|ART"})}),(0,r.jsx)(n.td,{children:"Auto-generated counter for ART dimension"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"VARS|CL1||XCL103|XCL104"})}),(0,r.jsx)(n.td,{children:"Dropdown from CL1 dimension, display XCL103 code and XCL104 description"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"AC|AUTHOR||XAUTHOR03|XAUTHOR04"})}),(0,r.jsx)(n.td,{children:"Autocomplete from AUTHOR dimension"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"PROP|ARTIMG|XART03|XARTIMG04"})}),(0,r.jsx)(n.td,{children:"Properties (child records) from ARTIMG linked by XART03"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"file|img|png,jpg|public|2"})}),(0,r.jsx)(n.td,{children:"Image file, types png/jpg, public bucket, max 2MB"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"check"})}),(0,r.jsx)(n.td,{children:"Checkbox (boolean)"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"combo|cm|in"})}),(0,r.jsx)(n.td,{children:"Dropdown with options: cm, in"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"DATE"})}),(0,r.jsx)(n.td,{children:"Date field (YYYYMMDD)"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"DATETIME"})}),(0,r.jsx)(n.td,{children:"DateTime field (YYYYMMDDHHIISS)"})]})]})]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"COD_ON_OFF Values:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"L"})," = List view"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"D"})," = Detail view"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"N"})," = New/Create form"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"M"})," = Modify/Edit form"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"R"})," = Search/Ricerca form"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"S"})," = (Reserved for future use)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"I"})," = Internal (hidden from all contexts)"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Usage in Core APIs:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"CoreQuery:"})," Loads TB_COST to build SELECT clause with visible fields"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"CoreWrite:"})," Loads TB_COST to validate field types, required fields, and execute pre-insert functions"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Field metadata endpoint:"})," Returns TB_COST filtered by ",(0,r.jsx)(n.code,{children:"center_dett"})," context"]}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"3-tb_type_fields---field-type-definitions",children:"3. TB_TYPE_FIELDS - Field Type Definitions"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Purpose:"})," Defines all available field types that can be used in TB_COST.TIPO_CAMPO."]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Schema:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sql",children:"CREATE TABLE `TB_TYPE_FIELDS` (\n  `OWNER` varchar(20) DEFAULT '',\n  `CDATA` varchar(14) DEFAULT '',\n  `LOWNER` varchar(20) DEFAULT '',\n  `LDATA` varchar(14) DEFAULT '',\n  `TIMESTAMP` varchar(20) DEFAULT '',\n  `TREC` varchar(1) DEFAULT '',\n  `TYPE_FIELD` varchar(90) NOT NULL DEFAULT '',\n  `TYPE_FIELD_DB` varchar(40) DEFAULT '',\n  `NOTE_TYPE_FIELD` varchar(255) DEFAULT '',\n  `NUM_PARAMS` int(3) DEFAULT '0',\n  `LIST_PARAMS` varchar(255) DEFAULT '',\n  PRIMARY KEY (`TYPE_FIELD`)\n) ENGINE=InnoDB DEFAULT CHARSET=utf8;\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Key Fields:"})}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Field"}),(0,r.jsx)(n.th,{children:"Type"}),(0,r.jsx)(n.th,{children:"Purpose"}),(0,r.jsx)(n.th,{children:"Example"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"TYPE_FIELD"})}),(0,r.jsx)(n.td,{children:"varchar(90)"}),(0,r.jsxs)(n.td,{children:[(0,r.jsx)(n.strong,{children:"Type identifier"})," (primary key)"]}),(0,r.jsxs)(n.td,{children:[(0,r.jsx)(n.code,{children:"text"}),", ",(0,r.jsx)(n.code,{children:"int"}),", ",(0,r.jsx)(n.code,{children:"AC"}),", ",(0,r.jsx)(n.code,{children:"VARS"})]})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"TYPE_FIELD_DB"})}),(0,r.jsx)(n.td,{children:"varchar(40)"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"Database type"})}),(0,r.jsxs)(n.td,{children:[(0,r.jsx)(n.code,{children:"VARCHAR"}),", ",(0,r.jsx)(n.code,{children:"INT"}),", ",(0,r.jsx)(n.code,{children:"DECIMAL"})]})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"NOTE_TYPE_FIELD"})}),(0,r.jsx)(n.td,{children:"varchar(255)"}),(0,r.jsx)(n.td,{children:"Description"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"Short text field"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"NUM_PARAMS"})}),(0,r.jsx)(n.td,{children:"int(3)"}),(0,r.jsx)(n.td,{children:"Number of parameters"}),(0,r.jsxs)(n.td,{children:[(0,r.jsx)(n.code,{children:"1"})," for ",(0,r.jsx)(n.code,{children:"text|255"})]})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"LIST_PARAMS"})}),(0,r.jsx)(n.td,{children:"varchar(255)"}),(0,r.jsx)(n.td,{children:"Parameter definitions"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"length"})})]})]})]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Common Field Types:"})}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"TYPE_FIELD"}),(0,r.jsx)(n.th,{children:"Purpose"}),(0,r.jsx)(n.th,{children:"Example Usage in TIPO_CAMPO"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"text"})}),(0,r.jsx)(n.td,{children:"Short text (varchar)"}),(0,r.jsxs)(n.td,{children:[(0,r.jsx)(n.code,{children:"text|200"})," - max 200 chars"]})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"int"})}),(0,r.jsx)(n.td,{children:"Integer number"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"int"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"prezzo"})}),(0,r.jsx)(n.td,{children:"Price/decimal"}),(0,r.jsxs)(n.td,{children:[(0,r.jsx)(n.code,{children:"prezzo|11,2"})," - 11 digits, 2 decimal"]})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"counter"})}),(0,r.jsx)(n.td,{children:"Auto-generated sequential ID"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"counter|ART"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"DATE"})}),(0,r.jsx)(n.td,{children:"Date field"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"DATE"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"DATETIME"})}),(0,r.jsx)(n.td,{children:"Date and time"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"DATETIME"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"check"})}),(0,r.jsx)(n.td,{children:"Checkbox (boolean)"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"check"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"combo"})}),(0,r.jsx)(n.td,{children:"Dropdown/select"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"combo|option1|option2|option3"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"AC"})}),(0,r.jsx)(n.td,{children:"Autocomplete from dimension"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"AC|DIM|filter|codeField|descField"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"VARS"})}),(0,r.jsx)(n.td,{children:"Dropdown from dimension"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"VARS|DIM|filter|codeField|descField"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"PROP"})}),(0,r.jsx)(n.td,{children:"Properties/child records"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"PROP|ChildDim|ParentKey|ChildKey|"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"file"})}),(0,r.jsx)(n.td,{children:"File upload"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"file|img|png,jpg|public|2"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"password"})}),(0,r.jsx)(n.td,{children:"Encrypted password field"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"password"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"uuid"})}),(0,r.jsx)(n.td,{children:"UUID identifier"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"uuid"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"qty"})}),(0,r.jsx)(n.td,{children:"Quantity"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"qty"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"perc"})}),(0,r.jsx)(n.td,{children:"Percentage"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"perc"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"TIME"})}),(0,r.jsx)(n.td,{children:"Time only"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"TIME"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"mappa"})}),(0,r.jsx)(n.td,{children:"Map/location field"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"mappa"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"sqlBuilder"})}),(0,r.jsx)(n.td,{children:"SQL query builder"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"sqlBuilder"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"textarea"})}),(0,r.jsx)(n.td,{children:"Long text"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"textarea"})})]})]})]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Usage in Core APIs:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"CoreQuery:"})," Determines how to render fields in UI"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"CoreWrite:"})," Validates field values based on type rules"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Field metadata endpoints:"})," Returns field type information for form generation"]}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"4-tb_menu---security-areas--navigation",children:"4. TB_MENU - Security Areas & Navigation"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Purpose:"})," Hierarchical menu/security structure using ",(0,r.jsx)(n.strong,{children:"nested set model"}),"."]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Schema:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sql",children:"CREATE TABLE `TB_MENU` (\n  `COD_MENU` varchar(40) NOT NULL DEFAULT '',\n  `OWNER` varchar(20) DEFAULT '',\n  `CDATA` varchar(14) DEFAULT '',\n  `LOWNER` varchar(20) DEFAULT '',\n  `LDATA` varchar(14) DEFAULT '',\n  `TIMESTAMP` varchar(20) DEFAULT '',\n  `TREC` varchar(1) DEFAULT '',\n  `NOME_GRANT` varchar(20) DEFAULT '',\n  `KEY_FIELD` varchar(100) DEFAULT '',\n  `MARKET` int(1) DEFAULT '0',\n  `MICROSERVICE` varchar(100) DEFAULT '',\n  `DESC_AREA` varchar(150) DEFAULT '',\n  `HELP` mediumtext,\n  `FLAG_OFFLINE` int(1) DEFAULT '0',\n  `DIM_COD` varchar(50) DEFAULT '',\n  `CHECK_TRANSLATE` int(1) DEFAULT '0',\n  `COD_SEQUENZA` int(11) DEFAULT '0',\n  `ROUTE` varchar(50) DEFAULT '',\n  `ENDPOINTS` mediumtext,\n  `MODULO` varchar(100) DEFAULT '',\n  `PADRE_ID` varchar(30) DEFAULT '0',\n  `NLEVEL` int(11) DEFAULT '0',\n  `NLEFT` int(11) DEFAULT '0',\n  `NRIGHT` int(11) DEFAULT '0',\n  `DUPLICA` int(1) DEFAULT '0',\n  `FLAG_PALM` int(1) DEFAULT '0',\n  UNIQUE KEY `TB_MENU_UN` (`COD_MENU`,`MARKET`),\n  KEY `IDX_MICROSERVICEMENU` (`MICROSERVICE`),\n  KEY `IDX_DIMCODMENU` (`DIM_COD`)\n) ENGINE=InnoDB DEFAULT CHARSET=utf8;\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Key Fields:"})}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Field"}),(0,r.jsx)(n.th,{children:"Type"}),(0,r.jsx)(n.th,{children:"Purpose"}),(0,r.jsx)(n.th,{children:"Example"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"COD_MENU"})}),(0,r.jsx)(n.td,{children:"varchar(40)"}),(0,r.jsxs)(n.td,{children:[(0,r.jsx)(n.strong,{children:"Menu code"}),' (used as "source" parameter)']}),(0,r.jsxs)(n.td,{children:[(0,r.jsx)(n.code,{children:"artwork-2"}),", ",(0,r.jsx)(n.code,{children:"product-list"})]})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"DESC_AREA"})}),(0,r.jsx)(n.td,{children:"varchar(150)"}),(0,r.jsx)(n.td,{children:"Menu description"}),(0,r.jsxs)(n.td,{children:[(0,r.jsx)(n.code,{children:"Artworks"}),", ",(0,r.jsx)(n.code,{children:"Products"})]})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"DIM_COD"})}),(0,r.jsx)(n.td,{children:"varchar(50)"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"Associated dimension"})}),(0,r.jsxs)(n.td,{children:[(0,r.jsx)(n.code,{children:"ART"}),", ",(0,r.jsx)(n.code,{children:"PRD"})]})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"MICROSERVICE"})}),(0,r.jsx)(n.td,{children:"varchar(100)"}),(0,r.jsx)(n.td,{children:"Owning microservice"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"msartwork-4606e125"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"ROUTE"})}),(0,r.jsx)(n.td,{children:"varchar(50)"}),(0,r.jsx)(n.td,{children:"Frontend route"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"/artwork/artwork"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"ENDPOINTS"})}),(0,r.jsx)(n.td,{children:"mediumtext"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"JSON mapping microservices to dimensions"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:'{"msartwork":["ART","ARTIMG"]}'})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"MODULO"})}),(0,r.jsx)(n.td,{children:"varchar(100)"}),(0,r.jsx)(n.td,{children:"Module context"}),(0,r.jsx)(n.td,{children:"`` (empty for default)"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"PADRE_ID"})}),(0,r.jsx)(n.td,{children:"varchar(30)"}),(0,r.jsx)(n.td,{children:"Parent menu ID (nested set)"}),(0,r.jsxs)(n.td,{children:[(0,r.jsx)(n.code,{children:"artwork-1"}),", ",(0,r.jsx)(n.code,{children:"0"})," (root)"]})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"NLEVEL"})}),(0,r.jsx)(n.td,{children:"int(11)"}),(0,r.jsxs)(n.td,{children:[(0,r.jsx)(n.strong,{children:"Tree depth"})," (1=root, 2=child, 3=grandchild)"]}),(0,r.jsxs)(n.td,{children:[(0,r.jsx)(n.code,{children:"1"}),", ",(0,r.jsx)(n.code,{children:"2"})]})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"NLEFT"})}),(0,r.jsx)(n.td,{children:"int(11)"}),(0,r.jsxs)(n.td,{children:[(0,r.jsx)(n.strong,{children:"Left boundary"})," (nested set)"]}),(0,r.jsxs)(n.td,{children:[(0,r.jsx)(n.code,{children:"1"}),", ",(0,r.jsx)(n.code,{children:"5"})]})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"NRIGHT"})}),(0,r.jsx)(n.td,{children:"int(11)"}),(0,r.jsxs)(n.td,{children:[(0,r.jsx)(n.strong,{children:"Right boundary"})," (nested set)"]}),(0,r.jsxs)(n.td,{children:[(0,r.jsx)(n.code,{children:"4"}),", ",(0,r.jsx)(n.code,{children:"6"})]})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"NOME_GRANT"})}),(0,r.jsx)(n.td,{children:"varchar(20)"}),(0,r.jsx)(n.td,{children:"Grant name (optional)"}),(0,r.jsx)(n.td,{children:"``"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"KEY_FIELD"})}),(0,r.jsx)(n.td,{children:"varchar(100)"}),(0,r.jsx)(n.td,{children:"Key field (optional)"}),(0,r.jsx)(n.td,{children:"``"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"COD_SEQUENZA"})}),(0,r.jsx)(n.td,{children:"int(11)"}),(0,r.jsx)(n.td,{children:"Display order"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"1"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"FLAG_OFFLINE"})}),(0,r.jsx)(n.td,{children:"int(1)"}),(0,r.jsx)(n.td,{children:"Offline mode flag (0=no, 1=yes)"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"0"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"CHECK_TRANSLATE"})}),(0,r.jsx)(n.td,{children:"int(1)"}),(0,r.jsx)(n.td,{children:"Translate (0=no, 1=yes)"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"0"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"DUPLICA"})}),(0,r.jsx)(n.td,{children:"int(1)"}),(0,r.jsx)(n.td,{children:"Duplicate flag (0=no, 1=yes)"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"0"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"FLAG_PALM"})}),(0,r.jsx)(n.td,{children:"int(1)"}),(0,r.jsx)(n.td,{children:"Mobile flag (0=no, 1=yes)"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"0"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"MARKET"})}),(0,r.jsx)(n.td,{children:"int(1)"}),(0,r.jsx)(n.td,{children:"Multi-tenant identifier"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"0"})})]})]})]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Example:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sql",children:"SELECT COD_MENU, DESC_AREA, DIM_COD, NLEVEL, NLEFT, NRIGHT\nFROM TB_MENU\nWHERE COD_MENU IN ('artwork-1', 'artwork-2', 'artwork-3')\nORDER BY NLEFT;\n\n-- Results:\n-- artwork-1 | Authors         | AUTHOR | 1 | 1  | 4\n-- artwork-2 | Artworks        | ART    | 1 | 5  | 6\n-- artwork-3 | Artwork images  | ARTIMG | 1 | 7  | 8\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"ENDPOINTS JSON Format:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "msartgallery": ["GALLERY", "AUTHOR", "ART", "ARTIMG"],\n  "msartwork": ["GALLERY", "AUTHOR", "ART", "ARTIMG"],\n  "msartntf": ["GALLERY", "AUTHOR", "ART", "ARTIMG"]\n}\n'})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Usage in Core APIs:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"source"})," parameter in requests maps to ",(0,r.jsx)(n.code,{children:"COD_MENU"})]}),"\n",(0,r.jsx)(n.li,{children:"Permission validation checks if user has access to this security area"}),"\n",(0,r.jsx)(n.li,{children:"Nested set queries to find all children/descendants"}),"\n",(0,r.jsx)(n.li,{children:"ENDPOINTS JSON determines which dimensions this security area can access"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Nested Set Queries:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sql",children:"-- Find all descendants of a menu\nSELECT child.*\nFROM TB_MENU parent\nJOIN TB_MENU child ON child.NLEFT BETWEEN parent.NLEFT AND parent.NRIGHT\nWHERE parent.COD_MENU = 'artwork-1';\n\n-- Find all ancestors of a menu\nSELECT parent.*\nFROM TB_MENU parent\nJOIN TB_MENU child ON child.NLEFT BETWEEN parent.NLEFT AND parent.NRIGHT\nWHERE child.COD_MENU = 'artwork-2';\n"})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"5-tb_object---views-and-hierarchies",children:"5. TB_OBJECT - Views and Hierarchies"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Purpose:"})," Defines views and hierarchical object structures (TYPE_OBJ: 0=base table, 1=view, 2=select-of-selects)."]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Schema:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sql",children:"CREATE TABLE `TB_OBJECT` (\n  `OBJ_ID` int(11) NOT NULL AUTO_INCREMENT,\n  `OWNER` varchar(20) DEFAULT '',\n  `CDATA` varchar(14) DEFAULT '',\n  `LOWNER` varchar(20) DEFAULT '',\n  `LDATA` varchar(14) DEFAULT '',\n  `TIMESTAMP` varchar(20) DEFAULT '',\n  `TREC` varchar(1) DEFAULT '',\n  `NAME_OBJ` varchar(100) DEFAULT '',\n  `COD_DIM` varchar(50) DEFAULT '',\n  `TYPE_OBJ` int(3) DEFAULT '0',\n  `VIEW_SCHEMA` text,\n  `MARKET` int(3) DEFAULT '0',\n  PRIMARY KEY (`OBJ_ID`),\n  UNIQUE KEY `IDX_NAME_OBJ` (`NAME_OBJ`,`MARKET`),\n  KEY `IDX_NAMEOBJ` (`NAME_OBJ`),\n  KEY `IDX_MARKETOBJ` (`MARKET`)\n) ENGINE=InnoDB DEFAULT CHARSET=utf8;\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Key Fields:"})}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Field"}),(0,r.jsx)(n.th,{children:"Type"}),(0,r.jsx)(n.th,{children:"Purpose"}),(0,r.jsx)(n.th,{children:"Example"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"OBJ_ID"})}),(0,r.jsx)(n.td,{children:"int(11)"}),(0,r.jsx)(n.td,{children:"Auto-increment primary key"}),(0,r.jsxs)(n.td,{children:[(0,r.jsx)(n.code,{children:"1"}),", ",(0,r.jsx)(n.code,{children:"2"}),", ",(0,r.jsx)(n.code,{children:"3"})]})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"NAME_OBJ"})}),(0,r.jsx)(n.td,{children:"varchar(100)"}),(0,r.jsxs)(n.td,{children:[(0,r.jsx)(n.strong,{children:"Object name"})," (usually table name)"]}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"TB_ANAG_ART00"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"COD_DIM"})}),(0,r.jsx)(n.td,{children:"varchar(50)"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"Associated dimension"})}),(0,r.jsxs)(n.td,{children:[(0,r.jsx)(n.code,{children:"ART"}),", ",(0,r.jsx)(n.code,{children:"ARTIMG"})]})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"TYPE_OBJ"})}),(0,r.jsx)(n.td,{children:"int(3)"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"Object type"})}),(0,r.jsxs)(n.td,{children:[(0,r.jsx)(n.code,{children:"0"})," (table), ",(0,r.jsx)(n.code,{children:"1"})," (view), ",(0,r.jsx)(n.code,{children:"2"})," (select-of-selects)"]})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"VIEW_SCHEMA"})}),(0,r.jsx)(n.td,{children:"text"}),(0,r.jsxs)(n.td,{children:[(0,r.jsx)(n.strong,{children:"View definition"})," (JSON/SQL for TYPE_OBJ=1/2)"]}),(0,r.jsx)(n.td,{children:"`` (empty for TYPE_OBJ=0)"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"MARKET"})}),(0,r.jsx)(n.td,{children:"int(3)"}),(0,r.jsx)(n.td,{children:"Multi-tenant identifier"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"0"})})]})]})]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Example:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sql",children:"SELECT OBJ_ID, NAME_OBJ, COD_DIM, TYPE_OBJ\nFROM TB_OBJECT\nWHERE COD_DIM IN ('ART', 'ARTIMG', 'CL1');\n\n-- Results:\n-- OBJ_ID | NAME_OBJ          | COD_DIM | TYPE_OBJ\n-- 1      | TB_ANAG_ART00     | ART     | 0\n-- 2      | TB_ANAG_ARTIMG00  | ARTIMG  | 0\n-- 3      | TB_ANAG_CL100     | CL1     | 0\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"TYPE_OBJ Values:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"0"})," = Base table (standard dimension)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"1"})," = View (virtual table defined in VIEW_SCHEMA)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"2"})," = Select-of-selects (complex query combining multiple views)"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"VIEW_SCHEMA Format (TYPE_OBJ=1):"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "select": "a.*, c.DESC_CATEGORY",\n  "from": "TB_ANAG_ART00 a",\n  "join": [\n    {\n      "type": "LEFT JOIN",\n      "table": "TB_ANAG_CATEGORY00 c",\n      "on": "a.XART_CATEGORY = c.CATEGORY_ID"\n    }\n  ],\n  "where": "a.TREC != \'C\'"\n}\n'})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Usage in Core APIs:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"TB_DIM references TB_OBJECT via NAME_OBJ"}),"\n",(0,r.jsx)(n.li,{children:"TYPE_OBJ determines query construction strategy"}),"\n",(0,r.jsx)(n.li,{children:"VIEW_SCHEMA provides view definition for complex queries"}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"6-tb_counter---sequential-identifiers",children:"6. TB_COUNTER - Sequential Identifiers"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Purpose:"})," Configures automatic counter generation for business identifiers."]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Schema:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sql",children:"CREATE TABLE `TB_COUNTER` (\n  `COUNTER_ID` int(11) NOT NULL AUTO_INCREMENT,\n  `OWNER` varchar(20) DEFAULT '',\n  `CDATA` varchar(14) DEFAULT '',\n  `LOWNER` varchar(20) DEFAULT '',\n  `LDATA` varchar(14) DEFAULT '',\n  `TIMESTAMP` varchar(20) DEFAULT '',\n  `TREC` varchar(1) DEFAULT '',\n  `NAME_OBJ` varchar(100) DEFAULT '',\n  `FIELD_TYPE` varchar(50) DEFAULT '',\n  `FIELD_KEY` varchar(50) DEFAULT '',\n  `COUNTER_SQL` text,\n  `COUNTER_FORMAT` text,\n  `COUNTER_INITVAL` int(11) DEFAULT NULL,\n  `MARKET` int(3) DEFAULT '0',\n  `COD_DIM` varchar(50) DEFAULT NULL,\n  PRIMARY KEY (`COUNTER_ID`),\n  UNIQUE KEY `IDX_NAME_OBJ_FIELD_KEY_MARKET` (`NAME_OBJ`,`FIELD_KEY`,`MARKET`),\n  KEY `IDX_NAMEOBJCOUNTER` (`NAME_OBJ`),\n  KEY `FIELD_KEYCOUNTER` (`FIELD_KEY`),\n  KEY `IDX_MARKETCOUNTER` (`MARKET`)\n) ENGINE=InnoDB DEFAULT CHARSET=utf8;\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Key Fields:"})}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Field"}),(0,r.jsx)(n.th,{children:"Type"}),(0,r.jsx)(n.th,{children:"Purpose"}),(0,r.jsx)(n.th,{children:"Example"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"COUNTER_ID"})}),(0,r.jsx)(n.td,{children:"int(11)"}),(0,r.jsx)(n.td,{children:"Auto-increment primary key"}),(0,r.jsxs)(n.td,{children:[(0,r.jsx)(n.code,{children:"1"}),", ",(0,r.jsx)(n.code,{children:"2"}),", ",(0,r.jsx)(n.code,{children:"3"})]})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"NAME_OBJ"})}),(0,r.jsx)(n.td,{children:"varchar(100)"}),(0,r.jsx)(n.td,{children:"Object name (table)"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"TB_ANAG_ART00"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"FIELD_TYPE"})}),(0,r.jsx)(n.td,{children:"varchar(50)"}),(0,r.jsx)(n.td,{children:"Field type"}),(0,r.jsx)(n.td,{children:"``"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"FIELD_KEY"})}),(0,r.jsx)(n.td,{children:"varchar(50)"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"Field to populate"})}),(0,r.jsxs)(n.td,{children:[(0,r.jsx)(n.code,{children:"XART03"}),", ",(0,r.jsx)(n.code,{children:"XARTIMG03"})]})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"COD_DIM"})}),(0,r.jsx)(n.td,{children:"varchar(50)"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"Dimension"})}),(0,r.jsxs)(n.td,{children:[(0,r.jsx)(n.code,{children:"ART"}),", ",(0,r.jsx)(n.code,{children:"ARTIMG"})]})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"COUNTER_SQL"})}),(0,r.jsx)(n.td,{children:"text"}),(0,r.jsxs)(n.td,{children:[(0,r.jsx)(n.strong,{children:"SQL config"})," (JSON query definition)"]}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:'{"filter": "..."}'})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"COUNTER_FORMAT"})}),(0,r.jsx)(n.td,{children:"text"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"Format template"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"ART-%year%-%month%-#NEXT#"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"COUNTER_INITVAL"})}),(0,r.jsx)(n.td,{children:"int(11)"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"Starting value"})}),(0,r.jsxs)(n.td,{children:[(0,r.jsx)(n.code,{children:"1"}),", ",(0,r.jsx)(n.code,{children:"1000"})]})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"MARKET"})}),(0,r.jsx)(n.td,{children:"int(3)"}),(0,r.jsx)(n.td,{children:"Multi-tenant identifier"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"0"})})]})]})]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"COUNTER_FORMAT Placeholders:"})}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Placeholder"}),(0,r.jsx)(n.th,{children:"Replacement"}),(0,r.jsx)(n.th,{children:"Example"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"%year%"})}),(0,r.jsx)(n.td,{children:"Current year (4 digits)"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"2025"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"%month%"})}),(0,r.jsx)(n.td,{children:"Current month (01-12)"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"12"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"%day%"})}),(0,r.jsx)(n.td,{children:"Current day (01-31)"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"19"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"#NEXT#"})}),(0,r.jsx)(n.td,{children:"Next sequential number"}),(0,r.jsxs)(n.td,{children:[(0,r.jsx)(n.code,{children:"00001"}),", ",(0,r.jsx)(n.code,{children:"00123"})]})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"@session@"})}),(0,r.jsx)(n.td,{children:"Session-specific value"}),(0,r.jsx)(n.td,{children:"User ID, tenant ID"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"__body__"})}),(0,r.jsx)(n.td,{children:"Value from request body"}),(0,r.jsx)(n.td,{children:"Field from POST data"})]})]})]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Example:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sql",children:"-- Counter configuration for ART dimension\nSELECT NAME_OBJ, FIELD_KEY, COD_DIM, COUNTER_FORMAT\nFROM TB_COUNTER\nWHERE COD_DIM = 'ART';\n\n-- Result:\n-- NAME_OBJ: TB_ANAG_ART00\n-- FIELD_KEY: XART03\n-- COD_DIM: ART\n-- COUNTER_FORMAT: ART-%year%-%month%-#NEXT#\n\n-- Generated values:\n-- ART-2025-12-00001\n-- ART-2025-12-00002\n-- ART-2025-12-00003\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"COUNTER_SQL Format:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "filter": "XART_CATEGORY = \'paintings\'"\n}\n'})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Usage in Core APIs:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["CoreWrite checks TB_COST.TIPO_CAMPO for ",(0,r.jsx)(n.code,{children:"counter|{DIM}"})," pattern"]}),"\n",(0,r.jsx)(n.li,{children:"Loads TB_COUNTER configuration for the dimension and field"}),"\n",(0,r.jsxs)(n.li,{children:["Executes counter generation with ",(0,r.jsx)(n.code,{children:"FOR UPDATE"})," lock"]}),"\n",(0,r.jsx)(n.li,{children:"Formats value using COUNTER_FORMAT template"}),"\n",(0,r.jsx)(n.li,{children:"Stores counter value in TB_ANAG_COUNT00"}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"7-tb_index---index-definitions",children:"7. TB_INDEX - Index Definitions"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Purpose:"})," Defines database indexes for dimensions (unique constraints, composite indexes, performance optimization)."]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Schema:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sql",children:"CREATE TABLE `TB_INDEX` (\n  `OWNER` varchar(20) DEFAULT '',\n  `CDATA` varchar(14) DEFAULT '',\n  `LOWNER` varchar(20) DEFAULT '',\n  `LDATA` varchar(14) DEFAULT '',\n  `TIMESTAMP` varchar(20) DEFAULT '',\n  `TREC` varchar(1) DEFAULT '',\n  `NAME_IDX` varchar(150) NOT NULL DEFAULT '',\n  `COD_DIM` varchar(50) NOT NULL DEFAULT '',\n  `CODICE_IDX` varchar(40) NOT NULL DEFAULT '',\n  `UNIQUE_IDX` int(1) DEFAULT '0',\n  `SEQUENCE_IDX` int(3) DEFAULT '0',\n  `ORDER_IDX` varchar(10) DEFAULT '',\n  `TYPE_IDX` varchar(40) DEFAULT '',\n  `SUBSTR_IDX` varchar(20) DEFAULT '',\n  `APPLY_IDX` int(3) DEFAULT '0',\n  `MARKET` int(11) DEFAULT '0',\n  UNIQUE KEY `IDX_INDEX` (`NAME_IDX`,`CODICE_IDX`,`MARKET`)\n) ENGINE=InnoDB DEFAULT CHARSET=utf8;\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Key Fields:"})}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Field"}),(0,r.jsx)(n.th,{children:"Type"}),(0,r.jsx)(n.th,{children:"Purpose"}),(0,r.jsx)(n.th,{children:"Example"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"NAME_IDX"})}),(0,r.jsx)(n.td,{children:"varchar(150)"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"Index name"})}),(0,r.jsxs)(n.td,{children:[(0,r.jsx)(n.code,{children:"IDX_XART03"}),", ",(0,r.jsx)(n.code,{children:"IDX_XARTIMG03"})]})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"COD_DIM"})}),(0,r.jsx)(n.td,{children:"varchar(50)"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"Dimension"})}),(0,r.jsxs)(n.td,{children:[(0,r.jsx)(n.code,{children:"ART"}),", ",(0,r.jsx)(n.code,{children:"ARTIMG"})]})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"CODICE_IDX"})}),(0,r.jsx)(n.td,{children:"varchar(40)"}),(0,r.jsxs)(n.td,{children:[(0,r.jsx)(n.strong,{children:"Field code"})," (or first field in composite)"]}),(0,r.jsxs)(n.td,{children:[(0,r.jsx)(n.code,{children:"XART03"}),", ",(0,r.jsx)(n.code,{children:"XARTIMG03"})]})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"UNIQUE_IDX"})}),(0,r.jsx)(n.td,{children:"int(1)"}),(0,r.jsxs)(n.td,{children:[(0,r.jsx)(n.strong,{children:"Unique constraint"})," (0=no, 1=yes)"]}),(0,r.jsxs)(n.td,{children:[(0,r.jsx)(n.code,{children:"1"})," (unique), ",(0,r.jsx)(n.code,{children:"0"})," (index)"]})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"SEQUENCE_IDX"})}),(0,r.jsx)(n.td,{children:"int(3)"}),(0,r.jsxs)(n.td,{children:[(0,r.jsx)(n.strong,{children:"Order in composite index"})," (1, 2, 3...)"]}),(0,r.jsxs)(n.td,{children:[(0,r.jsx)(n.code,{children:"1"})," (first field), ",(0,r.jsx)(n.code,{children:"2"})," (second)"]})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"ORDER_IDX"})}),(0,r.jsx)(n.td,{children:"varchar(10)"}),(0,r.jsxs)(n.td,{children:[(0,r.jsx)(n.strong,{children:"Sort order"})," (ASC/DESC)"]}),(0,r.jsxs)(n.td,{children:["``, ",(0,r.jsx)(n.code,{children:"ASC"}),", ",(0,r.jsx)(n.code,{children:"DESC"})]})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"TYPE_IDX"})}),(0,r.jsx)(n.td,{children:"varchar(40)"}),(0,r.jsx)(n.td,{children:"Index type"}),(0,r.jsxs)(n.td,{children:["`` (standard), ",(0,r.jsx)(n.code,{children:"FULLTEXT"}),", ",(0,r.jsx)(n.code,{children:"SPATIAL"})]})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"SUBSTR_IDX"})}),(0,r.jsx)(n.td,{children:"varchar(20)"}),(0,r.jsx)(n.td,{children:"Substring index (e.g., first 10 chars)"}),(0,r.jsxs)(n.td,{children:["`` (full), ",(0,r.jsx)(n.code,{children:"10"})]})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"APPLY_IDX"})}),(0,r.jsx)(n.td,{children:"int(3)"}),(0,r.jsx)(n.td,{children:"Apply index (0=no, 1=yes)"}),(0,r.jsxs)(n.td,{children:[(0,r.jsx)(n.code,{children:"0"})," (not applied), ",(0,r.jsx)(n.code,{children:"1"})," (applied)"]})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"MARKET"})}),(0,r.jsx)(n.td,{children:"int(11)"}),(0,r.jsx)(n.td,{children:"Multi-tenant identifier"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"0"})})]})]})]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Example:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sql",children:"SELECT NAME_IDX, COD_DIM, CODICE_IDX, UNIQUE_IDX, SEQUENCE_IDX\nFROM TB_INDEX\nWHERE COD_DIM IN ('ART', 'ARTIMG', 'CL1')\nORDER BY COD_DIM, NAME_IDX, SEQUENCE_IDX;\n\n-- Results:\n-- NAME_IDX        | COD_DIM | CODICE_IDX | UNIQUE_IDX | SEQUENCE_IDX\n-- IDX_XART03      | ART     | XART03     | 1          | 1\n-- IDX_XARTIMG03   | ARTIMG  | XARTIMG03  | 1          | 1\n-- IDX_XCL103      | CL1     | XCL103     | 1          | 1\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Index Types:"})}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.strong,{children:"Simple Unique Index:"})}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"NAME_IDX: IDX_XART03\nCOD_DIM: ART\nCODICE_IDX: XART03\nUNIQUE_IDX: 1\nSEQUENCE_IDX: 1\n"})}),"\n",(0,r.jsxs)(n.p,{children:["Generates: ",(0,r.jsx)(n.code,{children:"CREATE UNIQUE INDEX IDX_XART03 ON TB_ANAG_ART00 (XART03)"})]}),"\n",(0,r.jsxs)(n.ol,{start:"2",children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.strong,{children:"Composite Index:"})}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"-- First field\nNAME_IDX: IDX_ART_CATEGORY_STATUS\nCOD_DIM: ART\nCODICE_IDX: XART_CATEGORY\nUNIQUE_IDX: 0\nSEQUENCE_IDX: 1\n\n-- Second field\nNAME_IDX: IDX_ART_CATEGORY_STATUS\nCOD_DIM: ART\nCODICE_IDX: XART_STATUS\nUNIQUE_IDX: 0\nSEQUENCE_IDX: 2\n"})}),"\n",(0,r.jsxs)(n.p,{children:["Generates: ",(0,r.jsx)(n.code,{children:"CREATE INDEX IDX_ART_CATEGORY_STATUS ON TB_ANAG_ART00 (XART_CATEGORY, XART_STATUS)"})]}),"\n",(0,r.jsxs)(n.ol,{start:"3",children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.strong,{children:"Partial/Substring Index:"})}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"NAME_IDX: IDX_XART_TITLE_PARTIAL\nCOD_DIM: ART\nCODICE_IDX: XART04\nUNIQUE_IDX: 0\nSEQUENCE_IDX: 1\nSUBSTR_IDX: 50\n"})}),"\n",(0,r.jsxs)(n.p,{children:["Generates: ",(0,r.jsx)(n.code,{children:"CREATE INDEX IDX_XART_TITLE_PARTIAL ON TB_ANAG_ART00 (XART04(50))"})]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Usage in Core APIs:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"CoreWrite loads TB_INDEX before creating dimension tables"}),"\n",(0,r.jsxs)(n.li,{children:["Generates ",(0,r.jsx)(n.code,{children:"CREATE INDEX"})," statements based on metadata"]}),"\n",(0,r.jsx)(n.li,{children:"Validates unique constraints during INSERT/UPDATE"}),"\n",(0,r.jsx)(n.li,{children:"Optimizes queries using defined indexes"}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"how-map-tables-work-together",children:"How MAP Tables Work Together"}),"\n",(0,r.jsx)(n.h3,{id:"complete-example-art-dimension",children:"Complete Example: ART Dimension"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"1. TB_DIM Registration:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sql",children:"INSERT INTO TB_DIM (COD_DIM, DESC_DIM, TABLE_NAME_PUB, COD_ANAG, COD_ELEM_BASE, COD_COD_ANAG)\nVALUES ('ART', 'Artwork', 'TB_ANAG_ART00', 'TB_ANAG_ART00', 'ART00', 'ART_ID');\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"2. TB_OBJECT Registration:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sql",children:"INSERT INTO TB_OBJECT (NAME_OBJ, COD_DIM, TYPE_OBJ, VIEW_SCHEMA)\nVALUES ('TB_ANAG_ART00', 'ART', 0, '');\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"3. TB_COST Field Definitions:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sql",children:"-- Internal fields (hidden)\nINSERT INTO TB_COST (COD_DIM, COD_COST, DESC_COST, TIPO_CAMPO, COD_ON_OFF, COD_SEQUENZA)\nVALUES\n('ART', 'XART01', 'amb', 'text|11', 'I', 1),\n('ART', 'XART02', 'amb_rif', 'text|11', 'I', 2);\n\n-- Business fields\nINSERT INTO TB_COST (COD_DIM, COD_COST, DESC_COST, TIPO_CAMPO, COD_ON_OFF, CHECK_CAMPO, COD_SEQUENZA)\nVALUES\n('ART', 'XART03', 'Code', 'counter|ART', 'L,N,M,D', 'not null', 3),\n('ART', 'XART04', 'Title', 'text|200', 'L,N,M,D,R', '', 5),\n('ART', 'XART05', 'Medium', 'VARS|CL1||XCL103|XCL104', 'L,N,M,D,R', '', 10),\n('ART', 'XART21', 'Image', 'file|img|png,jpg|public|2', 'N,M,D,L', '', 6);\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"4. TB_INDEX Definitions:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sql",children:"INSERT INTO TB_INDEX (NAME_IDX, COD_DIM, CODICE_IDX, UNIQUE_IDX, SEQUENCE_IDX)\nVALUES ('IDX_XART03', 'ART', 'XART03', 1, 1);\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"5. TB_MENU Security Area:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sql",children:"INSERT INTO TB_MENU (COD_MENU, DESC_AREA, DIM_COD, MICROSERVICE, ROUTE, NLEVEL, NLEFT, NRIGHT)\nVALUES ('artwork-2', 'Artworks', 'ART', 'msartwork-4606e125', '/artwork/artwork', 1, 5, 6);\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"6. TB_COUNTER Configuration:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sql",children:"INSERT INTO TB_COUNTER (NAME_OBJ, FIELD_KEY, COD_DIM, COUNTER_FORMAT, COUNTER_INITVAL)\nVALUES ('TB_ANAG_ART00', 'XART03', 'ART', 'ART-%year%-%month%-#NEXT#', 1);\n"})}),"\n",(0,r.jsx)(n.h3,{id:"api-request-flow",children:"API Request Flow"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Client Request:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-http",children:'POST /api/v4/core/ART\nContent-Type: application/json\nAuthorization: Bearer {token}\n\n{\n  "source": "artwork-2",\n  "XART04": "Mona Lisa",\n  "XART05": "1",\n  "XART21": {\n    "data": "data:image/jpeg;base64,...",\n    "name": "mona-lisa.jpg",\n    "type": "image/jpeg",\n    "public": true\n  }\n}\n'})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"CoreWrite Metadata Queries:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sql",children:"-- 1. Load dimension\nSELECT * FROM TB_DIM WHERE COD_DIM = 'ART';\n-- Result: TABLE_NAME_PUB = TB_ANAG_ART00, COD_COD_ANAG = ART_ID\n\n-- 2. Load fields (center_dett=nuovo)\nSELECT * FROM TB_COST\nWHERE COD_DIM = 'ART'\n  AND (contains(COD_ON_OFF,'N') OR COD_ON_OFF = 'I')\nORDER BY COD_SEQUENZA;\n-- Returns: XART01, XART02 (I), XART03 (counter), XART04, XART05, XART21\n\n-- 3. Check permissions\nSELECT * FROM TB_MENU WHERE COD_MENU = 'artwork-2';\n-- Validates: user grant, ENDPOINTS includes ART\n\n-- 4. Load counter\nSELECT * FROM TB_COUNTER\nWHERE COD_DIM = 'ART' AND FIELD_KEY = 'XART03';\n-- Format: ART-%year%-%month%-#NEXT#\n\n-- 5. Check unique index\nSELECT * FROM TB_INDEX\nWHERE COD_DIM = 'ART' AND UNIQUE_IDX = 1;\n-- XART03 is unique - validate no duplicates\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"CoreWrite Execution:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sql",children:"-- Generate counter (with lock)\nSELECT COUNTER_VALUE FROM TB_ANAG_COUNT00\nWHERE COD_DIM = 'ART' FOR UPDATE;\n-- Current: 42\n\nUPDATE TB_ANAG_COUNT00\nSET COUNTER_VALUE = 43\nWHERE COD_DIM = 'ART';\n-- Formatted: ART-2025-12-00042\n\n-- Upload image to GCS\n-- Path: {tenantId}/app.q01.io/ART/XART21/2025/12/a3f2e8d9c1b4.jpg\n\n-- Insert record\nINSERT INTO TB_ANAG_ART00 (\n  XART01, XART02, XART03, XART04, XART05, XART21,\n  OWNER, CDATA, LOWNER, LDATA, TIMESTAMP, TREC\n) VALUES (\n  'env_id', 'env_rif',\n  'ART-2025-12-00042',\n  'Mona Lisa',\n  '1',\n  '{\"bucket\": {...}, \"url\": \"/media/...\"}',\n  'user123', '20251219153042', 'user123', '20251219153042', '1734619842', 'N'\n);\n\n-- Write to outbox\nINSERT INTO TB_ANAG_OUTBOX00 (...) VALUES (...);\nCOMMIT;\n"})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"All behavior driven by MAP metadata"})," - no hardcoded logic!"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"metadata-relationships",children:"Metadata Relationships"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"TB_DIM (COD_DIM='ART')\n  \u2502\n  \u251c\u2500\u2192 TB_COST (COD_DIM='ART') - Field definitions\n  \u2502     \u2514\u2500\u2192 TB_TYPE_FIELDS (TYPE_FIELD='text', 'counter', 'VARS') - Field types\n  \u2502\n  \u251c\u2500\u2192 TB_INDEX (COD_DIM='ART') - Index definitions\n  \u2502\n  \u251c\u2500\u2192 TB_OBJECT (COD_DIM='ART') - Object registration\n  \u2502\n  \u251c\u2500\u2192 TB_MENU (DIM_COD='ART') - Security areas\n  \u2502\n  \u2514\u2500\u2192 TB_COUNTER (COD_DIM='ART') - Counter configuration\n"})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"summary",children:"Summary"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"MAP Framework"})," consists of ",(0,r.jsx)(n.strong,{children:"7 interconnected metadata tables"}),":"]}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Table"}),(0,r.jsx)(n.th,{children:"Purpose"}),(0,r.jsx)(n.th,{children:"Rows per Dimension"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"TB_DIM"})}),(0,r.jsx)(n.td,{children:"Dimension registry"}),(0,r.jsx)(n.td,{children:"1"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"TB_OBJECT"})}),(0,r.jsx)(n.td,{children:"Object registration"}),(0,r.jsx)(n.td,{children:"1"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"TB_COST"})}),(0,r.jsx)(n.td,{children:"Field definitions"}),(0,r.jsx)(n.td,{children:"10-50"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"TB_INDEX"})}),(0,r.jsx)(n.td,{children:"Index definitions"}),(0,r.jsx)(n.td,{children:"1-10"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"TB_TYPE_FIELDS"})}),(0,r.jsx)(n.td,{children:"Field type definitions"}),(0,r.jsx)(n.td,{children:"~30 (shared)"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"TB_MENU"})}),(0,r.jsx)(n.td,{children:"Security areas"}),(0,r.jsx)(n.td,{children:"1-10"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"TB_COUNTER"})}),(0,r.jsx)(n.td,{children:"Counter configuration"}),(0,r.jsx)(n.td,{children:"0-5"})]})]})]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Key Principles:"})}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["\u2705 ",(0,r.jsx)(n.strong,{children:"Metadata is code"})," - behavior defined in tables, not files"]}),"\n",(0,r.jsxs)(n.li,{children:["\u2705 ",(0,r.jsx)(n.strong,{children:"Runtime interpretation"})," - APIs read metadata on every request"]}),"\n",(0,r.jsxs)(n.li,{children:["\u2705 ",(0,r.jsx)(n.strong,{children:"Zero deployment"})," - changes take effect immediately"]}),"\n",(0,r.jsxs)(n.li,{children:["\u2705 ",(0,r.jsx)(n.strong,{children:"Consistency guaranteed"})," - one source of truth for all rules"]}),"\n",(0,r.jsxs)(n.li,{children:["\u2705 ",(0,r.jsx)(n.strong,{children:"Multi-tenant isolation"})," - MARKET field in all tables"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Next Concept:"})}),"\n",(0,r.jsxs)(n.p,{children:["\u2192 Continue to ",(0,r.jsx)(n.a,{href:"/docs/products/map.q01.io/core-api-platform-v4/core-concepts/context-chain",children:"Context Chain"})," to understand how context parameters affect MAP metadata interpretation."]})]})}function j(e={}){const{wrapper:n}={...(0,s.M)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(x,{...e})}):x(e)}},2172:(e,n,d)=>{d.d(n,{I:()=>l,M:()=>c});var r=d(1504);const s={},i=r.createContext(s);function c(e){const n=r.useContext(i);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:c(e.components),r.createElement(i.Provider,{value:n},e.children)}}}]);