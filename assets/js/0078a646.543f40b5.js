"use strict";(self.webpackChunkq_01_docs=self.webpackChunkq_01_docs||[]).push([[2114],{1632:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>c,contentTitle:()=>s,default:()=>h,frontMatter:()=>d,metadata:()=>l,toc:()=>a});var t=i(7624),r=i(2172);const d={title:"Field Metadata Operations",sidebar_label:"Field Metadata",sidebar_position:4,description:"Retrieving field definitions, visibility, and validation rules from TB_COST"},s="Field Metadata Operations",l={id:"products/map.q01.io/core-api-platform-v4/api-operations/field-metadata",title:"Field Metadata Operations",description:"Retrieving field definitions, visibility, and validation rules from TB_COST",source:"@site/docs/products/map.q01.io/core-api-platform-v4/02-api-operations/field-metadata.md",sourceDirName:"products/map.q01.io/core-api-platform-v4/02-api-operations",slug:"/products/map.q01.io/core-api-platform-v4/api-operations/field-metadata",permalink:"/docs/products/map.q01.io/core-api-platform-v4/api-operations/field-metadata",draft:!1,unlisted:!1,tags:[],version:"current",sidebarPosition:4,frontMatter:{title:"Field Metadata Operations",sidebar_label:"Field Metadata",sidebar_position:4,description:"Retrieving field definitions, visibility, and validation rules from TB_COST"},sidebar:"mapSidebar",previous:{title:"Write Operations",permalink:"/docs/products/map.q01.io/core-api-platform-v4/api-operations/write-operations"},next:{title:"Media Operations",permalink:"/docs/products/map.q01.io/core-api-platform-v4/api-operations/media-operations"}},c={},a=[{value:"Overview",id:"overview",level:2},{value:"Endpoint",id:"endpoint",level:2},{value:"Context Values",id:"context-values",level:2},{value:"Example Request",id:"example-request",level:2},{value:"Response Format",id:"response-format",level:2},{value:"Field Properties",id:"field-properties",level:2},{value:"Use Case: Dynamic Form Generation",id:"use-case-dynamic-form-generation",level:2},{value:"Filtering by COD_ON_OFF",id:"filtering-by-cod_on_off",level:2},{value:"Summary",id:"summary",level:2}];function o(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,r.M)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.h1,{id:"field-metadata-operations",children:"Field Metadata Operations"}),"\n",(0,t.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Field metadata operations"})," retrieve field definitions from TB_COST based on context (nuovo, modifica, visualizza). This enables dynamic form generation, validation, and UI rendering without hardcoding field names."]}),"\n",(0,t.jsx)(n.h2,{id:"endpoint",children:"Endpoint"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"GET /api/v4/core/{DIM}/fields?source={SECURITY_AREA}&center_dett={CONTEXT}\n"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Parameters:"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"{DIM}"}),": Dimension code (e.g., PRD, ORD)"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"source"}),": Security area (required)"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"center_dett"}),": Context for field visibility (required)"]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"context-values",children:"Context Values"}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Context"}),(0,t.jsx)(n.th,{children:"Purpose"}),(0,t.jsx)(n.th,{children:"COD_ON_OFF Filter"}),(0,t.jsx)(n.th,{children:"Use Case"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"nuovo"})}),(0,t.jsx)(n.td,{children:"Create form"}),(0,t.jsx)(n.td,{children:"Fields with 'N'"}),(0,t.jsx)(n.td,{children:"Render create form"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"modifica"})}),(0,t.jsx)(n.td,{children:"Edit form"}),(0,t.jsx)(n.td,{children:"Fields with 'M'"}),(0,t.jsx)(n.td,{children:"Render edit form"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"visualizza"})}),(0,t.jsx)(n.td,{children:"View/list"}),(0,t.jsx)(n.td,{children:"Fields with 'L' or 'D'"}),(0,t.jsx)(n.td,{children:"Render detail view"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"ricerca"})}),(0,t.jsx)(n.td,{children:"Search form"}),(0,t.jsx)(n.td,{children:"Fields with 'R' or 'S'"}),(0,t.jsx)(n.td,{children:"Render search form"})]})]})]}),"\n",(0,t.jsx)(n.h2,{id:"example-request",children:"Example Request"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:'curl -X GET "https://coreservice.q01.io/api/v4/core/PRD/fields?source=productCreate&center_dett=nuovo" \\\n  -H "Authorization: Bearer eyJhbGc..."\n'})}),"\n",(0,t.jsx)(n.h2,{id:"response-format",children:"Response Format"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Structure:"})," Object with field names as keys"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'{\n  "PRD_ID": {\n    "COD_COST": "PRD_ID",\n    "DESC_COST": "Product ID",\n    "TIPO_CAMPO": "int",\n    "COD_ON_OFF": "L,D",\n    "REQUIRED": true,\n    "COD_SEQUENZA": 10,\n    "INIT_VALUE": "",\n    "COD_UTENTE": 0\n  },\n  "XPRD01": {\n    "COD_COST": "XPRD01",\n    "DESC_COST": "Product Name",\n    "TIPO_CAMPO": "varchar(255)",\n    "COD_ON_OFF": "L,D,N,M,R",\n    "REQUIRED": true,\n    "COD_SEQUENZA": 20,\n    "INIT_VALUE": "",\n    "COD_UTENTE": 0\n  },\n  "XPRD02": {\n    "COD_COST": "XPRD02",\n    "DESC_COST": "Price",\n    "TIPO_CAMPO": "decimal(10,2)",\n    "COD_ON_OFF": "L,D,N,M",\n    "REQUIRED": true,\n    "COD_SEQUENZA": 30,\n    "INIT_VALUE": "0.00",\n    "COD_UTENTE": 0\n  }\n}\n'})}),"\n",(0,t.jsx)(n.h2,{id:"field-properties",children:"Field Properties"}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Property"}),(0,t.jsx)(n.th,{children:"Description"}),(0,t.jsx)(n.th,{children:"Example"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"COD_COST"})}),(0,t.jsx)(n.td,{children:"Field code/name"}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:'"XPRD01"'})})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"DESC_COST"})}),(0,t.jsx)(n.td,{children:"Human-readable label"}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:'"Product Name"'})})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"TIPO_CAMPO"})}),(0,t.jsx)(n.td,{children:"Data type from TB_TYPE_FIELDS"}),(0,t.jsxs)(n.td,{children:[(0,t.jsx)(n.code,{children:'"varchar(255)"'}),", ",(0,t.jsx)(n.code,{children:'"int"'}),", ",(0,t.jsx)(n.code,{children:'"decimal(10,2)"'})]})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"COD_ON_OFF"})}),(0,t.jsx)(n.td,{children:"Visibility flags"}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:'"L,D,N,M,R"'})})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"REQUIRED"})}),(0,t.jsx)(n.td,{children:"Is field required?"}),(0,t.jsxs)(n.td,{children:[(0,t.jsx)(n.code,{children:"true"}),", ",(0,t.jsx)(n.code,{children:"false"})]})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"COD_SEQUENZA"})}),(0,t.jsx)(n.td,{children:"Display order"}),(0,t.jsxs)(n.td,{children:[(0,t.jsx)(n.code,{children:"10"}),", ",(0,t.jsx)(n.code,{children:"20"}),", ",(0,t.jsx)(n.code,{children:"30"})]})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"INIT_VALUE"})}),(0,t.jsx)(n.td,{children:"Default value"}),(0,t.jsxs)(n.td,{children:[(0,t.jsx)(n.code,{children:'""'}),", ",(0,t.jsx)(n.code,{children:'"0"'}),", ",(0,t.jsx)(n.code,{children:'"ACTIVE"'})]})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"COD_UTENTE"})}),(0,t.jsx)(n.td,{children:"Minimum peso required"}),(0,t.jsxs)(n.td,{children:[(0,t.jsx)(n.code,{children:"0"}),", ",(0,t.jsx)(n.code,{children:"1"}),", ",(0,t.jsx)(n.code,{children:"2"}),", ",(0,t.jsx)(n.code,{children:"3"})]})]})]})]}),"\n",(0,t.jsx)(n.h2,{id:"use-case-dynamic-form-generation",children:"Use Case: Dynamic Form Generation"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-javascript",children:"async function buildForm(dimension, context) {\n  // Fetch field metadata\n  const response = await fetch(\n    `/api/v4/core/${dimension}/fields?source=${context}Create&center_dett=${context}`,\n    {\n      headers: { 'Authorization': `Bearer ${token}` }\n    }\n  );\n\n  const fields = await response.json();\n\n  // Generate form inputs\n  const form = document.createElement('form');\n\n  Object.values(fields)\n    .sort((a, b) => a.COD_SEQUENZA - b.COD_SEQUENZA)\n    .forEach(field => {\n      const input = createInput(field);\n      form.appendChild(input);\n    });\n\n  return form;\n}\n\nfunction createInput(field) {\n  const div = document.createElement('div');\n\n  // Label\n  const label = document.createElement('label');\n  label.textContent = field.DESC_COST;\n  if (field.REQUIRED) {\n    label.textContent += ' *';\n  }\n  div.appendChild(label);\n\n  // Input\n  let input;\n  if (field.TIPO_CAMPO.startsWith('varchar')) {\n    input = document.createElement('input');\n    input.type = 'text';\n    input.maxLength = extractLength(field.TIPO_CAMPO);\n  } else if (field.TIPO_CAMPO === 'int') {\n    input = document.createElement('input');\n    input.type = 'number';\n    input.step = 1;\n  } else if (field.TIPO_CAMPO.startsWith('decimal')) {\n    input = document.createElement('input');\n    input.type = 'number';\n    input.step = 0.01;\n  }\n\n  input.name = field.COD_COST;\n  input.required = field.REQUIRED;\n  input.value = field.INIT_VALUE;\n\n  div.appendChild(input);\n\n  return div;\n}\n"})}),"\n",(0,t.jsx)(n.h2,{id:"filtering-by-cod_on_off",children:"Filtering by COD_ON_OFF"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"center_dett=nuovo (Create Form):"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'{\n  "XPRD01": { "COD_ON_OFF": "L,D,N,M,R" },  // \u2705 Has N\n  "XPRD02": { "COD_ON_OFF": "L,D,N,M" },    // \u2705 Has N\n  "XPRD15": { "COD_ON_OFF": "L,D,M" } // \u274c No N - excluded\n}\n'})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"center_dett=modifica (Edit Form):"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'{\n  "XPRD01": { "COD_ON_OFF": "L,D,N,M,R" },  // \u2705 Has M\n  "XPRD02": { "COD_ON_OFF": "L,D,N,M" },    // \u2705 Has M\n  "PRD_ID": { "COD_ON_OFF": "L,D" }        // \u274c No M - excluded (read-only)\n}\n'})}),"\n",(0,t.jsx)(n.h2,{id:"summary",children:"Summary"}),"\n",(0,t.jsx)(n.p,{children:"Field metadata operations enable:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"\u2705 Dynamic form generation"}),"\n",(0,t.jsx)(n.li,{children:"\u2705 Client-side validation"}),"\n",(0,t.jsx)(n.li,{children:"\u2705 Context-aware field visibility"}),"\n",(0,t.jsx)(n.li,{children:"\u2705 Consistent UI across platforms"}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Next:"})," ",(0,t.jsx)(n.a,{href:"/docs/products/map.q01.io/core-api-platform-v4/api-operations/media-operations",children:"Media Operations \u2192"})]})]})}function h(e={}){const{wrapper:n}={...(0,r.M)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(o,{...e})}):o(e)}},2172:(e,n,i)=>{i.d(n,{I:()=>l,M:()=>s});var t=i(1504);const r={},d=t.createContext(r);function s(e){const n=t.useContext(d);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:s(e.components),t.createElement(d.Provider,{value:n},e.children)}}}]);