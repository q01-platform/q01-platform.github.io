"use strict";(self.webpackChunkq_01_docs=self.webpackChunkq_01_docs||[]).push([[1768],{968:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>l,contentTitle:()=>i,default:()=>p,frontMatter:()=>a,metadata:()=>o,toc:()=>c});var s=r(7624),t=r(2172);const a={title:"Batch Operations",sidebar_label:"Batch Operations",sidebar_position:12,description:"Bulk insert, update, and delete operations"},i="Batch Operations",o={id:"products/map.q01.io/core-api-platform-v4/write-patterns/batch-operations",title:"Batch Operations",description:"Bulk insert, update, and delete operations",source:"@site/docs/products/map.q01.io/core-api-platform-v4/04-write-patterns/batch-operations.md",sourceDirName:"products/map.q01.io/core-api-platform-v4/04-write-patterns",slug:"/products/map.q01.io/core-api-platform-v4/write-patterns/batch-operations",permalink:"/docs/products/map.q01.io/core-api-platform-v4/write-patterns/batch-operations",draft:!1,unlisted:!1,tags:[],version:"current",sidebarPosition:12,frontMatter:{title:"Batch Operations",sidebar_label:"Batch Operations",sidebar_position:12,description:"Bulk insert, update, and delete operations"},sidebar:"mapSidebar",previous:{title:"Error Handling",permalink:"/docs/products/map.q01.io/core-api-platform-v4/write-patterns/error-handling"},next:{title:"Security",permalink:"/docs/products/map.q01.io/core-api-platform-v4/security/"}},l={},c=[{value:"Overview",id:"overview",level:2},{value:"Parallel Requests",id:"parallel-requests",level:2},{value:"Concurrent API Calls",id:"concurrent-api-calls",level:3},{value:"Rate Limiting",id:"rate-limiting",level:3},{value:"Cascade Operations",id:"cascade-operations",level:2},{value:"Single Request, Multiple Records",id:"single-request-multiple-records",level:3},{value:"Bulk Update",id:"bulk-update",level:2},{value:"Update Multiple Records",id:"update-multiple-records",level:3},{value:"Conditional Bulk Update",id:"conditional-bulk-update",level:3},{value:"Bulk Delete",id:"bulk-delete",level:2},{value:"Soft Delete Multiple Records",id:"soft-delete-multiple-records",level:3},{value:"Error Handling in Batch Operations",id:"error-handling-in-batch-operations",level:2},{value:"Partial Success Handling",id:"partial-success-handling",level:3},{value:"Retry Failed Operations",id:"retry-failed-operations",level:3},{value:"Progress Tracking",id:"progress-tracking",level:2},{value:"Batch with Progress Updates",id:"batch-with-progress-updates",level:3},{value:"Performance Considerations",id:"performance-considerations",level:2},{value:"Batch Size Recommendations",id:"batch-size-recommendations",level:3},{value:"Memory Considerations",id:"memory-considerations",level:3},{value:"Best Practices",id:"best-practices",level:2},{value:"\u2705 DO:",id:"-do",level:3},{value:"\u274c DON&#39;T:",id:"-dont",level:3},{value:"Summary",id:"summary",level:2},{value:"Related Concepts",id:"related-concepts",level:2}];function d(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,t.M)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.h1,{id:"batch-operations",children:"Batch Operations"}),"\n",(0,s.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Batch operations"})," perform multiple writes in efficient bulk operations. While Core APIs don't have dedicated batch endpoints, you can efficiently batch operations using parallel requests or database-level optimizations."]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Strategies:"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Parallel Requests"})," - Multiple API calls concurrently"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Cascade Operations"})," - Single request creates multiple records"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Database Batch Inserts"})," - Internal optimization"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Transaction Batching"})," - Group operations in single transaction"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"parallel-requests",children:"Parallel Requests"}),"\n",(0,s.jsx)(n.h3,{id:"concurrent-api-calls",children:"Concurrent API Calls"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"JavaScript Promise.all():"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-javascript",children:"async function batchCreateProducts(products) {\n  // Create all products in parallel\n  const requests = products.map(product =>\n    fetch(`${apiBase}/api/v4/core/PRD`, {\n      method: 'POST',\n      headers: {\n        'Authorization': `Bearer ${token}`,\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({ data: product })\n    })\n  );\n\n  // Wait for all to complete\n  const responses = await Promise.all(requests);\n\n  // Parse results\n  const results = await Promise.all(\n    responses.map(r => r.json())\n  );\n\n  return results;\n}\n\n// Usage\nconst products = [\n  { XPRD01: 'Product A', XPRD02: 99.99, XPRD05: 'cat_1' },\n  { XPRD01: 'Product B', XPRD02: 89.99, XPRD05: 'cat_1' },\n  { XPRD01: 'Product C', XPRD02: 79.99, XPRD05: 'cat_2' }\n];\n\nconst results = await batchCreateProducts(products);\nconsole.log(`Created ${results.length} products`);\n"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Benefits:"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"\u2705 Fast (parallel execution)"}),"\n",(0,s.jsx)(n.li,{children:"\u2705 Independent transactions (one failure doesn't affect others)"}),"\n",(0,s.jsx)(n.li,{children:"\u2705 Simple implementation"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Drawbacks:"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"\u26a0\ufe0f Many API calls (network overhead)"}),"\n",(0,s.jsx)(n.li,{children:"\u26a0\ufe0f No atomicity (partial success possible)"}),"\n",(0,s.jsx)(n.li,{children:"\u26a0\ufe0f Rate limiting concerns"}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"rate-limiting",children:"Rate Limiting"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Throttle concurrent requests:"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-javascript",children:"async function batchCreateWithThrottle(products, concurrency = 10) {\n  const results = [];\n\n  // Process in batches of N concurrent requests\n  for (let i = 0; i < products.length; i += concurrency) {\n    const batch = products.slice(i, i + concurrency);\n\n    const batchRequests = batch.map(product =>\n      fetch(`${apiBase}/api/v4/core/PRD`, {\n        method: 'POST',\n        headers: {\n          'Authorization': `Bearer ${token}`,\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({ data: product })\n      })\n    );\n\n    const batchResponses = await Promise.all(batchRequests);\n    const batchResults = await Promise.all(\n      batchResponses.map(r => r.json())\n    );\n\n    results.push(...batchResults);\n\n    console.log(`Processed ${results.length}/${products.length} products`);\n  }\n\n  return results;\n}\n\n// Usage: 100 products, 10 concurrent requests at a time\nconst results = await batchCreateWithThrottle(products, 10);\n"})}),"\n",(0,s.jsx)(n.h2,{id:"cascade-operations",children:"Cascade Operations"}),"\n",(0,s.jsx)(n.h3,{id:"single-request-multiple-records",children:"Single Request, Multiple Records"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Use INSERT_CASCADE for master-detail:"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-javascript",children:"async function createOrderWithManyItems(orderData, items) {\n  // Single API call creates order + all items\n  const response = await fetch(`${apiBase}/api/v4/core/ORD`, {\n    method: 'POST',\n    headers: {\n      'Authorization': `Bearer ${token}`,\n      'Content-Type': 'application/json'\n    },\n    body: JSON.stringify({\n      data: {\n        ...orderData,\n        items: items  // Cascade creates all items in single transaction\n      }\n    })\n  });\n\n  return response.json();\n}\n\n// Usage: Create order with 100 items\nconst order = await createOrderWithManyItems(\n  {\n    XORD_CUSTOMER_ID: 'cust_123',\n    XORD03: 9999.00\n  },\n  Array.from({ length: 100 }, (_, i) => ({\n    XORDITEM10: `prd_${i}`,\n    XORDITEM_QTY: 1,\n    XORDITEM09: 99.99\n  }))\n);\n\nconsole.log(`Created order with ${order.data.items.length} items`);\n"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Benefits:"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"\u2705 Single API call (minimal network overhead)"}),"\n",(0,s.jsx)(n.li,{children:"\u2705 Atomic (all-or-nothing)"}),"\n",(0,s.jsx)(n.li,{children:"\u2705 Efficient database execution"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Drawbacks:"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"\u26a0\ufe0f Limited to configured cascades"}),"\n",(0,s.jsx)(n.li,{children:"\u26a0\ufe0f Request size limits (typically 1-10MB)"}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"bulk-update",children:"Bulk Update"}),"\n",(0,s.jsx)(n.h3,{id:"update-multiple-records",children:"Update Multiple Records"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Promise.all() with PATCH:"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-javascript",children:"async function bulkUpdateCategory(productIds, newCategory) {\n  const requests = productIds.map(id =>\n    fetch(`${apiBase}/api/v4/core/PRD/${id}`, {\n      method: 'PATCH',\n      headers: {\n        'Authorization': `Bearer ${token}`,\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        data: { XPRD05: newCategory }\n      })\n    })\n  );\n\n  const responses = await Promise.all(requests);\n  const results = await Promise.all(responses.map(r => r.json()));\n\n  return results;\n}\n\n// Usage: Update 50 products\nconst productIds = Array.from({ length: 50 }, (_, i) => 100 + i);\nconst results = await bulkUpdateCategory(productIds, 'cat_electronics');\nconsole.log(`Updated ${results.length} products`);\n"})}),"\n",(0,s.jsx)(n.h3,{id:"conditional-bulk-update",children:"Conditional Bulk Update"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Update only if condition met:"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-javascript",children:"async function bulkUpdateWithCondition(productIds, updateFn, conditionFn) {\n  // 1. Fetch all products\n  const products = await Promise.all(\n    productIds.map(id =>\n      fetch(`${apiBase}/api/v4/core/PRD/${id}`, {\n        headers: { 'Authorization': `Bearer ${token}` }\n      }).then(r => r.json())\n    )\n  );\n\n  // 2. Filter by condition\n  const toUpdate = products.filter(p => conditionFn(p.data));\n\n  // 3. Update filtered products\n  const updates = toUpdate.map(p =>\n    fetch(`${apiBase}/api/v4/core/PRD/${p.data.PRD_ID}`, {\n      method: 'PATCH',\n      headers: {\n        'Authorization': `Bearer ${token}`,\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        data: updateFn(p.data)\n      })\n    })\n  );\n\n  const results = await Promise.all(updates);\n  console.log(`Updated ${results.length}/${products.length} products`);\n\n  return results;\n}\n\n// Usage: Increase price by 10% for products below $100\nawait bulkUpdateWithCondition(\n  productIds,\n  (product) => ({\n    XPRD02: product.XPRD02 * 1.1  // +10%\n  }),\n  (product) => product.XPRD02 < 100  // Condition\n);\n"})}),"\n",(0,s.jsx)(n.h2,{id:"bulk-delete",children:"Bulk Delete"}),"\n",(0,s.jsx)(n.h3,{id:"soft-delete-multiple-records",children:"Soft Delete Multiple Records"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-javascript",children:"async function bulkSoftDelete(dimension, recordIds) {\n  const requests = recordIds.map(id =>\n    fetch(`${apiBase}/api/v4/core/${dimension}/${id}`, {\n      method: 'DELETE',\n      headers: { 'Authorization': `Bearer ${token}` }\n    })\n  );\n\n  const responses = await Promise.all(requests);\n  const results = await Promise.all(responses.map(r => r.json()));\n\n  return results;\n}\n\n// Usage: Soft delete 20 products\nconst productIds = [123, 124, 125, /*...*/];\nconst results = await bulkSoftDelete('PRD', productIds);\nconsole.log(`Soft deleted ${results.length} products`);\n"})}),"\n",(0,s.jsx)(n.h2,{id:"error-handling-in-batch-operations",children:"Error Handling in Batch Operations"}),"\n",(0,s.jsx)(n.h3,{id:"partial-success-handling",children:"Partial Success Handling"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-javascript",children:"async function batchCreateWithErrorHandling(products) {\n  const results = {\n    succeeded: [],\n    failed: []\n  };\n\n  const requests = products.map(async (product, index) => {\n    try {\n      const response = await fetch(`${apiBase}/api/v4/core/PRD`, {\n        method: 'POST',\n        headers: {\n          'Authorization': `Bearer ${token}`,\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({ data: product })\n      });\n\n      if (response.ok) {\n        const result = await response.json();\n        results.succeeded.push({\n          index,\n          product,\n          result: result.data\n        });\n      } else {\n        const error = await response.json();\n        results.failed.push({\n          index,\n          product,\n          error: error.message,\n          code: error.code\n        });\n      }\n    } catch (error) {\n      results.failed.push({\n        index,\n        product,\n        error: error.message,\n        code: 'NETWORK_ERROR'\n      });\n    }\n  });\n\n  await Promise.all(requests);\n\n  console.log(`Success: ${results.succeeded.length}, Failed: ${results.failed.length}`);\n\n  return results;\n}\n\n// Usage\nconst results = await batchCreateWithErrorHandling(products);\n\nif (results.failed.length > 0) {\n  console.error('Failed products:', results.failed);\n  // Optionally retry failed items\n  await retryFailed(results.failed);\n}\n"})}),"\n",(0,s.jsx)(n.h3,{id:"retry-failed-operations",children:"Retry Failed Operations"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-javascript",children:"async function retryFailed(failedItems, maxRetries = 3) {\n  const retryResults = [];\n\n  for (const item of failedItems) {\n    let attempt = 0;\n    let success = false;\n\n    while (attempt < maxRetries && !success) {\n      attempt++;\n      console.log(`Retry ${attempt}/${maxRetries} for item ${item.index}`);\n\n      try {\n        const response = await fetch(`${apiBase}/api/v4/core/PRD`, {\n          method: 'POST',\n          headers: {\n            'Authorization': `Bearer ${token}`,\n            'Content-Type': 'application/json'\n          },\n          body: JSON.stringify({ data: item.product })\n        });\n\n        if (response.ok) {\n          const result = await response.json();\n          retryResults.push({ success: true, item, result });\n          success = true;\n        } else {\n          const error = await response.json();\n          if (attempt === maxRetries) {\n            retryResults.push({ success: false, item, error });\n          }\n        }\n\n        // Exponential backoff\n        if (!success && attempt < maxRetries) {\n          await sleep(Math.pow(2, attempt) * 1000);  // 2s, 4s, 8s\n        }\n      } catch (error) {\n        if (attempt === maxRetries) {\n          retryResults.push({ success: false, item, error: error.message });\n        }\n      }\n    }\n  }\n\n  return retryResults;\n}\n\nfunction sleep(ms) {\n  return new Promise(resolve => setTimeout(resolve, ms));\n}\n"})}),"\n",(0,s.jsx)(n.h2,{id:"progress-tracking",children:"Progress Tracking"}),"\n",(0,s.jsx)(n.h3,{id:"batch-with-progress-updates",children:"Batch with Progress Updates"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-javascript",children:"async function batchWithProgress(products, onProgress) {\n  const results = [];\n  const total = products.length;\n\n  for (let i = 0; i < total; i++) {\n    const product = products[i];\n\n    try {\n      const response = await fetch(`${apiBase}/api/v4/core/PRD`, {\n        method: 'POST',\n        headers: {\n          'Authorization': `Bearer ${token}`,\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({ data: product })\n      });\n\n      const result = await response.json();\n      results.push(result);\n\n      // Update progress\n      onProgress({\n        current: i + 1,\n        total,\n        percentage: Math.round(((i + 1) / total) * 100),\n        product: result.data\n      });\n    } catch (error) {\n      results.push({ error: error.message });\n      onProgress({\n        current: i + 1,\n        total,\n        percentage: Math.round(((i + 1) / total) * 100),\n        error: error.message\n      });\n    }\n  }\n\n  return results;\n}\n\n// Usage\nconst results = await batchWithProgress(products, (progress) => {\n  console.log(`Progress: ${progress.percentage}% (${progress.current}/${progress.total})`);\n  updateProgressBar(progress.percentage);\n});\n"})}),"\n",(0,s.jsx)(n.h2,{id:"performance-considerations",children:"Performance Considerations"}),"\n",(0,s.jsx)(n.h3,{id:"batch-size-recommendations",children:"Batch Size Recommendations"}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Operation"}),(0,s.jsx)(n.th,{children:"Batch Size"}),(0,s.jsx)(n.th,{children:"Concurrency"}),(0,s.jsx)(n.th,{children:"Duration"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Simple POST"}),(0,s.jsx)(n.td,{children:"100-1000"}),(0,s.jsx)(n.td,{children:"10-20"}),(0,s.jsx)(n.td,{children:"~10s"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"POST with CASCADE"}),(0,s.jsx)(n.td,{children:"10-100"}),(0,s.jsx)(n.td,{children:"5-10"}),(0,s.jsx)(n.td,{children:"~5-10s"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"PATCH"}),(0,s.jsx)(n.td,{children:"100-500"}),(0,s.jsx)(n.td,{children:"10-20"}),(0,s.jsx)(n.td,{children:"~5-10s"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Soft DELETE"}),(0,s.jsx)(n.td,{children:"100-500"}),(0,s.jsx)(n.td,{children:"10-20"}),(0,s.jsx)(n.td,{children:"~5-10s"})]})]})]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Factors:"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Network latency"}),"\n",(0,s.jsx)(n.li,{children:"Database load"}),"\n",(0,s.jsx)(n.li,{children:"Record complexity"}),"\n",(0,s.jsx)(n.li,{children:"Cascade operations"}),"\n",(0,s.jsx)(n.li,{children:"Validation complexity"}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"memory-considerations",children:"Memory Considerations"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Avoid loading all results in memory:"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-javascript",children:"// \u274c Bad - loads 10,000 results in memory\nasync function batchCreateBad(products) {\n  const results = await Promise.all(\n    products.map(p => createProduct(p))\n  );\n  return results;  // 10k objects in memory\n}\n\n// \u2705 Good - processes in chunks\nasync function batchCreateGood(products, chunkSize = 100) {\n  let processedCount = 0;\n\n  for (let i = 0; i < products.length; i += chunkSize) {\n    const chunk = products.slice(i, i + chunkSize);\n    const results = await Promise.all(\n      chunk.map(p => createProduct(p))\n    );\n\n    processedCount += results.length;\n    console.log(`Processed: ${processedCount}/${products.length}`);\n\n    // Results not accumulated in memory\n  }\n\n  return { total: processedCount };\n}\n"})}),"\n",(0,s.jsx)(n.h2,{id:"best-practices",children:"Best Practices"}),"\n",(0,s.jsx)(n.h3,{id:"-do",children:"\u2705 DO:"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Use parallel requests for independent operations:"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-javascript",children:"// \u2705 Good - parallel\nconst results = await Promise.all(\n  products.map(p => createProduct(p))\n);\n"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Use cascades for related records:"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-javascript",children:"// \u2705 Good - single request\nawait createOrder({\n  ...orderData,\n  items: manyItems  // Cascade\n});\n"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Handle partial failures:"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-javascript",children:"// \u2705 Good - track success/failure\nconst { succeeded, failed } = await batchWithErrorHandling(products);\n"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Throttle concurrent requests:"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-javascript",children:"// \u2705 Good - 10 concurrent max\nawait batchWithThrottle(products, 10);\n"})}),"\n",(0,s.jsx)(n.h3,{id:"-dont",children:"\u274c DON'T:"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Don't send unbounded parallel requests:"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-javascript",children:"// \u274c Bad - 10,000 concurrent requests\nawait Promise.all(\n  tenThousandProducts.map(p => createProduct(p))\n);\n"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Don't ignore errors:"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-javascript",children:"// \u274c Bad - silent failures\nawait Promise.all(\n  products.map(p => createProduct(p).catch(() => {}))\n);\n"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Don't batch unrelated operations:"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-javascript",children:"// \u274c Bad - mixing different operations\nawait Promise.all([\n  createProduct(p1),\n  updateOrder(o1),\n  deleteCustomer(c1)\n]);\n"})}),"\n",(0,s.jsx)(n.h2,{id:"summary",children:"Summary"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"\u2705 Use parallel requests for independent operations"}),"\n",(0,s.jsx)(n.li,{children:"\u2705 Use CASCADE for related records (single transaction)"}),"\n",(0,s.jsx)(n.li,{children:"\u2705 Throttle concurrent requests (10-20 max)"}),"\n",(0,s.jsx)(n.li,{children:"\u2705 Handle partial failures gracefully"}),"\n",(0,s.jsx)(n.li,{children:"\u2705 Track progress for long-running batches"}),"\n",(0,s.jsx)(n.li,{children:"\u2705 Retry failed operations with exponential backoff"}),"\n",(0,s.jsx)(n.li,{children:"\u2705 Process in chunks to avoid memory issues"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Key Takeaways:"})}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsx)(n.li,{children:"Parallel requests: Fast but independent transactions"}),"\n",(0,s.jsx)(n.li,{children:"Cascades: Single transaction, atomic operation"}),"\n",(0,s.jsx)(n.li,{children:"Throttle concurrency to avoid overload"}),"\n",(0,s.jsx)(n.li,{children:"Handle partial success/failure"}),"\n",(0,s.jsx)(n.li,{children:"Retry with exponential backoff"}),"\n",(0,s.jsx)(n.li,{children:"Track progress for user feedback"}),"\n",(0,s.jsx)(n.li,{children:"Process large batches in chunks"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Batch Strategy Decision:"})}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Scenario"}),(0,s.jsx)(n.th,{children:"Strategy"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Create order with 100 items"}),(0,s.jsx)(n.td,{children:"CASCADE (single request)"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Create 100 independent products"}),(0,s.jsx)(n.td,{children:"Parallel requests (throttled)"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Update 500 products"}),(0,s.jsx)(n.td,{children:"Parallel PATCH (chunks of 50)"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Soft delete 200 records"}),(0,s.jsx)(n.td,{children:"Parallel DELETE (chunks of 50)"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Create 10,000 products"}),(0,s.jsx)(n.td,{children:"Chunked parallel (100 at a time)"})]})]})]}),"\n",(0,s.jsx)(n.h2,{id:"related-concepts",children:"Related Concepts"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.a,{href:"/docs/products/map.q01.io/core-api-platform-v4/write-patterns/create-operations",children:"Create Operations"})," - POST operations"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.a,{href:"/docs/products/map.q01.io/core-api-platform-v4/write-patterns/update-operations",children:"Update Operations"})," - PUT/PATCH operations"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.a,{href:"/docs/products/map.q01.io/core-api-platform-v4/write-patterns/delete-operations",children:"Delete Operations"})," - DELETE operations"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.a,{href:"/docs/products/map.q01.io/core-api-platform-v4/write-patterns/cascade-operations",children:"Cascade Operations"})," - INSERT_CASCADE"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.a,{href:"/docs/products/map.q01.io/core-api-platform-v4/write-patterns/transactions",children:"Transactions"})," - ACID guarantees"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.a,{href:"/docs/products/map.q01.io/core-api-platform-v4/write-patterns/error-handling",children:"Error Handling"})," - Error codes"]}),"\n"]})]})}function p(e={}){const{wrapper:n}={...(0,t.M)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}},2172:(e,n,r)=>{r.d(n,{I:()=>o,M:()=>i});var s=r(1504);const t={},a=s.createContext(t);function i(e){const n=s.useContext(a);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:i(e.components),s.createElement(a.Provider,{value:n},e.children)}}}]);