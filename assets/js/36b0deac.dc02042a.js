"use strict";(self.webpackChunkq_01_docs=self.webpackChunkq_01_docs||[]).push([[1264],{780:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>o,contentTitle:()=>a,default:()=>h,frontMatter:()=>l,metadata:()=>t,toc:()=>d});var r=s(7624),i=s(2172);const l={title:"AC/VARS Queries",sidebar_label:"AC/VARS Queries",sidebar_position:13,description:"Foreign key field queries for autocomplete and select fields"},a="AC/VARS Queries",t={id:"products/map.q01.io/core-api-platform-v4/query-patterns/ac-vars-queries",title:"AC/VARS Queries",description:"Foreign key field queries for autocomplete and select fields",source:"@site/docs/products/map.q01.io/core-api-platform-v4/03-query-patterns/ac-vars-queries.md",sourceDirName:"products/map.q01.io/core-api-platform-v4/03-query-patterns",slug:"/products/map.q01.io/core-api-platform-v4/query-patterns/ac-vars-queries",permalink:"/docs/products/map.q01.io/core-api-platform-v4/query-patterns/ac-vars-queries",draft:!1,unlisted:!1,tags:[],version:"current",sidebarPosition:13,frontMatter:{title:"AC/VARS Queries",sidebar_label:"AC/VARS Queries",sidebar_position:13,description:"Foreign key field queries for autocomplete and select fields"},sidebar:"mapSidebar",previous:{title:"Document Queries",permalink:"/docs/products/map.q01.io/core-api-platform-v4/query-patterns/document-queries"},next:{title:"Write Patterns",permalink:"/docs/products/map.q01.io/core-api-platform-v4/write-patterns/"}},o={},d=[{value:"Overview",id:"overview",level:2},{value:"AC vs VARS Field Types",id:"ac-vs-vars-field-types",level:2},{value:"VARS (Select/Dropdown)",id:"vars-selectdropdown",level:3},{value:"AC (Autocomplete/Searchable)",id:"ac-autocompletesearchable",level:3},{value:"Foreign Key Validation",id:"foreign-key-validation",level:2},{value:"Orphaned Link Prevention",id:"orphaned-link-prevention",level:3},{value:"VARS Query Endpoint",id:"vars-query-endpoint",level:2},{value:"Endpoint",id:"endpoint",level:3},{value:"Example: Query VARS Field",id:"example-query-vars-field",level:3},{value:"AC Query Endpoint",id:"ac-query-endpoint",level:2},{value:"Endpoint with Filter (Required)",id:"endpoint-with-filter-required",level:3},{value:"Example: Query AC Field with Filter",id:"example-query-ac-field-with-filter",level:3},{value:"getACList Parameter",id:"getaclist-parameter",level:2},{value:"Bypass Filter Requirement",id:"bypass-filter-requirement",level:3},{value:"Filter Syntax",id:"filter-syntax",level:2},{value:"String Filters",id:"string-filters",level:3},{value:"Logical Operators",id:"logical-operators",level:3},{value:"Integration with Metadata",id:"integration-with-metadata",level:2},{value:"TB_VAR Definition",id:"tb_var-definition",level:3},{value:"TB_OBJECT Foreign Key Definition",id:"tb_object-foreign-key-definition",level:3},{value:"Use Cases",id:"use-cases",level:2},{value:"Use Case 1: Product Category Dropdown",id:"use-case-1-product-category-dropdown",level:3},{value:"Use Case 2: Country Autocomplete",id:"use-case-2-country-autocomplete",level:3},{value:"Use Case 3: Loyalty Card Lookup",id:"use-case-3-loyalty-card-lookup",level:3},{value:"Best Practices",id:"best-practices",level:2},{value:"\u2705 DO:",id:"-do",level:3},{value:"\u274c DON&#39;T:",id:"-dont",level:3},{value:"Common Errors",id:"common-errors",level:2},{value:"Error: Missing source Parameter",id:"error-missing-source-parameter",level:3},{value:"Error: Invalid Field Code",id:"error-invalid-field-code",level:3},{value:"Error: Field Not AC/VARS Type",id:"error-field-not-acvars-type",level:3},{value:"Summary",id:"summary",level:2},{value:"Related Concepts",id:"related-concepts",level:2}];function c(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.M)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.h1,{id:"acvars-queries",children:"AC/VARS Queries"}),"\n",(0,r.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"AC (Autocomplete)"})," and ",(0,r.jsx)(n.strong,{children:"VARS (Select)"})," are special field types that represent foreign key relationships to other dimensions. The Core APIs provide a dedicated endpoint ",(0,r.jsx)(n.code,{children:"/api/v4/core/vars"})," for querying these foreign key values."]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Key Concepts:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"\u2705 AC/VARS fields are foreign keys to other dimensions"}),"\n",(0,r.jsx)(n.li,{children:"\u2705 Values must exist in destination table (orphaned link prevention)"}),"\n",(0,r.jsx)(n.li,{children:"\u2705 AC requires filtering (many records, search-based)"}),"\n",(0,r.jsx)(n.li,{children:"\u2705 VARS returns full list (few records, pre-populated dropdown)"}),"\n",(0,r.jsxs)(n.li,{children:["\u2705 Special endpoint: ",(0,r.jsx)(n.code,{children:"/api/v4/core/vars"})]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Common Examples:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"VARS:"})," Gender selection (Male/Female/Other)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"VARS:"})," VAT code selection (10%, 22%, 4%)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"AC:"})," Country selection (200+ countries, searchable)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"AC:"})," Loyalty card lookup (thousands of cards, searchable)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"AC:"})," Product search (thousands of products, autocomplete)"]}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"ac-vs-vars-field-types",children:"AC vs VARS Field Types"}),"\n",(0,r.jsx)(n.h3,{id:"vars-selectdropdown",children:"VARS (Select/Dropdown)"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Use When:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"\u2705 Limited number of options (< 50-100 records)"}),"\n",(0,r.jsx)(n.li,{children:"\u2705 User selects from pre-populated list"}),"\n",(0,r.jsx)(n.li,{children:"\u2705 No search/filtering needed"}),"\n",(0,r.jsx)(n.li,{children:"\u2705 Examples: Status codes, categories, VAT rates"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Behavior:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Returns complete list without filter"}),"\n",(0,r.jsx)(n.li,{children:"Suitable for dropdown menus"}),"\n",(0,r.jsx)(n.li,{children:"Fast lookup (small dataset)"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Metadata Definition:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sql",children:"-- TB_VAR example\nCOD_DIM: ART\nCOD_VAR: XART11\nTIPO_CAMPO: VARS\nTIPO_VAR: CL103  -- Foreign key to TB_ANAG_CL10300\n"})}),"\n",(0,r.jsx)(n.h3,{id:"ac-autocompletesearchable",children:"AC (Autocomplete/Searchable)"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Use When:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"\u2705 Large number of options (100+ records)"}),"\n",(0,r.jsx)(n.li,{children:"\u2705 User searches/filters before selecting"}),"\n",(0,r.jsx)(n.li,{children:"\u2705 Examples: Countries, customers, products, loyalty cards"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Behavior:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Requires filter parameter (prevents returning thousands of records)"}),"\n",(0,r.jsxs)(n.li,{children:["OR use ",(0,r.jsx)(n.code,{children:"getACList=1"})," to bypass filter (treat as VARS)"]}),"\n",(0,r.jsx)(n.li,{children:"Designed for search-as-you-type interfaces"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Metadata Definition:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sql",children:"-- TB_VAR example\nCOD_DIM: UT\nCOD_VAR: XUT26\nTIPO_CAMPO: AC\nTIPO_VAR: PV03  -- Foreign key to TB_ANAG_PV00.XPV03\n"})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"foreign-key-validation",children:"Foreign Key Validation"}),"\n",(0,r.jsx)(n.h3,{id:"orphaned-link-prevention",children:"Orphaned Link Prevention"}),"\n",(0,r.jsx)(n.p,{children:"When inserting or updating AC/VARS fields, Core APIs validate that the foreign key value exists in the destination table."}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Validation Steps:"})}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Type validation"})," - Ensure value matches TIPO_CAMPO definition"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Foreign key existence check"})," - Verify value exists in destination table"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Return error if not found"})," - Prevent orphaned links"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Example: Valid Foreign Key"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'POST /api/v4/core/ART\n{\n  "data": {\n    "XART11": "002",  # Must exist in TB_ANAG_CL10300.XCL103\n    "XART20": "Product Name"\n  }\n}\n'})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Validation:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sql",children:"SELECT COUNT(*) FROM TB_ANAG_CL10300\nWHERE XCL103 = '002';  -- Must return > 0\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Example: Invalid Foreign Key"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'POST /api/v4/core/ART\n{\n  "data": {\n    "XART11": "999",  # Does NOT exist in TB_ANAG_CL10300\n    "XART20": "Product Name"\n  }\n}\n'})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Error Response:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "status": 400,\n  "message": "Invalid foreign key: XART11 references CL103, but \'999\' does not exist",\n  "code": "INVALID_FOREIGN_KEY",\n  "field": "XART11"\n}\n'})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"vars-query-endpoint",children:"VARS Query Endpoint"}),"\n",(0,r.jsx)(n.h3,{id:"endpoint",children:"Endpoint"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"GET /api/v4/core/vars?source={source}&field={field_code}\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Parameters:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"source"})," (required) - Source parameter (COD_MENU)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"field"})," (required) - Field code from source dimension (e.g., XART11)"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"example-query-vars-field",children:"Example: Query VARS Field"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Scenario:"})," Get all available values for XART11 (Product Category - VARS type)."]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Metadata:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sql",children:"-- TB_VAR\nCOD_DIM: ART\nCOD_VAR: XART11\nTIPO_CAMPO: VARS\nTIPO_VAR: CL103  -- Points to TB_ANAG_CL10300\n\n-- TB_OBJECT (foreign key definition)\nCOD_DIM: ART\nCOD_VAR: XART11\nCOD_DIM_OBJ: CL103\nCOD_VAR_OBJ: XCL103\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Request:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"GET /api/v4/core/vars?source=settings-2&field=XART11\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Response:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'[\n  {\n    "XCL103": "003",\n    "XCL104": "Accessori"\n  },\n  {\n    "XCL103": "002",\n    "XCL104": "Magl.vis.cot.fil.fan"\n  },\n  {\n    "XCL103": "001",\n    "XCL104": "Magl.merinf.p.stoffa"\n  }\n]\n'})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Returns:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Foreign key field (XCL103) - to store in XART11"}),"\n",(0,r.jsx)(n.li,{children:"Display field (XCL104) - to show in UI"}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"ac-query-endpoint",children:"AC Query Endpoint"}),"\n",(0,r.jsx)(n.h3,{id:"endpoint-with-filter-required",children:"Endpoint with Filter (Required)"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"GET /api/v4/core/vars?source={source}&field={field_code}&$filter={filter_expression}\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Parameters:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"source"})," (required) - Source parameter"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"field"})," (required) - Field code from source dimension"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"$filter"})," (required for AC) - Filter expression"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"example-query-ac-field-with-filter",children:"Example: Query AC Field with Filter"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Scenario:"}),' Search for product categories starting with "Magl".']}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Request:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"GET /api/v4/core/vars?source=settings-2&field=XART11&$filter=startwith(XCL104,'Magl')\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Response:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'[\n  {\n    "XCL103": "002",\n    "XCL104": "Magl.vis.cot.fil.fan"\n  },\n  {\n    "XCL103": "001",\n    "XCL104": "Magl.merinf.p.stoffa"\n  }\n]\n'})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Without Filter:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# \u274c Bad - AC requires filter\nGET /api/v4/core/vars?source=settings-2&field=XART11\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Response:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:"[]\n"})}),"\n",(0,r.jsx)(n.p,{children:"Returns empty array because AC fields require filter to prevent massive result sets."}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"getaclist-parameter",children:"getACList Parameter"}),"\n",(0,r.jsx)(n.h3,{id:"bypass-filter-requirement",children:"Bypass Filter Requirement"}),"\n",(0,r.jsxs)(n.p,{children:["Use ",(0,r.jsx)(n.code,{children:"getACList=1"})," to treat an AC field like a VARS field (return full list without filter)."]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Use Case:"})," Load complete dataset client-side for custom filtering/rendering."]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Request:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"GET /api/v4/core/vars?source=settings-2&field=XART11&getACList=1\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Response:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'[\n  { "XCL103": "001", "XCL104": "Magl.merinf.p.stoffa" },\n  { "XCL103": "002", "XCL104": "Magl.vis.cot.fil.fan" },\n  { "XCL103": "003", "XCL104": "Accessori" },\n  ...\n  { "XCL103": "099", "XCL104": "Other Category" }\n]\n'})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"\u26a0\ufe0f Warning:"})," Use sparingly - can return large datasets. Only for AC fields with manageable record counts."]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"filter-syntax",children:"Filter Syntax"}),"\n",(0,r.jsx)(n.p,{children:"Supports standard query filter operators:"}),"\n",(0,r.jsx)(n.h3,{id:"string-filters",children:"String Filters"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"startwith:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"$filter=startwith(XCL104,'Magl')\n# SQL: WHERE XCL104 LIKE 'Magl%'\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"endwith:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"$filter=endwith(XCL104,'accessori')\n# SQL: WHERE XCL104 LIKE '%accessori'\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"contains:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"$filter=contains(XCL104,'vis')\n# SQL: WHERE XCL104 LIKE '%vis%'\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"equals:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"$filter=equals(XCL103,'002')\n# SQL: WHERE XCL103 = '002'\n"})}),"\n",(0,r.jsx)(n.h3,{id:"logical-operators",children:"Logical Operators"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"OR:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"$filter=contains(XCL104,'Magl') or contains(XCL104,'Accessori')\n# SQL: WHERE XCL104 LIKE '%Magl%' OR XCL104 LIKE '%Accessori%'\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"AND:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"$filter=startwith(XCL104,'M') and endwith(XCL104,'stoffa')\n# SQL: WHERE XCL104 LIKE 'M%' AND XCL104 LIKE '%stoffa'\n"})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"integration-with-metadata",children:"Integration with Metadata"}),"\n",(0,r.jsx)(n.h3,{id:"tb_var-definition",children:"TB_VAR Definition"}),"\n",(0,r.jsx)(n.p,{children:"Defines field type and destination dimension:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sql",children:"SELECT COD_VAR, TIPO_CAMPO, TIPO_VAR\nFROM TB_VAR\nWHERE COD_DIM = 'ART' AND COD_VAR = 'XART11';\n\n-- Result:\n-- COD_VAR: XART11\n-- TIPO_CAMPO: VARS (or AC)\n-- TIPO_VAR: CL103  -- Destination dimension\n"})}),"\n",(0,r.jsx)(n.h3,{id:"tb_object-foreign-key-definition",children:"TB_OBJECT Foreign Key Definition"}),"\n",(0,r.jsx)(n.p,{children:"Defines exact foreign key relationship:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sql",children:"SELECT COD_DIM, COD_VAR, COD_DIM_OBJ, COD_VAR_OBJ\nFROM TB_OBJECT\nWHERE COD_DIM = 'ART' AND COD_VAR = 'XART11';\n\n-- Result:\n-- COD_DIM: ART (source dimension)\n-- COD_VAR: XART11 (source field - stores foreign key)\n-- COD_DIM_OBJ: CL103 (destination dimension)\n-- COD_VAR_OBJ: XCL103 (destination field - primary key)\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Relationship:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"TB_ANAG_ART00.XART11 \u2192 TB_ANAG_CL10300.XCL103\n"})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"use-cases",children:"Use Cases"}),"\n",(0,r.jsx)(n.h3,{id:"use-case-1-product-category-dropdown",children:"Use Case 1: Product Category Dropdown"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Scenario:"})," Display category dropdown on product creation form."]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Implementation:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-javascript",children:"async function loadCategories() {\n  const response = await fetch(\n    `/api/v4/core/vars?source=settings-2&field=XART11`\n  );\n  const categories = await response.json();\n\n  // Populate dropdown\n  return categories.map(cat => ({\n    value: cat.XCL103,  // Foreign key value\n    label: cat.XCL104   // Display text\n  }));\n}\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Rendered:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-html",children:'<select name="category">\n  <option value="001">Magl.merinf.p.stoffa</option>\n  <option value="002">Magl.vis.cot.fil.fan</option>\n  <option value="003">Accessori</option>\n</select>\n'})}),"\n",(0,r.jsx)(n.h3,{id:"use-case-2-country-autocomplete",children:"Use Case 2: Country Autocomplete"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Scenario:"})," Searchable country field for user registration."]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Implementation:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-javascript",children:"async function searchCountries(query) {\n  if (query.length < 2) return [];\n\n  const response = await fetch(\n    `/api/v4/core/vars?source=users-1&field=XUT_COUNTRY&$filter=contains(XCOUNTRY_NAME,'${query}')`\n  );\n  return await response.json();\n}\n\n// User types \"Ita\"\nconst results = await searchCountries('Ita');\n// Returns: [{ XCOUNTRY_CODE: 'IT', XCOUNTRY_NAME: 'Italy' }, ...]\n"})}),"\n",(0,r.jsx)(n.h3,{id:"use-case-3-loyalty-card-lookup",children:"Use Case 3: Loyalty Card Lookup"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Scenario:"})," Search for customer's loyalty card."]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Implementation:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-javascript",children:"async function findLoyaltyCard(cardNumber) {\n  const response = await fetch(\n    `/api/v4/core/vars?source=loyalty-1&field=XLOYALTY_CARD&$filter=startwith(XCARD_NUMBER,'${cardNumber}')`\n  );\n  return await response.json();\n}\n"})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"best-practices",children:"Best Practices"}),"\n",(0,r.jsx)(n.h3,{id:"-do",children:"\u2705 DO:"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Use VARS for small, static lists:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-javascript",children:"// \u2705 Good - VAT codes (few records, rarely change)\nGET /api/v4/core/vars?source=settings-2&field=XART_VAT\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Use AC for large, searchable datasets:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-javascript",children:"// \u2705 Good - Countries (200+ records, user searches)\nGET /api/v4/core/vars?source=settings-2&field=XUT_COUNTRY&$filter=contains(XCOUNTRY_NAME,'${query}')\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Validate foreign keys before submission:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-javascript",children:"// \u2705 Good - verify category exists before creating product\nconst categories = await fetch(`/api/v4/core/vars?source=settings-2&field=XART11`);\nconst validCodes = categories.map(c => c.XCL103);\n\nif (!validCodes.includes(selectedCategory)) {\n  alert('Invalid category selected');\n}\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Debounce AC searches:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-javascript",children:"// \u2705 Good - wait 300ms before searching\nconst debouncedSearch = debounce(searchCountries, 300);\ninput.addEventListener('input', (e) => debouncedSearch(e.target.value));\n"})}),"\n",(0,r.jsx)(n.h3,{id:"-dont",children:"\u274c DON'T:"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Don't skip filter for AC fields:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-javascript",children:"// \u274c Bad - returns empty array\nGET /api/v4/core/vars?source=settings-2&field=XUT_COUNTRY\n\n// \u2705 Good\nGET /api/v4/core/vars?source=settings-2&field=XUT_COUNTRY&$filter=startwith(XCOUNTRY_NAME,'${query}')\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Don't use getACList for large datasets:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-javascript",children:"// \u274c Bad - returns 10,000+ records\nGET /api/v4/core/vars?source=settings-2&field=XLOYALTY_CARD&getACList=1\n\n// \u2705 Good - filter first\nGET /api/v4/core/vars?source=settings-2&field=XLOYALTY_CARD&$filter=startwith(XCARD_NUMBER,'${query}')\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Don't submit invalid foreign keys:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-javascript",children:'// \u274c Bad - backend will reject with 400 error\nPOST /api/v4/core/ART\n{ "data": { "XART11": "invalid_code" } }\n\n// \u2705 Good - validate first using /vars endpoint\n'})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Don't confuse foreign key field with display field:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-javascript",children:'// \u274c Bad - storing display text instead of code\n{ "XART11": "Magl.vis.cot.fil.fan" }\n\n// \u2705 Good - store foreign key code\n{ "XART11": "002" }\n'})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"common-errors",children:"Common Errors"}),"\n",(0,r.jsx)(n.h3,{id:"error-missing-source-parameter",children:"Error: Missing source Parameter"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Request:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"GET /api/v4/core/vars?field=XART11\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Error:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "status": 400,\n  "message": "Missing required parameter: source",\n  "code": "MISSING_PARAMETER"\n}\n'})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Solution:"})," Always include source parameter."]}),"\n",(0,r.jsx)(n.h3,{id:"error-invalid-field-code",children:"Error: Invalid Field Code"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Request:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"GET /api/v4/core/vars?source=settings-2&field=INVALID_FIELD\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Error:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "status": 400,\n  "message": "Field INVALID_FIELD not found in dimension",\n  "code": "INVALID_FIELD"\n}\n'})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Solution:"})," Verify field code exists in TB_VAR for the dimension associated with source."]}),"\n",(0,r.jsx)(n.h3,{id:"error-field-not-acvars-type",children:"Error: Field Not AC/VARS Type"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Request:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"GET /api/v4/core/vars?source=settings-2&field=XART01\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Error:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "status": 400,\n  "message": "Field XART01 is not AC or VARS type",\n  "code": "INVALID_FIELD_TYPE"\n}\n'})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Solution:"})," Only use /vars endpoint for AC or VARS field types."]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"summary",children:"Summary"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"\u2705 AC/VARS fields represent foreign keys to other dimensions"}),"\n",(0,r.jsx)(n.li,{children:"\u2705 VARS returns full list (for small datasets)"}),"\n",(0,r.jsx)(n.li,{children:"\u2705 AC requires filter (for large datasets)"}),"\n",(0,r.jsx)(n.li,{children:"\u2705 getACList=1 bypasses filter requirement"}),"\n",(0,r.jsx)(n.li,{children:"\u2705 Foreign key validation prevents orphaned links"}),"\n",(0,r.jsxs)(n.li,{children:["\u2705 Endpoint: ",(0,r.jsx)(n.code,{children:"GET /api/v4/core/vars?source=X&field=Y&$filter=..."})]}),"\n",(0,r.jsx)(n.li,{children:"\u2705 Metadata: TB_VAR (TIPO_CAMPO, TIPO_VAR) + TB_OBJECT (foreign key definition)"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Key Takeaways:"})}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:"Use VARS for dropdowns (< 100 options)"}),"\n",(0,r.jsx)(n.li,{children:"Use AC for autocomplete (100+ options, searchable)"}),"\n",(0,r.jsx)(n.li,{children:"Always validate foreign keys before submission"}),"\n",(0,r.jsx)(n.li,{children:"Debounce AC searches for better UX"}),"\n",(0,r.jsx)(n.li,{children:"Don't use getACList for very large datasets"}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"related-concepts",children:"Related Concepts"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"/docs/products/map.q01.io/core-api-platform-v4/core-concepts/field-visibility",children:"Field Visibility"})," - COD_ON_OFF flags"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"/docs/products/map.q01.io/core-api-platform-v4/reference/metadata-tables#tb_object---dimension-relationships",children:"Relationships"})," - TB_OBJECT foreign keys"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"/docs/products/map.q01.io/core-api-platform-v4/query-patterns/filtering",children:"Filtering"})," - Filter syntax reference"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"/docs/products/map.q01.io/core-api-platform-v4/write-patterns/validation",children:"Validation"})," - Foreign key validation"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"/docs/products/map.q01.io/core-api-platform-v4/reference/metadata-tables",children:"Metadata Tables"})," - TB_VAR and TB_OBJECT schemas"]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,i.M)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(c,{...e})}):c(e)}},2172:(e,n,s)=>{s.d(n,{I:()=>t,M:()=>a});var r=s(1504);const i={},l=r.createContext(i);function a(e){const n=r.useContext(l);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function t(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:a(e.components),r.createElement(l.Provider,{value:n},e.children)}}}]);